_id: Room_Booking
isEditable: true
stateGraph:
    nodes:
        - PENDING
        - FINALIZED
        - CANCELLED
    transitions:
        -
            source: PENDING
            target: FINALIZED
        -
            source: PENDING
            target: CANCELLED
        -
            source: FINALIZED
            target: CANCELLED
props:
    _id:
        name: _id
        propType_: TEXT
        required: true
    guest:
        name: guest
        propType_: REFERENCE_TO
        referencedEntityName: $User
        referencedPropertyName: _id
    room_type:
        name: room_type
        propType_: REFERENCE_TO
        referencedEntityName: Room_Type
        referencedPropertyName: _id
    start_date:
        name: start_date
        propType_: DATETIME
        required: true
    end_date:
        name: end_date
        propType_: DATETIME
        required: true
    nb_adults:
        name: nb_adults
        propType_: NUMBER
        required: true
    nb_children:
        name: nb_children
        propType_: NUMBER
        required: true
    days:
        name: days
        propType_: FORMULA
        formula: 'DATEDIF(start_date, end_date, "D") + 1'
    cost:
        name: cost
        propType_: FORMULA
        formula: days * price
        returnType_: NUMBER
    _owner:
        name: _owner
        propType_: TEXT
        required: true
    _role:
        name: _role
        propType_: TEXT
        required: true
    _rev:
        name: _rev
        propType_: TEXT
        required: true
    room_type_name:
        name: room_type_name
        propType_: KEY
        scalarFormula: 'HLOOKUP_COLUMN(room_type, name, true'
    price:
        name: price
        propType_: KEY
        scalarFormula: 'HLOOKUP_COLUMN(room_type, price, true'
