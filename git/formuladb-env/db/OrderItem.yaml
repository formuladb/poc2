_id: OrderItem
props:
    _id:
        name: _id
        propType_: STRING
        required: true
    product_id:
        name: product_id
        propType_: REFERENCE_TO
        referencedEntityName: ProductLocation
        referencedPropertyName: _id
    quantity:
        name: quantity
        propType_: NUMBER
        required: true
    error_quantity:
        name: error_quantity
        propType_: NUMBER
    client_stock:
        name: client_stock
        propType_: NUMBER
    units:
        name: units
        propType_: CHILD_TABLE
        referencedEntityName: InventoryProductUnit
    _owner: { name: _owner, propType_: STRING, required: true }
    _role: { name: _role, propType_: STRING, required: true }
    _rev: { name: _rev, propType_: STRING, required: true }
autoCorrectionsOnValidationFailed:
    ProductLocation!positiveStock:
        -
            targetPropertyName: quantity
            autoCorrectExpr: {type: CallExpression, startIndex: 0, arguments: [{type: NumberLiteral, startIndex: 4, endIndex: 5, origExpr: '0', value: 0, raw: '0'}, {type: BinaryExpression, startIndex: 7, endIndex: 41, origExpr: quantity + $ROW$.available_stock__, operator: +, left: {type: Identifier, startIndex: 7, endIndex: 15, origExpr: quantity, name: quantity}, right: {type: MemberExpression, startIndex: 18, computed: false, object: {type: Identifier, startIndex: 18, endIndex: 23, origExpr: $ROW$, name: $ROW$}, property: {type: Identifier, startIndex: 24, endIndex: 41, origExpr: available_stock__, name: available_stock__}, endIndex: 41, origExpr: $ROW$.available_stock__}}], callee: {type: Identifier, startIndex: 0, endIndex: 3, origExpr: MAX, name: MAX}, endIndex: 42, origExpr: 'MAX(0, quantity + $ROW$.available_stock__)'}
        -
            targetPropertyName: error_quantity
            autoCorrectExpr: {type: CallExpression, startIndex: 0, arguments: [{type: BinaryExpression, startIndex: 4, endIndex: 29, origExpr: $OLD$.quantity - quantity, operator: '-', left: {type: MemberExpression, startIndex: 4, computed: false, object: {type: Identifier, startIndex: 4, endIndex: 9, origExpr: $OLD$, name: $OLD$}, property: {type: Identifier, startIndex: 10, endIndex: 18, origExpr: quantity, name: quantity}, endIndex: 18, origExpr: $OLD$.quantity}, right: {type: Identifier, startIndex: 21, endIndex: 29, origExpr: quantity, name: quantity}}], callee: {type: Identifier, startIndex: 0, endIndex: 3, origExpr: ABS, name: ABS}, endIndex: 30, origExpr: ABS($OLD$.quantity - quantity)}
isEditable: true
