C:\Windows\System32\bash.exe -ic 'node --trace-warnings --debug-brk --inspect=0.0.0.0:9232 jasmine.js 'fe\src\v-nav\v-nav.component.ts''
bash: /usr/lib/git-core/git-sh-prompt: line 300: syntax error near unexpected token `('
bash: /usr/lib/git-core/git-sh-prompt: line 300: `__git_ps1 ()'
Debugger listening on ws://0.0.0.0:9232/efc061a2-7fde-40bd-84e4-dbf7fd8cadb0
For help, see: https://nodejs.org/en/docs/inspector
Debugger attached.
null: Array(3) ["/usr/bin/node", "/d/code/metawiz/febe/jasmine.js", "fe\src\v-nav\v-nav.component.ts"]
Jasmine started

  AutocompleteComponent
    ✓ should render (0.051 sec)

null: Error: Uncaught [TypeError: Cannot read property 'split' of undefined]
    at reportException (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at CustomElementReactionStack.invokeCEReactions (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/custom-elements.js:139:13)
    at HTMLElement.CEReaction [as innerHTML] (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/ce-reaction.js:632:35)
    at HTMLElement.connectedCallbackNew (/d/code/metawiz/febe/fe/src/live-dom-template/frmdb-element.ts:41:31)
    at CustomElementReactionStack.invokeCEReactions (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/custom-elements.js:133:26)
    at HTMLBodyElement.CEReaction [as innerHTML] (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/ce-reaction.js:632:35)
    at UserContext.it (/d/code/metawiz/febe/fe/src/db-editor/db-editor.component.spec.ts:22:32)
    at QueueRunner.attempt (/d/code/metawiz/febe/node_modules/jasmine-core/lib/jasmine-core/jasmine.js:5513:24)
    at QueueRunner.run (/d/code/metawiz/febe/node_modules/jasmine-core/lib/jasmine-core/jasmine.js:5543:25)
    at runNext (/d/code/metawiz/febe/node_modules/jasmine-core/lib/jasmine-core/jasmine.js:5469:18)
null: TypeError: Cannot read property 'split' of undefined
null: Error: Uncaught [TypeError: Right-hand side of 'instanceof' is not callable]
    at reportException (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at CustomElementReactionStack.invokeCEReactions (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/custom-elements.js:139:13)
    at HTMLElement.CEReaction [as innerHTML] (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/ce-reaction.js:632:35)
    at HTMLElement.connectedCallbackNew (/d/code/metawiz/febe/fe/src/live-dom-template/frmdb-element.ts:41:31)
    at CustomElementReactionStack.invokeCEReactions (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/custom-elements.js:133:26)
    at HTMLBodyElement.CEReaction [as innerHTML] (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/ce-reaction.js:632:35)
    at UserContext.it (/d/code/metawiz/febe/fe/src/db-editor/db-editor.component.spec.ts:22:32)
    at QueueRunner.attempt (/d/code/metawiz/febe/node_modules/jasmine-core/lib/jasmine-core/jasmine.js:5513:24)
    at QueueRunner.run (/d/code/metawiz/febe/node_modules/jasmine-core/lib/jasmine-core/jasmine.js:5543:25)
    at runNext (/d/code/metawiz/febe/node_modules/jasmine-core/lib/jasmine-core/jasmine.js:5469:18)
null: TypeError: Right-hand side of 'instanceof' is not callable
  DbEditorComponent
    ✓ should navigate between tables (2 secs)
    ✓ should navigate between tables used in formula (0.006 sec)
    ✓ should highlight table colums used in formula (0.004 sec)

  FormService
    ✓ mock debounce example (0.018 sec)
null: Array(0) []
    ✓ should allow editing of records (0.692 sec)

<div class="formula-code-editor d-flex">
    <button id="toggle-formula-editor" class="btn btn-light p-1" title="Formula Editor">
        <img src="img/frmdb-icon.png" alt="Edit Formula">
    </button>  
    <div class="editor">
      <textarea class="editor-textarea" readonly="" spellcheck="false"></textarea>
      <div class="editor-formatted-overlay"></div>
    </div>
    <button id="apply-formula-changes" class="btn btn-light p-1" disabled="" title="Apply Changes">
        <i class="la la-check-circle"></i>
    </button>    
</div>
  FormulaEditorComponent
    ✓ should render (0.249 sec)

  [FE] FrmdbTemplate
    ✓ should update view when template OR data changes (1 sec)
    ✓ should serialize element to DataObj (0.044 sec)

  VNavComponent
    ✓ should render (0.009 sec)

  WebComponentExample Spec Example
    ✓ should render (0.008 sec)

  FormulaCompiler
    ✓ should stringify parsed expressions (0.003 sec)
    ✓ should extract keys from binary expressions operand (0.005 sec)
    ✓ should extract map reduce keys and queries from binary expressions (0.006 sec)
    ✓ should extract map reduce keys and queries from logical expressions (0.003 sec)
    ✓ should compile mock schema correctly (0.001 sec)

null: Array(3) [Object, Object, Object]
null: Array(1) [Object]
null: Array(1) [Object]
null: Array(6) [Object, Object, Object, Object, Object, Object]
null: Array(18) [Object, Object, Object, Object, Object, Object, Object, Object, …]
  FormulaTokenizer
    ✓ should tokenize correct formula with function signature helper (0.02 sec)
null: Array(3) [Object, Object, Object]
null: Array(18) [Object, Object, Object, Object, Object, Object, Object, Object, …]
null: Array(1) [Object]
null: Array(1) [Object]
null: Array(6) [Object, Object, Object, Object, Object, Object]
    ✓ should report non-existent column (0.017 sec)
null: Array(3) [Object, Object, Object]
null: Array(1) [Object]
null: Array(1) [Object]
null: Array(6) [Object, Object, Object, Object, Object, Object]
null: Array(18) [Object, Object, Object, Object, Object, Object, Object, Object, …]
    ✓ should report non-existent column and not missing parenthesis (0.029 sec)
null: Array(3) [Object, Object, Object]
null: Array(1) [Object]
null: Array(1) [Object]
null: Array(6) [Object, Object, Object, Object, Object, Object]
null: Array(18) [Object, Object, Object, Object, Object, Object, Object, Object, …]
    ✓ should report non-existent table (0.029 sec)
null: Array(3) [Object, Object, Object]
    ✓ should suggest function names (0.011 sec)
    ✓ test REF (0.002 sec)
    ✓ test REFERENCE_TO (0.008 sec)
    ✓ test REFERENCE_TO( (0.004 sec)
null: Array(1) [Object]
    ✓ test REFERENCE_TO(Bla (0.014 sec)
null: Array(3) [Object, Object, Object]
    ✓ test REFERENCE_TO(B. (0.023 sec)
null: Array(3) [Object, Object, Object]
    ✓ test REFERENCE_TO(B.i (0.009 sec)
    ✓ test num (0.001 sec)

  FrmdbEngineStore _count
    ✗ simple one table RANK formula: RANK([FLOOR(@[x]/4) * 4, @[x]],_MAP(A.x,[FLOOR(x/4) * 4, x])) (0.206 sec)
      - Uncaught exception: ReferenceError: Vvveb is not defined
          at Timeout.setTimeout (/d/code/metawiz/febe/fe/src/v-nav/v-nav.component.ts:42:42)
          at ontimeout (timers.js:436:11)
          at tryOnTimeout (timers.js:300:5)
          at listOnTimeout (timers.js:263:5)
          at Timer.processTimers (timers.js:223:10)
    ✗ two table RANK formula: RANK([FLOOR(@[idx]/4) * 4, @[idx]], _MAP(A.x, [FLOOR(x/4) * 4, x])) (0.365 sec)
      - Expected 0 to equal 4.
          at <Jasmine>
          at UserContext.it (/d/code/metawiz/febe/core/src/frmdb_engine_functions/_count.spec.ts:93:29)
      - Expected undefined to equal Object({ _id: 'A~~1', x: 1 }).
          at <Jasmine>
          at UserContext.it (/d/code/metawiz/febe/core/src/frmdb_engine_functions/_count.spec.ts:94:25)
      - Expected undefined to equal Object({ _id: 'A~~2', x: 3 }).
          at <Jasmine>
          at UserContext.it (/d/code/metawiz/febe/core/src/frmdb_engine_functions/_count.spec.ts:95:25)
      - Expected undefined to equal Object({ _id: 'A~~3', x: 5 }).
          at <Jasmine>
          at UserContext.it (/d/code/metawiz/febe/core/src/frmdb_engine_functions/_count.spec.ts:96:25)
      - Expected undefined to equal Object({ _id: 'A~~4', x: 7 }).
          at <Jasmine>
          at UserContext.it (/d/code/metawiz/febe/core/src/frmdb_engine_functions/_count.spec.ts:97:25)
      - Expected 0 to equal 1.
          at <Jasmine>
          at UserContext.it (/d/code/metawiz/febe/core/src/frmdb_engine_functions/_count.spec.ts:100:23)
      - Expected 0 to equal 2.
          at <Jasmine>
          at UserContext.it (/d/code/metawiz/febe/core/src/frmdb_engine_functions/_count.spec.ts:102:23)
      - Expected 0 to equal 1.
          at <Jasmine>
          at UserContext.it (/d/code/metawiz/febe/core/src/frmdb_engine_functions/_count.spec.ts:104:23)
      - Expected 0 to equal 2.
          at <Jasmine>
          at UserContext.it (/d/code/metawiz/febe/core/src/frmdb_engine_functions/_count.spec.ts:106:23)
      - Expected 0 to equal 2.
          at <Jasmine>
          at UserContext.it (/d/code/metawiz/febe/core/src/frmdb_engine_functions/_count.spec.ts:108:23)
      - Expected 0 to equal 1.
          at <Jasmine>
          at UserContext.it (/d/code/metawiz/febe/core/src/frmdb_engine_functions/_count.spec.ts:111:23)
      - Expected 0 to equal 1.
          at <Jasmine>
          at UserContext.it (/d/code/metawiz/febe/core/src/frmdb_engine_functions/_count.spec.ts:113:23)
      - Expected 0 to equal 3.
          at <Jasmine>
          at UserContext.it (/d/code/metawiz/febe/core/src/frmdb_engine_functions/_count.spec.ts:115:23)

  FrmdbEngineStore _textjoin
    ✓ B.list= TEXTJOIN(IF(A._id, FLOOR(x/4) == @[idx]),";;") (0.365 sec)

  frmdb_engine_store
    ✓ Should allow working with MapReduce queries produced by the FormulaCompiler (0.134 sec)
    ✓ Should allow to install formulas then query observers and aggregations (0.244 sec)

    TablePage Relationships
      ✓ example REFERENCE_TO by _id (0.234 sec)

Starting FormulaDBEngine...
2019-08-14T14:51:34.586Z|1565794294586_fu9hedEtyUUWdbZuHB4RDG|BEGIN|{"clientId_":"bS5oEKiPK694niBSqici9D","state_":"BEGIN","obj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":11},"type_":"[form] ServerEventModifiedFormData","_id":"1565794294586_fu9hedEtyUUWdbZuHB4RDG"}
2019-08-14T14:51:34.605Z|1565794294586_fu9hedEtyUUWdbZuHB4RDG||1|addObj|1ms; level=0|ReceiptItem~~1__1/{"newObj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":11},"oldObj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":11},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:34.676Z|1565794294586_fu9hedEtyUUWdbZuHB4RDG||1|preComputeFormula|ReceiptItem~~1__1 --> ProductLocation~~1[received_stock__] = 16 ($TRG$={"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])":16}) = [$TRG$['vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])']]
2019-08-14T14:51:34.678Z|1565794294586_fu9hedEtyUUWdbZuHB4RDG||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 17
2019-08-14T14:51:34.681Z|1565794294586_fu9hedEtyUUWdbZuHB4RDG||1|addObj|1ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":16,"ordered_stock__":-1,"available_stock__":17},"oldObj":{"_id":"ProductLocation~~1","received_stock__":-1,"ordered_stock__":-1,"available_stock__":-1},"aggsViewsUpdates":[{"viewHashCode":"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ReceiptItem~~1__1"],"value":11}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":16}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:34.687Z|1565794294586_fu9hedEtyUUWdbZuHB4RDG|0|objIds: ["ReceiptItem~~1__1","ProductLocation~~1","MAP:ProductLocation~~1\u0001ReceiptItem~~1__1","REDUCE:ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-14T14:51:34.691Z|1565794294586_fu9hedEtyUUWdbZuHB4RDG|0|executing transaction
2019-08-14T14:51:34.701Z|1565794294586_fu9hedEtyUUWdbZuHB4RDG||1|addObj|0ms; level=0|ReceiptItem~~1__1/{"newObj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":11},"oldObj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":11},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:34.761Z|1565794294586_fu9hedEtyUUWdbZuHB4RDG||1|preComputeFormula|ReceiptItem~~1__1 --> ProductLocation~~1[received_stock__] = 16 ($TRG$={"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])":16}) = [$TRG$['vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])']]
2019-08-14T14:51:34.762Z|1565794294586_fu9hedEtyUUWdbZuHB4RDG||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 17
2019-08-14T14:51:34.764Z|1565794294586_fu9hedEtyUUWdbZuHB4RDG||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":16,"ordered_stock__":-1,"available_stock__":17},"oldObj":{"_id":"ProductLocation~~1","received_stock__":-1,"ordered_stock__":-1,"available_stock__":-1},"aggsViewsUpdates":[{"viewHashCode":"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ReceiptItem~~1__1"],"value":11}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":16}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:34.767Z|1565794294586_fu9hedEtyUUWdbZuHB4RDG||1|computeFormulasAndSave|saveObjects: {"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":11}, {"_id":"ProductLocation~~1","received_stock__":16,"ordered_stock__":-1,"available_stock__":17}
2019-08-14T14:51:34.799Z|1565794294586_fu9hedEtyUUWdbZuHB4RDG||1|FINISH|{"clientId_":"bS5oEKiPK694niBSqici9D","state_":"BEGIN","obj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":11},"type_":"[form] ServerEventModifiedFormData","_id":"1565794294586_fu9hedEtyUUWdbZuHB4RDG"}
2019-08-14T14:51:34.804Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7|BEGIN|{"clientId_":"3F4Ncjn9GRKqsSrgLcDFAq","state_":"BEGIN","obj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565794294803_dBK56JBLtkX4qJhuDTYEd7"}
2019-08-14T14:51:34.818Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||1|addObj|0ms; level=0|OrderItem~~1__2/{"newObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":10},"oldObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:34.899Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||1|computeAutoCorrections: OrderItem~~1__2[quantity] = [MAX(0, quantity + $ROW$.available_stock__)] = 6
2019-08-14T14:51:34.902Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||1|computeAutoCorrections: OrderItem~~1__2[error_quantity] = [ABS($OLD$.quantity - quantity)] = 4
2019-08-14T14:51:34.910Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||2|addObj|0ms; level=0|OrderItem~~1__2/{"newObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":6,"error_quantity":4},"oldObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:34.978Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||2|preComputeFormula|OrderItem~~1__2 --> ProductLocation~~1[ordered_stock__] = 16 ($TRG$={"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])":16}) = [$TRG$['vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])']]
2019-08-14T14:51:34.981Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||2|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 0
2019-08-14T14:51:34.985Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||2|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":16,"ordered_stock__":16,"available_stock__":0},"oldObj":{"_id":"ProductLocation~~1","received_stock__":16,"ordered_stock__":-1,"available_stock__":17},"aggsViewsUpdates":[{"viewHashCode":"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","OrderItem~~1__2"],"value":6}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":16}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:34.989Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7|0|objIds: ["OrderItem~~1__2","ProductLocation~~1","MAP:ProductLocation~~1\u0001OrderItem~~1__2","REDUCE:ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-14T14:51:34.995Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7|0|executing transaction
2019-08-14T14:51:35.008Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||1|addObj|0ms; level=0|OrderItem~~1__2/{"newObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":10,"error_quantity":4},"oldObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:35.081Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||1|computeAutoCorrections: OrderItem~~1__2[quantity] = [MAX(0, quantity + $ROW$.available_stock__)] = 6
2019-08-14T14:51:35.083Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||1|computeAutoCorrections: OrderItem~~1__2[error_quantity] = [ABS($OLD$.quantity - quantity)] = 4
2019-08-14T14:51:35.093Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||2|addObj|0ms; level=0|OrderItem~~1__2/{"newObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":6,"error_quantity":4},"oldObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:35.154Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||2|preComputeFormula|OrderItem~~1__2 --> ProductLocation~~1[ordered_stock__] = 16 ($TRG$={"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])":16}) = [$TRG$['vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])']]
2019-08-14T14:51:35.156Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||2|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 0
2019-08-14T14:51:35.158Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||2|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":16,"ordered_stock__":16,"available_stock__":0},"oldObj":{"_id":"ProductLocation~~1","received_stock__":16,"ordered_stock__":-1,"available_stock__":17},"aggsViewsUpdates":[{"viewHashCode":"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","OrderItem~~1__2"],"value":6}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":16}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:35.160Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||2|computeFormulasAndSave|saveObjects: {"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":6,"error_quantity":4}, {"_id":"ProductLocation~~1","received_stock__":16,"ordered_stock__":16,"available_stock__":0}
2019-08-14T14:51:35.188Z|1565794294803_dBK56JBLtkX4qJhuDTYEd7||2|FINISH|{"clientId_":"3F4Ncjn9GRKqsSrgLcDFAq","state_":"BEGIN","obj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":6,"error_quantity":4},"type_":"[form] ServerEventModifiedFormData","_id":"1565794294803_dBK56JBLtkX4qJhuDTYEd7"}
  Inventory Metadata
    ✓ Basic stock operations (0.894 sec)
Starting FormulaDBEngine...
2019-08-14T14:51:35.245Z|1565794295245_dKbfKHQfkSuKmsB1pqWNMw|BEGIN|{"clientId_":"hYp7CVwEfco3ndrTdvP9TC","state_":"BEGIN","obj":{"_id":"ProductLocation~~1","received_stock__":-1,"ordered_stock__":-1,"available_stock__":-1},"type_":"[form] ServerEventModifiedFormData","_id":"1565794295245_dKbfKHQfkSuKmsB1pqWNMw"}
2019-08-14T14:51:35.279Z|1565794295245_dKbfKHQfkSuKmsB1pqWNMw||computeFormulasAndSave| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 0
2019-08-14T14:51:35.281Z|1565794295245_dKbfKHQfkSuKmsB1pqWNMw||1|addObj|0ms; level=0|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":0,"ordered_stock__":0,"available_stock__":0},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-ProductLocation-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-14T14:51:35.286Z|1565794295245_dKbfKHQfkSuKmsB1pqWNMw|0|objIds: ["ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-14T14:51:35.288Z|1565794295245_dKbfKHQfkSuKmsB1pqWNMw|0|executing transaction
2019-08-14T14:51:35.312Z|1565794295245_dKbfKHQfkSuKmsB1pqWNMw||computeFormulasAndSave| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 0
2019-08-14T14:51:35.314Z|1565794295245_dKbfKHQfkSuKmsB1pqWNMw||1|addObj|0ms; level=0|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":0,"ordered_stock__":0,"available_stock__":0},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-ProductLocation-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-14T14:51:35.319Z|1565794295245_dKbfKHQfkSuKmsB1pqWNMw||1|computeFormulasAndSave|saveObjects: {"_id":"ProductLocation~~1","received_stock__":0,"ordered_stock__":0,"available_stock__":0}
2019-08-14T14:51:35.341Z|1565794295245_dKbfKHQfkSuKmsB1pqWNMw||1|FINISH|{"clientId_":"hYp7CVwEfco3ndrTdvP9TC","state_":"BEGIN","obj":{"_id":"ProductLocation~~1","received_stock__":0,"ordered_stock__":0,"available_stock__":0},"type_":"[form] ServerEventModifiedFormData","_id":"1565794295245_dKbfKHQfkSuKmsB1pqWNMw"}
2019-08-14T14:51:35.346Z|1565794295345_vnRKr8V4TmVjLBrZk3sJht|BEGIN|{"clientId_":"nHrCREncJXZhX8CTFuvZy3","state_":"BEGIN","obj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565794295345_vnRKr8V4TmVjLBrZk3sJht"}
2019-08-14T14:51:35.359Z|1565794295345_vnRKr8V4TmVjLBrZk3sJht||1|addObj|0ms; level=0|ReceiptItem~~1__1/{"newObj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:35.398Z|1565794295345_vnRKr8V4TmVjLBrZk3sJht||1|preComputeFormula|ReceiptItem~~1__1 --> ProductLocation~~1[received_stock__] = 10 ($TRG$={"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])":10}) = [$TRG$['vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])']]
2019-08-14T14:51:35.399Z|1565794295345_vnRKr8V4TmVjLBrZk3sJht||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 10
2019-08-14T14:51:35.401Z|1565794295345_vnRKr8V4TmVjLBrZk3sJht||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":10,"ordered_stock__":0,"available_stock__":10},"oldObj":{"_id":"ProductLocation~~1","received_stock__":0,"ordered_stock__":0,"available_stock__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ReceiptItem~~1__1"],"value":10}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:35.404Z|1565794295345_vnRKr8V4TmVjLBrZk3sJht|0|objIds: ["ReceiptItem~~1__1","ProductLocation~~1","MAP:ProductLocation~~1\u0001ReceiptItem~~1__1","REDUCE:ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-14T14:51:35.407Z|1565794295345_vnRKr8V4TmVjLBrZk3sJht|0|executing transaction
2019-08-14T14:51:35.414Z|1565794295345_vnRKr8V4TmVjLBrZk3sJht||1|addObj|0ms; level=0|ReceiptItem~~1__1/{"newObj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:35.450Z|1565794295345_vnRKr8V4TmVjLBrZk3sJht||1|preComputeFormula|ReceiptItem~~1__1 --> ProductLocation~~1[received_stock__] = 10 ($TRG$={"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])":10}) = [$TRG$['vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])']]
2019-08-14T14:51:35.452Z|1565794295345_vnRKr8V4TmVjLBrZk3sJht||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 10
2019-08-14T14:51:35.453Z|1565794295345_vnRKr8V4TmVjLBrZk3sJht||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":10,"ordered_stock__":0,"available_stock__":10},"oldObj":{"_id":"ProductLocation~~1","received_stock__":0,"ordered_stock__":0,"available_stock__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ReceiptItem~~1__1"],"value":10}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:35.456Z|1565794295345_vnRKr8V4TmVjLBrZk3sJht||1|computeFormulasAndSave|saveObjects: {"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":10}, {"_id":"ProductLocation~~1","received_stock__":10,"ordered_stock__":0,"available_stock__":10}
2019-08-14T14:51:35.484Z|1565794295345_vnRKr8V4TmVjLBrZk3sJht||1|FINISH|{"clientId_":"nHrCREncJXZhX8CTFuvZy3","state_":"BEGIN","obj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565794295345_vnRKr8V4TmVjLBrZk3sJht"}
2019-08-14T14:51:35.491Z|1565794295490_6Wtvuq92gwhfYNuMybWnPC|BEGIN|{"clientId_":"3RKAg6pbexehzoAa3Jygyw","state_":"BEGIN","obj":{"_id":"ReceiptItem~~1__2","product_id":"ProductLocation~~1","quantity":5},"type_":"[form] ServerEventModifiedFormData","_id":"1565794295490_6Wtvuq92gwhfYNuMybWnPC"}
2019-08-14T14:51:35.499Z|1565794295490_6Wtvuq92gwhfYNuMybWnPC||1|addObj|1ms; level=0|ReceiptItem~~1__2/{"newObj":{"_id":"ReceiptItem~~1__2","product_id":"ProductLocation~~1","quantity":5},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:35.519Z|1565794295490_6Wtvuq92gwhfYNuMybWnPC||1|preComputeFormula|ReceiptItem~~1__2 --> ProductLocation~~1[received_stock__] = 15 ($TRG$={"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])":15}) = [$TRG$['vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])']]
2019-08-14T14:51:35.521Z|1565794295490_6Wtvuq92gwhfYNuMybWnPC||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 15
2019-08-14T14:51:35.522Z|1565794295490_6Wtvuq92gwhfYNuMybWnPC||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":15,"ordered_stock__":0,"available_stock__":15},"oldObj":{"_id":"ProductLocation~~1","received_stock__":10,"ordered_stock__":0,"available_stock__":10},"aggsViewsUpdates":[{"viewHashCode":"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ReceiptItem~~1__2"],"value":5}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":15}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:35.524Z|1565794295490_6Wtvuq92gwhfYNuMybWnPC|0|objIds: ["ReceiptItem~~1__2","ProductLocation~~1","MAP:ProductLocation~~1\u0001ReceiptItem~~1__2","REDUCE:ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-14T14:51:35.526Z|1565794295490_6Wtvuq92gwhfYNuMybWnPC|0|executing transaction
2019-08-14T14:51:35.529Z|1565794295490_6Wtvuq92gwhfYNuMybWnPC||1|addObj|0ms; level=0|ReceiptItem~~1__2/{"newObj":{"_id":"ReceiptItem~~1__2","product_id":"ProductLocation~~1","quantity":5},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:35.566Z|1565794295490_6Wtvuq92gwhfYNuMybWnPC||1|preComputeFormula|ReceiptItem~~1__2 --> ProductLocation~~1[received_stock__] = 15 ($TRG$={"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])":15}) = [$TRG$['vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])']]
2019-08-14T14:51:35.567Z|1565794295490_6Wtvuq92gwhfYNuMybWnPC||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 15
2019-08-14T14:51:35.568Z|1565794295490_6Wtvuq92gwhfYNuMybWnPC||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":15,"ordered_stock__":0,"available_stock__":15},"oldObj":{"_id":"ProductLocation~~1","received_stock__":10,"ordered_stock__":0,"available_stock__":10},"aggsViewsUpdates":[{"viewHashCode":"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ReceiptItem~~1__2"],"value":5}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":15}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:35.569Z|1565794295490_6Wtvuq92gwhfYNuMybWnPC||1|computeFormulasAndSave|saveObjects: {"_id":"ReceiptItem~~1__2","product_id":"ProductLocation~~1","quantity":5}, {"_id":"ProductLocation~~1","received_stock__":15,"ordered_stock__":0,"available_stock__":15}
2019-08-14T14:51:35.602Z|1565794295490_6Wtvuq92gwhfYNuMybWnPC||1|FINISH|{"clientId_":"3RKAg6pbexehzoAa3Jygyw","state_":"BEGIN","obj":{"_id":"ReceiptItem~~1__2","product_id":"ProductLocation~~1","quantity":5},"type_":"[form] ServerEventModifiedFormData","_id":"1565794295490_6Wtvuq92gwhfYNuMybWnPC"}
2019-08-14T14:51:35.605Z|1565794295605_j2VqWk1bNAo4N9WYyydaYw|BEGIN|{"clientId_":"apAbvaF1UpPtJchj6T92Hz","state_":"BEGIN","obj":{"_id":"OrderItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565794295605_j2VqWk1bNAo4N9WYyydaYw"}
2019-08-14T14:51:35.621Z|1565794295605_j2VqWk1bNAo4N9WYyydaYw||1|addObj|0ms; level=0|OrderItem~~1__1/{"newObj":{"_id":"OrderItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:35.653Z|1565794295605_j2VqWk1bNAo4N9WYyydaYw||1|preComputeFormula|OrderItem~~1__1 --> ProductLocation~~1[ordered_stock__] = 10 ($TRG$={"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])":10}) = [$TRG$['vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])']]
2019-08-14T14:51:35.654Z|1565794295605_j2VqWk1bNAo4N9WYyydaYw||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 5
2019-08-14T14:51:35.656Z|1565794295605_j2VqWk1bNAo4N9WYyydaYw||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":15,"ordered_stock__":10,"available_stock__":5},"oldObj":{"_id":"ProductLocation~~1","received_stock__":15,"ordered_stock__":0,"available_stock__":15},"aggsViewsUpdates":[{"viewHashCode":"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","OrderItem~~1__1"],"value":10}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:35.658Z|1565794295605_j2VqWk1bNAo4N9WYyydaYw|0|objIds: ["OrderItem~~1__1","ProductLocation~~1","MAP:ProductLocation~~1\u0001OrderItem~~1__1","REDUCE:ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-14T14:51:35.661Z|1565794295605_j2VqWk1bNAo4N9WYyydaYw|0|executing transaction
2019-08-14T14:51:35.665Z|1565794295605_j2VqWk1bNAo4N9WYyydaYw||1|addObj|0ms; level=0|OrderItem~~1__1/{"newObj":{"_id":"OrderItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:35.703Z|1565794295605_j2VqWk1bNAo4N9WYyydaYw||1|preComputeFormula|OrderItem~~1__1 --> ProductLocation~~1[ordered_stock__] = 10 ($TRG$={"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])":10}) = [$TRG$['vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])']]
2019-08-14T14:51:35.705Z|1565794295605_j2VqWk1bNAo4N9WYyydaYw||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 5
2019-08-14T14:51:35.707Z|1565794295605_j2VqWk1bNAo4N9WYyydaYw||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":15,"ordered_stock__":10,"available_stock__":5},"oldObj":{"_id":"ProductLocation~~1","received_stock__":15,"ordered_stock__":0,"available_stock__":15},"aggsViewsUpdates":[{"viewHashCode":"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","OrderItem~~1__1"],"value":10}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:35.710Z|1565794295605_j2VqWk1bNAo4N9WYyydaYw||1|computeFormulasAndSave|saveObjects: {"_id":"OrderItem~~1__1","product_id":"ProductLocation~~1","quantity":10}, {"_id":"ProductLocation~~1","received_stock__":15,"ordered_stock__":10,"available_stock__":5}
2019-08-14T14:51:35.747Z|1565794295605_j2VqWk1bNAo4N9WYyydaYw||1|FINISH|{"clientId_":"apAbvaF1UpPtJchj6T92Hz","state_":"BEGIN","obj":{"_id":"OrderItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565794295605_j2VqWk1bNAo4N9WYyydaYw"}
2019-08-14T14:51:35.759Z|1565794295756_dXQCJWjr4XNqJsXXDftHNA|BEGIN|{"_id":"1565794295756_dXQCJWjr4XNqJsXXDftHNA","type_":"[entity] ServerEventSetProperty","targetEntity":{"_id":"ProductLocation","props":{"_id":{"name":"_id","propType_":"STRING","allowNull":false},"product_id":{"name":"product_id","propType_":"STRING","allowNull":false,"defaultValue":"DEFAULT-location"},"location_code":{"name":"location_code","propType_":"STRING","allowNull":false,"defaultValue":"DEFAULT-location"},"category":{"name":"category","propType_":"STRING","allowNull":false},"received_stock__":{"name":"received_stock__","propType_":"FORMULA","formula":"SUMIF(ReceiptItem.quantity, product_id == @[_id])"},"available_stock__":{"name":"available_stock__","propType_":"FORMULA","formula":"received_stock__ - ordered_stock__"},"ordered_stock__":{"name":"ordered_stock__","propType_":"FORMULA","formula":"SUMIF(OrderItem.quantity, product_id == @[_id])"},"price":{"name":"price","propType_":"NUMBER","allowNull":true},"currency":{"propType_":"REFERENCE_TO","referencedEntityName":"General_Currency","referencedPropertyName":"code","name":"currency__"},"minimal_stock":{"name":"minimal_stock","propType_":"NUMBER","allowNull":false},"moving_stock":{"name":"moving_stock","propType_":"NUMBER","allowNull":false},"state":{"name":"state","propType_":"STRING","allowNull":false}},"validations":{"positiveStock":{"conditionExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":22,"origExpr":"available_stock__ >= 0","operator":">=","left":{"type":"Identifier","startIndex":0,"endIndex":17,"origExpr":"available_stock__","name":"available_stock__"},"right":{"type":"NumberLiteral","startIndex":21,"endIndex":22,"origExpr":"0","value":0,"raw":"0"}}}},"isEditable":true},"property":{"name":"received_stock__","propType_":"FORMULA","formula":"COUNTIF(ReceiptItem.quantity, product_id == @[_id])"},"state_":"BEGIN","clientId_":"ABC"}
2019-08-14T14:51:35.862Z|1565794295756_dXQCJWjr4XNqJsXXDftHNA-1||1|addObj|0ms; level=0|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":2,"ordered_stock__":10,"available_stock__":5},"oldObj":{"_id":"ProductLocation~~1","received_stock__":15,"ordered_stock__":10,"available_stock__":5},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-COUNTIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-14T14:51:35.865Z|1565794295756_dXQCJWjr4XNqJsXXDftHNA-1|0|objIds: ["ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-14T14:51:35.866Z|1565794295756_dXQCJWjr4XNqJsXXDftHNA-1|0|executing transaction
2019-08-14T14:51:35.893Z|1565794295756_dXQCJWjr4XNqJsXXDftHNA-1||1|addObj|0ms; level=0|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":2,"ordered_stock__":10,"available_stock__":5},"oldObj":{"_id":"ProductLocation~~1","received_stock__":15,"ordered_stock__":10,"available_stock__":5},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-COUNTIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-14T14:51:35.895Z|1565794295756_dXQCJWjr4XNqJsXXDftHNA-1||1|computeFormulasAndSave|saveObjects: {"_id":"ProductLocation~~1","received_stock__":2,"ordered_stock__":10,"available_stock__":5}
2019-08-14T14:51:35.909Z|1565794295756_dXQCJWjr4XNqJsXXDftHNA-1||1|FINISH|{"_id":"1565794295756_dXQCJWjr4XNqJsXXDftHNA-1","type_":"[form] ServerEventModifiedFormData","state_":"BEGIN","clientId_":"ABC","obj":{"_id":"ProductLocation~~1","received_stock__":2,"ordered_stock__":10,"available_stock__":5}}
    ✓ Change formula (0.688 sec)

frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id])
stockReservationSchema.entities.B.props.sum__.compiledFormula_= undefined
stockReservationSchema.entities.B.props.x__.formula= 100 - sum__
Starting FormulaDBEngine...
2019-08-14T14:51:36.027Z|1565794296027_p6t6W4ksxBj9y1z9Cb6CHM|BEGIN|{"clientId_":"k2aZxksyA6vYdP62GXYfai","state_":"BEGIN","obj":{"_id":"A~~c__","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565794296027_p6t6W4ksxBj9y1z9Cb6CHM"}
2019-08-14T14:51:36.033Z|1565794296027_p6t6W4ksxBj9y1z9Cb6CHM||1|addObj|0ms; level=0|A~~c__t3dg9cwkL5TFgNpNszDGHw/{"newObj":{"_id":"A~~c__t3dg9cwkL5TFgNpNszDGHw","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:36.083Z|1565794296027_p6t6W4ksxBj9y1z9Cb6CHM||1|preComputeFormula|A~~c__t3dg9cwkL5TFgNpNszDGHw --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:36.085Z|1565794296027_p6t6W4ksxBj9y1z9Cb6CHM||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T14:51:36.086Z|1565794296027_p6t6W4ksxBj9y1z9Cb6CHM||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~c__t3dg9cwkL5TFgNpNszDGHw"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:36.088Z|1565794296027_p6t6W4ksxBj9y1z9Cb6CHM|0|objIds: ["A~~c__t3dg9cwkL5TFgNpNszDGHw","B~~1","MAP:B~~1\u0001A~~c__t3dg9cwkL5TFgNpNszDGHw","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:36.090Z|1565794296027_p6t6W4ksxBj9y1z9Cb6CHM|0|executing transaction
2019-08-14T14:51:36.093Z|1565794296027_p6t6W4ksxBj9y1z9Cb6CHM||1|addObj|0ms; level=0|A~~c__t3dg9cwkL5TFgNpNszDGHw/{"newObj":{"_id":"A~~c__t3dg9cwkL5TFgNpNszDGHw","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:36.119Z|1565794296027_p6t6W4ksxBj9y1z9Cb6CHM||1|preComputeFormula|A~~c__t3dg9cwkL5TFgNpNszDGHw --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:36.120Z|1565794296027_p6t6W4ksxBj9y1z9Cb6CHM||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T14:51:36.122Z|1565794296027_p6t6W4ksxBj9y1z9Cb6CHM||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~c__t3dg9cwkL5TFgNpNszDGHw"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:36.125Z|1565794296027_p6t6W4ksxBj9y1z9Cb6CHM||1|computeFormulasAndSave|saveObjects: {"_id":"A~~c__t3dg9cwkL5TFgNpNszDGHw","b":"B~~1","val":2}, {"_id":"B~~1","sum__":5,"x__":95}
2019-08-14T14:51:36.155Z|1565794296027_p6t6W4ksxBj9y1z9Cb6CHM||1|FINISH|{"clientId_":"k2aZxksyA6vYdP62GXYfai","state_":"BEGIN","obj":{"_id":"A~~c__t3dg9cwkL5TFgNpNszDGHw","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565794296027_p6t6W4ksxBj9y1z9Cb6CHM"}
2019-08-14T14:51:36.167Z|1565794296167_dcpihTbfaTyzNzy8Swexqe|BEGIN|{"clientId_":"pQHU6XqM65gaWWTrokiYSx","state_":"BEGIN","obj":{"_id":"A~~c__","b":"B~~1","val":3},"type_":"[form] ServerEventModifiedFormData","_id":"1565794296167_dcpihTbfaTyzNzy8Swexqe"}
2019-08-14T14:51:36.171Z|1565794296167_dcpihTbfaTyzNzy8Swexqe||1|addObj|0ms; level=0|A~~c__ft7XrB4MYjK8ZSn9hrzapZ/{"newObj":{"_id":"A~~c__ft7XrB4MYjK8ZSn9hrzapZ","b":"B~~1","val":3},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:36.215Z|1565794296167_dcpihTbfaTyzNzy8Swexqe||1|preComputeFormula|A~~c__ft7XrB4MYjK8ZSn9hrzapZ --> B~~1[sum__] = 8 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":8}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:36.217Z|1565794296167_dcpihTbfaTyzNzy8Swexqe||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 92
2019-08-14T14:51:36.219Z|1565794296167_dcpihTbfaTyzNzy8Swexqe||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":8,"x__":92},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~c__ft7XrB4MYjK8ZSn9hrzapZ"],"value":3}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":8}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:36.222Z|1565794296167_dcpihTbfaTyzNzy8Swexqe|0|objIds: ["A~~c__ft7XrB4MYjK8ZSn9hrzapZ","B~~1","MAP:B~~1\u0001A~~c__ft7XrB4MYjK8ZSn9hrzapZ","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:36.224Z|1565794296167_dcpihTbfaTyzNzy8Swexqe|0|executing transaction
2019-08-14T14:51:36.228Z|1565794296167_dcpihTbfaTyzNzy8Swexqe||1|addObj|0ms; level=0|A~~c__ft7XrB4MYjK8ZSn9hrzapZ/{"newObj":{"_id":"A~~c__ft7XrB4MYjK8ZSn9hrzapZ","b":"B~~1","val":3},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:36.263Z|1565794296167_dcpihTbfaTyzNzy8Swexqe||1|preComputeFormula|A~~c__ft7XrB4MYjK8ZSn9hrzapZ --> B~~1[sum__] = 8 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":8}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:36.265Z|1565794296167_dcpihTbfaTyzNzy8Swexqe||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 92
2019-08-14T14:51:36.266Z|1565794296167_dcpihTbfaTyzNzy8Swexqe||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":8,"x__":92},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~c__ft7XrB4MYjK8ZSn9hrzapZ"],"value":3}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":8}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:36.268Z|1565794296167_dcpihTbfaTyzNzy8Swexqe||1|computeFormulasAndSave|saveObjects: {"_id":"A~~c__ft7XrB4MYjK8ZSn9hrzapZ","b":"B~~1","val":3}, {"_id":"B~~1","sum__":8,"x__":92}
2019-08-14T14:51:36.299Z|1565794296167_dcpihTbfaTyzNzy8Swexqe||1|FINISH|{"clientId_":"pQHU6XqM65gaWWTrokiYSx","state_":"BEGIN","obj":{"_id":"A~~c__ft7XrB4MYjK8ZSn9hrzapZ","b":"B~~1","val":3},"type_":"[form] ServerEventModifiedFormData","_id":"1565794296167_dcpihTbfaTyzNzy8Swexqe"}
2019-08-14T14:51:36.305Z|1565794296305_Tz9QouZZyGfRwkrm7hzT3|BEGIN|{"clientId_":"dhYzDNxQoGw2dysqKMmruh","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":4},"type_":"[form] ServerEventModifiedFormData","_id":"1565794296305_Tz9QouZZyGfRwkrm7hzT3"}
2019-08-14T14:51:36.318Z|1565794296305_Tz9QouZZyGfRwkrm7hzT3||1|addObj|0ms; level=0|A~~2/{"newObj":{"_id":"A~~2","b":"B~~1","val":4},"oldObj":{"_id":"A~~2","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:36.390Z|1565794296305_Tz9QouZZyGfRwkrm7hzT3||1|preComputeFormula|A~~2 --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:36.392Z|1565794296305_Tz9QouZZyGfRwkrm7hzT3||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-14T14:51:36.394Z|1565794296305_Tz9QouZZyGfRwkrm7hzT3||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":8,"x__":92},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":4}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:36.396Z|1565794296305_Tz9QouZZyGfRwkrm7hzT3|0|objIds: ["A~~2","B~~1","MAP:B~~1\u0001A~~2","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:36.400Z|1565794296305_Tz9QouZZyGfRwkrm7hzT3|0|executing transaction
2019-08-14T14:51:36.411Z|1565794296305_Tz9QouZZyGfRwkrm7hzT3||1|addObj|0ms; level=0|A~~2/{"newObj":{"_id":"A~~2","b":"B~~1","val":4},"oldObj":{"_id":"A~~2","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:36.486Z|1565794296305_Tz9QouZZyGfRwkrm7hzT3||1|preComputeFormula|A~~2 --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:36.489Z|1565794296305_Tz9QouZZyGfRwkrm7hzT3||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-14T14:51:36.492Z|1565794296305_Tz9QouZZyGfRwkrm7hzT3||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":8,"x__":92},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":4}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:36.495Z|1565794296305_Tz9QouZZyGfRwkrm7hzT3||1|computeFormulasAndSave|saveObjects: {"_id":"A~~2","b":"B~~1","val":4}, {"_id":"B~~1","sum__":10,"x__":90}
2019-08-14T14:51:36.523Z|1565794296305_Tz9QouZZyGfRwkrm7hzT3||1|FINISH|{"clientId_":"dhYzDNxQoGw2dysqKMmruh","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":4},"type_":"[form] ServerEventModifiedFormData","_id":"1565794296305_Tz9QouZZyGfRwkrm7hzT3"}
2019-08-14T14:51:36.533Z|1565794296533_xdTndmSAUJheQwPxscPL8g|BEGIN|{"clientId_":"4rxG1B62uT37PdZ32JkBHM","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":95},"type_":"[form] ServerEventModifiedFormData","_id":"1565794296533_xdTndmSAUJheQwPxscPL8g"}
2019-08-14T14:51:36.537Z|1565794296533_xdTndmSAUJheQwPxscPL8g||1|addObj|0ms; level=0|A~~sKkGDVDxNg8Y9eV3boypTq/{"newObj":{"_id":"A~~sKkGDVDxNg8Y9eV3boypTq","b":"B~~1","val":95},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:36.573Z|1565794296533_xdTndmSAUJheQwPxscPL8g||1|computeAutoCorrections: A~~sKkGDVDxNg8Y9eV3boypTq[val] = [MAX(0, val + $ROW$.x__)] = 90
2019-08-14T14:51:36.575Z|1565794296533_xdTndmSAUJheQwPxscPL8g||1|computeAutoCorrections: A~~sKkGDVDxNg8Y9eV3boypTq[err] = [ABS($OLD$.val - val)] = 5
2019-08-14T14:51:36.577Z|1565794296533_xdTndmSAUJheQwPxscPL8g||2|addObj|0ms; level=0|A~~sKkGDVDxNg8Y9eV3boypTq/{"newObj":{"_id":"A~~sKkGDVDxNg8Y9eV3boypTq","b":"B~~1","val":90,"err":5},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:36.604Z|1565794296533_xdTndmSAUJheQwPxscPL8g||2|preComputeFormula|A~~sKkGDVDxNg8Y9eV3boypTq --> B~~1[sum__] = 100 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":100}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:36.606Z|1565794296533_xdTndmSAUJheQwPxscPL8g||2|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 0
2019-08-14T14:51:36.607Z|1565794296533_xdTndmSAUJheQwPxscPL8g||2|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":100,"x__":0},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~sKkGDVDxNg8Y9eV3boypTq"],"value":90}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":100}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:36.610Z|1565794296533_xdTndmSAUJheQwPxscPL8g|0|objIds: ["A~~sKkGDVDxNg8Y9eV3boypTq","B~~1","MAP:B~~1\u0001A~~sKkGDVDxNg8Y9eV3boypTq","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:36.613Z|1565794296533_xdTndmSAUJheQwPxscPL8g|0|executing transaction
2019-08-14T14:51:36.616Z|1565794296533_xdTndmSAUJheQwPxscPL8g||1|addObj|0ms; level=0|A~~sKkGDVDxNg8Y9eV3boypTq/{"newObj":{"_id":"A~~sKkGDVDxNg8Y9eV3boypTq","b":"B~~1","val":95,"err":5},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:36.646Z|1565794296533_xdTndmSAUJheQwPxscPL8g||1|computeAutoCorrections: A~~sKkGDVDxNg8Y9eV3boypTq[val] = [MAX(0, val + $ROW$.x__)] = 90
2019-08-14T14:51:36.649Z|1565794296533_xdTndmSAUJheQwPxscPL8g||1|computeAutoCorrections: A~~sKkGDVDxNg8Y9eV3boypTq[err] = [ABS($OLD$.val - val)] = 5
2019-08-14T14:51:36.651Z|1565794296533_xdTndmSAUJheQwPxscPL8g||2|addObj|0ms; level=0|A~~sKkGDVDxNg8Y9eV3boypTq/{"newObj":{"_id":"A~~sKkGDVDxNg8Y9eV3boypTq","b":"B~~1","val":90,"err":5},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:36.681Z|1565794296533_xdTndmSAUJheQwPxscPL8g||2|preComputeFormula|A~~sKkGDVDxNg8Y9eV3boypTq --> B~~1[sum__] = 100 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":100}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:36.683Z|1565794296533_xdTndmSAUJheQwPxscPL8g||2|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 0
2019-08-14T14:51:36.684Z|1565794296533_xdTndmSAUJheQwPxscPL8g||2|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":100,"x__":0},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~sKkGDVDxNg8Y9eV3boypTq"],"value":90}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":100}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:36.687Z|1565794296533_xdTndmSAUJheQwPxscPL8g||2|computeFormulasAndSave|saveObjects: {"_id":"A~~sKkGDVDxNg8Y9eV3boypTq","b":"B~~1","val":90,"err":5}, {"_id":"B~~1","sum__":100,"x__":0}
2019-08-14T14:51:36.713Z|1565794296533_xdTndmSAUJheQwPxscPL8g||2|FINISH|{"clientId_":"4rxG1B62uT37PdZ32JkBHM","state_":"BEGIN","obj":{"_id":"A~~sKkGDVDxNg8Y9eV3boypTq","b":"B~~1","val":90,"err":5},"type_":"[form] ServerEventModifiedFormData","_id":"1565794296533_xdTndmSAUJheQwPxscPL8g"}
2019-08-14T14:51:36.722Z|1565794296722_eoNDCfwC7H9fhak6ar3BsZ|BEGIN|{"clientId_":"wp6BENUDvKFm97ewWpJm46","state_":"BEGIN","obj":{"_id":"A~~sKkGDVDxNg8Y9eV3boypTq","b":"B~~1","val":90,"err":5},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565794296722_eoNDCfwC7H9fhak6ar3BsZ"}
2019-08-14T14:51:36.734Z|1565794296722_eoNDCfwC7H9fhak6ar3BsZ||1|addObj|1ms; level=0|A~~sKkGDVDxNg8Y9eV3boypTq/{"newObj":null,"oldObj":{"_id":"A~~sKkGDVDxNg8Y9eV3boypTq","b":"B~~1","val":90,"err":5},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:36.779Z|1565794296722_eoNDCfwC7H9fhak6ar3BsZ||1|preComputeFormula|A~~sKkGDVDxNg8Y9eV3boypTq --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:36.781Z|1565794296722_eoNDCfwC7H9fhak6ar3BsZ||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-14T14:51:36.783Z|1565794296722_eoNDCfwC7H9fhak6ar3BsZ||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":100,"x__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~sKkGDVDxNg8Y9eV3boypTq"]],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:36.786Z|1565794296722_eoNDCfwC7H9fhak6ar3BsZ|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~sKkGDVDxNg8Y9eV3boypTq","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:36.789Z|1565794296722_eoNDCfwC7H9fhak6ar3BsZ|0|executing transaction
2019-08-14T14:51:36.802Z|1565794296722_eoNDCfwC7H9fhak6ar3BsZ||1|addObj|0ms; level=0|A~~sKkGDVDxNg8Y9eV3boypTq/{"newObj":null,"oldObj":{"_id":"A~~sKkGDVDxNg8Y9eV3boypTq","b":"B~~1","val":90,"err":5},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:36.851Z|1565794296722_eoNDCfwC7H9fhak6ar3BsZ||1|preComputeFormula|A~~sKkGDVDxNg8Y9eV3boypTq --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:36.852Z|1565794296722_eoNDCfwC7H9fhak6ar3BsZ||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-14T14:51:36.853Z|1565794296722_eoNDCfwC7H9fhak6ar3BsZ||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":100,"x__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~sKkGDVDxNg8Y9eV3boypTq"]],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:36.856Z|1565794296722_eoNDCfwC7H9fhak6ar3BsZ||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":10,"x__":90}
2019-08-14T14:51:36.915Z|1565794296722_eoNDCfwC7H9fhak6ar3BsZ||1|FINISH|{"clientId_":"wp6BENUDvKFm97ewWpJm46","state_":"BEGIN","obj":{"_id":"A~~sKkGDVDxNg8Y9eV3boypTq","b":"B~~1","val":90,"err":5},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565794296722_eoNDCfwC7H9fhak6ar3BsZ"}
2019-08-14T14:51:36.929Z|1565794296929_t8eNNrtuzmyWsd1k2yferq|BEGIN|{"clientId_":"jxKH1Ywts6oAZvQYARaKG6","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":295},"type_":"[form] ServerEventModifiedFormData","_id":"1565794296929_t8eNNrtuzmyWsd1k2yferq"}
2019-08-14T14:51:36.932Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||1|addObj|0ms; level=0|A~~oAHt1XiFQm2XRaXoTa2LVx/{"newObj":{"_id":"A~~oAHt1XiFQm2XRaXoTa2LVx","b":"B~~1","val":295},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:36.972Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||1|computeAutoCorrections: A~~oAHt1XiFQm2XRaXoTa2LVx[val] = [MAX(0, val + $ROW$.x__)] = 90
2019-08-14T14:51:36.974Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||1|computeAutoCorrections: A~~oAHt1XiFQm2XRaXoTa2LVx[err] = [ABS($OLD$.val - val)] = 205
2019-08-14T14:51:36.977Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||2|addObj|0ms; level=0|A~~oAHt1XiFQm2XRaXoTa2LVx/{"newObj":{"_id":"A~~oAHt1XiFQm2XRaXoTa2LVx","b":"B~~1","val":90,"err":205},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:37.023Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||2|preComputeFormula|A~~oAHt1XiFQm2XRaXoTa2LVx --> B~~1[sum__] = 100 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":100}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:37.024Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||2|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 0
2019-08-14T14:51:37.026Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||2|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":100,"x__":0},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~oAHt1XiFQm2XRaXoTa2LVx"],"value":90}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":100}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:37.029Z|1565794296929_t8eNNrtuzmyWsd1k2yferq|0|objIds: ["A~~oAHt1XiFQm2XRaXoTa2LVx","B~~1","MAP:B~~1\u0001A~~oAHt1XiFQm2XRaXoTa2LVx","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:37.033Z|1565794296929_t8eNNrtuzmyWsd1k2yferq|0|executing transaction
2019-08-14T14:51:37.036Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||1|addObj|0ms; level=0|A~~oAHt1XiFQm2XRaXoTa2LVx/{"newObj":{"_id":"A~~oAHt1XiFQm2XRaXoTa2LVx","b":"B~~1","val":295,"err":205},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:37.061Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||1|computeAutoCorrections: A~~oAHt1XiFQm2XRaXoTa2LVx[val] = [MAX(0, val + $ROW$.x__)] = 90
2019-08-14T14:51:37.064Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||1|computeAutoCorrections: A~~oAHt1XiFQm2XRaXoTa2LVx[err] = [ABS($OLD$.val - val)] = 205
2019-08-14T14:51:37.066Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||2|addObj|0ms; level=0|A~~oAHt1XiFQm2XRaXoTa2LVx/{"newObj":{"_id":"A~~oAHt1XiFQm2XRaXoTa2LVx","b":"B~~1","val":90,"err":205},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:37.102Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||2|preComputeFormula|A~~oAHt1XiFQm2XRaXoTa2LVx --> B~~1[sum__] = 100 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":100}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:37.103Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||2|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 0
2019-08-14T14:51:37.104Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||2|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":100,"x__":0},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~oAHt1XiFQm2XRaXoTa2LVx"],"value":90}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":100}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:37.107Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||2|computeFormulasAndSave|saveObjects: {"_id":"A~~oAHt1XiFQm2XRaXoTa2LVx","b":"B~~1","val":90,"err":205}, {"_id":"B~~1","sum__":100,"x__":0}
2019-08-14T14:51:37.164Z|1565794296929_t8eNNrtuzmyWsd1k2yferq||2|FINISH|{"clientId_":"jxKH1Ywts6oAZvQYARaKG6","state_":"BEGIN","obj":{"_id":"A~~oAHt1XiFQm2XRaXoTa2LVx","b":"B~~1","val":90,"err":205},"type_":"[form] ServerEventModifiedFormData","_id":"1565794296929_t8eNNrtuzmyWsd1k2yferq"}
2019-08-14T14:51:37.173Z|1565794297173_94fAY9Q6oPLqVNr29Yjeku|BEGIN|{"clientId_":"xbVfUyaSkLK2EWbyEK7ggt","state_":"BEGIN","obj":{"_id":"A~~oAHt1XiFQm2XRaXoTa2LVx","b":"B~~1","val":90,"err":205},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565794297173_94fAY9Q6oPLqVNr29Yjeku"}
2019-08-14T14:51:37.188Z|1565794297173_94fAY9Q6oPLqVNr29Yjeku||1|addObj|0ms; level=0|A~~oAHt1XiFQm2XRaXoTa2LVx/{"newObj":null,"oldObj":{"_id":"A~~oAHt1XiFQm2XRaXoTa2LVx","b":"B~~1","val":90,"err":205},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:37.228Z|1565794297173_94fAY9Q6oPLqVNr29Yjeku||1|preComputeFormula|A~~oAHt1XiFQm2XRaXoTa2LVx --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:37.231Z|1565794297173_94fAY9Q6oPLqVNr29Yjeku||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-14T14:51:37.234Z|1565794297173_94fAY9Q6oPLqVNr29Yjeku||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":100,"x__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~oAHt1XiFQm2XRaXoTa2LVx"]],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:37.238Z|1565794297173_94fAY9Q6oPLqVNr29Yjeku|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~oAHt1XiFQm2XRaXoTa2LVx","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:37.243Z|1565794297173_94fAY9Q6oPLqVNr29Yjeku|0|executing transaction
2019-08-14T14:51:37.259Z|1565794297173_94fAY9Q6oPLqVNr29Yjeku||1|addObj|0ms; level=0|A~~oAHt1XiFQm2XRaXoTa2LVx/{"newObj":null,"oldObj":{"_id":"A~~oAHt1XiFQm2XRaXoTa2LVx","b":"B~~1","val":90,"err":205},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:37.314Z|1565794297173_94fAY9Q6oPLqVNr29Yjeku||1|preComputeFormula|A~~oAHt1XiFQm2XRaXoTa2LVx --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:37.315Z|1565794297173_94fAY9Q6oPLqVNr29Yjeku||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-14T14:51:37.317Z|1565794297173_94fAY9Q6oPLqVNr29Yjeku||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":100,"x__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~oAHt1XiFQm2XRaXoTa2LVx"]],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:37.319Z|1565794297173_94fAY9Q6oPLqVNr29Yjeku||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":10,"x__":90}
2019-08-14T14:51:37.380Z|1565794297173_94fAY9Q6oPLqVNr29Yjeku||1|FINISH|{"clientId_":"xbVfUyaSkLK2EWbyEK7ggt","state_":"BEGIN","obj":{"_id":"A~~oAHt1XiFQm2XRaXoTa2LVx","b":"B~~1","val":90,"err":205},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565794297173_94fAY9Q6oPLqVNr29Yjeku"}
2019-08-14T14:51:37.384Z|1565794297384_fBmtkLHfRDMG9ygRzTtCLs|BEGIN|{"clientId_":"eKg3cGrXGU5cuDPek7oLpD","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":4},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565794297384_fBmtkLHfRDMG9ygRzTtCLs"}
2019-08-14T14:51:37.402Z|1565794297384_fBmtkLHfRDMG9ygRzTtCLs||1|addObj|0ms; level=0|A~~2/{"newObj":null,"oldObj":{"_id":"A~~2","b":"B~~1","val":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:37.434Z|1565794297384_fBmtkLHfRDMG9ygRzTtCLs||1|preComputeFormula|A~~2 --> B~~1[sum__] = 6 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":6}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:37.435Z|1565794297384_fBmtkLHfRDMG9ygRzTtCLs||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 94
2019-08-14T14:51:37.436Z|1565794297384_fBmtkLHfRDMG9ygRzTtCLs||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":6,"x__":94},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~2"]],"reduce":[{"key":["B~~1"],"value":6}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:37.439Z|1565794297384_fBmtkLHfRDMG9ygRzTtCLs|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~2","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:37.442Z|1565794297384_fBmtkLHfRDMG9ygRzTtCLs|0|executing transaction
2019-08-14T14:51:37.455Z|1565794297384_fBmtkLHfRDMG9ygRzTtCLs||1|addObj|0ms; level=0|A~~2/{"newObj":null,"oldObj":{"_id":"A~~2","b":"B~~1","val":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:37.497Z|1565794297384_fBmtkLHfRDMG9ygRzTtCLs||1|preComputeFormula|A~~2 --> B~~1[sum__] = 6 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":6}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:37.499Z|1565794297384_fBmtkLHfRDMG9ygRzTtCLs||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 94
2019-08-14T14:51:37.500Z|1565794297384_fBmtkLHfRDMG9ygRzTtCLs||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":6,"x__":94},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~2"]],"reduce":[{"key":["B~~1"],"value":6}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:37.503Z|1565794297384_fBmtkLHfRDMG9ygRzTtCLs||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":6,"x__":94}
2019-08-14T14:51:37.552Z|1565794297384_fBmtkLHfRDMG9ygRzTtCLs||1|FINISH|{"clientId_":"eKg3cGrXGU5cuDPek7oLpD","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":4},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565794297384_fBmtkLHfRDMG9ygRzTtCLs"}
2019-08-14T14:51:37.558Z|1565794297558_gxg36PGpeDGkjARafU4Yov|BEGIN|{"clientId_":"vT2ZB1EdwnWNJmqHUQ2R6t","state_":"BEGIN","obj":{"_id":"A~~1","b":"B~~1","val":1},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565794297558_gxg36PGpeDGkjARafU4Yov"}
2019-08-14T14:51:37.570Z|1565794297558_gxg36PGpeDGkjARafU4Yov||1|addObj|0ms; level=0|A~~1/{"newObj":null,"oldObj":{"_id":"A~~1","b":"B~~1","val":1},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:37.607Z|1565794297558_gxg36PGpeDGkjARafU4Yov||1|preComputeFormula|A~~1 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:37.608Z|1565794297558_gxg36PGpeDGkjARafU4Yov||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T14:51:37.610Z|1565794297558_gxg36PGpeDGkjARafU4Yov||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":6,"x__":94},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~1"]],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:37.614Z|1565794297558_gxg36PGpeDGkjARafU4Yov|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~1","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:37.619Z|1565794297558_gxg36PGpeDGkjARafU4Yov|0|executing transaction
2019-08-14T14:51:37.637Z|1565794297558_gxg36PGpeDGkjARafU4Yov||1|addObj|0ms; level=0|A~~1/{"newObj":null,"oldObj":{"_id":"A~~1","b":"B~~1","val":1},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:37.674Z|1565794297558_gxg36PGpeDGkjARafU4Yov||1|preComputeFormula|A~~1 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:37.675Z|1565794297558_gxg36PGpeDGkjARafU4Yov||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T14:51:37.676Z|1565794297558_gxg36PGpeDGkjARafU4Yov||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":6,"x__":94},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~1"]],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:37.678Z|1565794297558_gxg36PGpeDGkjARafU4Yov||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":5,"x__":95}
2019-08-14T14:51:37.719Z|1565794297558_gxg36PGpeDGkjARafU4Yov||1|FINISH|{"clientId_":"vT2ZB1EdwnWNJmqHUQ2R6t","state_":"BEGIN","obj":{"_id":"A~~1","b":"B~~1","val":1},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565794297558_gxg36PGpeDGkjARafU4Yov"}
2019-08-14T14:51:37.726Z|1565794297726_7RR3YgbbcF614oUqJhSu1m|BEGIN|{"clientId_":"bWN24hFUb2YiJkWvi88TAJ","state_":"BEGIN","obj":{"_id":"C~~c"},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565794297726_7RR3YgbbcF614oUqJhSu1m"}
2019-08-14T14:51:37.762Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|addObj|0ms; level=0|A~~c__ft7XrB4MYjK8ZSn9hrzapZ/{"newObj":null,"oldObj":{"_id":"A~~c__ft7XrB4MYjK8ZSn9hrzapZ","b":"B~~1","val":3},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:37.799Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|preComputeFormula|A~~c__ft7XrB4MYjK8ZSn9hrzapZ --> B~~1[sum__] = 2 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":2}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:37.800Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 98
2019-08-14T14:51:37.802Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":2,"x__":98},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~c__ft7XrB4MYjK8ZSn9hrzapZ"]],"reduce":[{"key":["B~~1"],"value":2}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:37.805Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~c__ft7XrB4MYjK8ZSn9hrzapZ","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:37.807Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__|0|executing transaction
2019-08-14T14:51:37.821Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|addObj|0ms; level=0|A~~c__ft7XrB4MYjK8ZSn9hrzapZ/{"newObj":null,"oldObj":{"_id":"A~~c__ft7XrB4MYjK8ZSn9hrzapZ","b":"B~~1","val":3},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:37.859Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|preComputeFormula|A~~c__ft7XrB4MYjK8ZSn9hrzapZ --> B~~1[sum__] = 2 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":2}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:37.861Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 98
2019-08-14T14:51:37.862Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":2,"x__":98},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~c__ft7XrB4MYjK8ZSn9hrzapZ"]],"reduce":[{"key":["B~~1"],"value":2}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:37.865Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":2,"x__":98}
2019-08-14T14:51:37.898Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|FINISH|{"clientId_":"p4h9CGJc2d5VjMCNHsB1qy","state_":"BEGIN","obj":{"_id":"A~~c__ft7XrB4MYjK8ZSn9hrzapZ","b":"B~~1","val":3},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565794297726_7RR3YgbbcF614oUqJhSu1m__"}
2019-08-14T14:51:37.910Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|addObj|0ms; level=0|A~~c__t3dg9cwkL5TFgNpNszDGHw/{"newObj":null,"oldObj":{"_id":"A~~c__t3dg9cwkL5TFgNpNszDGHw","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:37.947Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|preComputeFormula|A~~c__t3dg9cwkL5TFgNpNszDGHw --> B~~1[sum__] = 0 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":0}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:37.948Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 100
2019-08-14T14:51:37.949Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|addObj|1ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":0,"x__":100},"oldObj":{"_id":"B~~1","sum__":2,"x__":98},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~c__t3dg9cwkL5TFgNpNszDGHw"]],"reduce":[],"reduceDelete":[["B~~1"]]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:37.951Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~c__t3dg9cwkL5TFgNpNszDGHw","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:37.953Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__|0|executing transaction
2019-08-14T14:51:37.963Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|addObj|0ms; level=0|A~~c__t3dg9cwkL5TFgNpNszDGHw/{"newObj":null,"oldObj":{"_id":"A~~c__t3dg9cwkL5TFgNpNszDGHw","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:38.012Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|preComputeFormula|A~~c__t3dg9cwkL5TFgNpNszDGHw --> B~~1[sum__] = 0 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":0}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:38.014Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 100
2019-08-14T14:51:38.015Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":0,"x__":100},"oldObj":{"_id":"B~~1","sum__":2,"x__":98},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~c__t3dg9cwkL5TFgNpNszDGHw"]],"reduce":[],"reduceDelete":[["B~~1"]]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:38.017Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":0,"x__":100}
2019-08-14T14:51:38.080Z|1565794297726_7RR3YgbbcF614oUqJhSu1m__||1|FINISH|{"clientId_":"eK71ad1Xit4vEBaVTgBPri","state_":"BEGIN","obj":{"_id":"A~~c__t3dg9cwkL5TFgNpNszDGHw","b":"B~~1","val":2},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565794297726_7RR3YgbbcF614oUqJhSu1m__"}
2019-08-14T14:51:38.081Z|1565794297726_7RR3YgbbcF614oUqJhSu1m||1|addObj|0ms; level=0|C~~c/{"newObj":null,"oldObj":{"_id":"C~~c"},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:38.084Z|1565794297726_7RR3YgbbcF614oUqJhSu1m|0|objIds: []|conflicts: []
2019-08-14T14:51:38.086Z|1565794297726_7RR3YgbbcF614oUqJhSu1m|0|executing transaction
2019-08-14T14:51:38.107Z|1565794297726_7RR3YgbbcF614oUqJhSu1m||1|addObj|0ms; level=0|C~~c/{"newObj":null,"oldObj":{"_id":"C~~c"},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:38.109Z|1565794297726_7RR3YgbbcF614oUqJhSu1m||1|computeFormulasAndSave|saveObjects:
2019-08-14T14:51:38.128Z|1565794297726_7RR3YgbbcF614oUqJhSu1m||1|FINISH|{"clientId_":"bWN24hFUb2YiJkWvi88TAJ","state_":"BEGIN","obj":{"_id":"C~~c"},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565794297726_7RR3YgbbcF614oUqJhSu1m"}
  FrmdbEngine
    ✓ Should allow basic formulas computation when saving an object with auto-correct (2 secs)
frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id])
stockReservationSchema.entities.B.props.sum__.compiledFormula_= undefined
stockReservationSchema.entities.B.props.x__.formula= 100 - sum__
Starting FormulaDBEngine...
2019-08-14T14:51:38.233Z|1565794298233_7By3TZtqs6vyeageVkcpoS|BEGIN|{"clientId_":"3E6KLPibpkbCz6PwtpKesp","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565794298233_7By3TZtqs6vyeageVkcpoS"}
2019-08-14T14:51:38.240Z|1565794298233_7By3TZtqs6vyeageVkcpoS||1|addObj|0ms; level=0|A~~2pggs8d4fqTxwLsdAZUALV/{"newObj":{"_id":"A~~2pggs8d4fqTxwLsdAZUALV","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:38.276Z|1565794298233_7By3TZtqs6vyeageVkcpoS||1|preComputeFormula|A~~2pggs8d4fqTxwLsdAZUALV --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:38.277Z|1565794298233_7By3TZtqs6vyeageVkcpoS||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T14:51:38.280Z|1565794298233_7By3TZtqs6vyeageVkcpoS||1|addObj|1ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2pggs8d4fqTxwLsdAZUALV"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:38.282Z|1565794298233_7By3TZtqs6vyeageVkcpoS|0|objIds: ["A~~2pggs8d4fqTxwLsdAZUALV","B~~1","MAP:B~~1\u0001A~~2pggs8d4fqTxwLsdAZUALV","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:38.286Z|1565794298233_7By3TZtqs6vyeageVkcpoS|0|executing transaction
2019-08-14T14:51:38.288Z|1565794298233_7By3TZtqs6vyeageVkcpoS||1|addObj|0ms; level=0|A~~2pggs8d4fqTxwLsdAZUALV/{"newObj":{"_id":"A~~2pggs8d4fqTxwLsdAZUALV","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:38.327Z|1565794298233_7By3TZtqs6vyeageVkcpoS||1|preComputeFormula|A~~2pggs8d4fqTxwLsdAZUALV --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:38.328Z|1565794298233_7By3TZtqs6vyeageVkcpoS||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T14:51:38.329Z|1565794298233_7By3TZtqs6vyeageVkcpoS||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2pggs8d4fqTxwLsdAZUALV"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:38.331Z|1565794298233_7By3TZtqs6vyeageVkcpoS||1|computeFormulasAndSave|saveObjects: {"_id":"A~~2pggs8d4fqTxwLsdAZUALV","b":"B~~1","val":2}, {"_id":"B~~1","sum__":5,"x__":95}
2019-08-14T14:51:38.365Z|1565794298233_7By3TZtqs6vyeageVkcpoS||1|FINISH|{"clientId_":"3E6KLPibpkbCz6PwtpKesp","state_":"BEGIN","obj":{"_id":"A~~2pggs8d4fqTxwLsdAZUALV","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565794298233_7By3TZtqs6vyeageVkcpoS"}
2019-08-14T14:51:38.373Z|1565794298373_urRx6GwDkJaZaGMnRpaX25|BEGIN|{"_id":"1565794298373_urRx6GwDkJaZaGMnRpaX25","type_":"[entity] ServerEventPreviewFormula","targetEntity":{"_id":"B","props":{"_id":{"name":"_id","propType_":"STRING"},"sum__":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id])"},"x__":{"name":"x__","propType_":"FORMULA","formula":"100 - sum__"}},"validations":{"positiveX":{"conditionExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":8,"origExpr":"x__ >= 0","operator":">=","left":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"x__","name":"x__"},"right":{"type":"NumberLiteral","startIndex":7,"endIndex":8,"origExpr":"0","value":0,"raw":"0"}}}}},"targetPropertyName":"x__","formula":"200 - sum__","currentDataObj":{"_id":"B~~1","sum__":5,"x__":95},"state_":"BEGIN","clientId_":"ABC"}
2019-08-14T14:51:38.381Z|1565794298380_jyohwrUj37mSpcmCJ7P5EP|BEGIN|{"_id":"1565794298380_jyohwrUj37mSpcmCJ7P5EP","type_":"[entity] ServerEventPreviewFormula","targetEntity":{"_id":"B","props":{"_id":{"name":"_id","propType_":"STRING"},"sum__":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id])"},"x__":{"name":"x__","propType_":"FORMULA","formula":"100 - sum__"}},"validations":{"positiveX":{"conditionExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":8,"origExpr":"x__ >= 0","operator":">=","left":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"x__","name":"x__"},"right":{"type":"NumberLiteral","startIndex":7,"endIndex":8,"origExpr":"0","value":0,"raw":"0"}}}}},"targetPropertyName":"sum__","formula":"SUMIF(A.val, b == @[_id]) + COUNTIF(A.val, b == @[_id])","currentDataObj":{"_id":"B~~1","sum__":5,"x__":95},"state_":"BEGIN","clientId_":"ABC"}
    ✓ Should allow preview formulas (0.239 sec)
frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id])
stockReservationSchema.entities.B.props.sum__.compiledFormula_= undefined
stockReservationSchema.entities.B.props.x__.formula= 100 - sum__
Starting FormulaDBEngine...
2019-08-14T14:51:38.496Z|1565794298496_32UnkraaG7ReNTE7wRLtDd|BEGIN|{"clientId_":"4tkmngXHWvWcewKtSCjV4p","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565794298496_32UnkraaG7ReNTE7wRLtDd"}
2019-08-14T14:51:38.501Z|1565794298496_32UnkraaG7ReNTE7wRLtDd||1|addObj|0ms; level=0|A~~oUVGvE7ECQ8BbyV9Uqn9rx/{"newObj":{"_id":"A~~oUVGvE7ECQ8BbyV9Uqn9rx","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:38.527Z|1565794298496_32UnkraaG7ReNTE7wRLtDd||1|preComputeFormula|A~~oUVGvE7ECQ8BbyV9Uqn9rx --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:38.530Z|1565794298496_32UnkraaG7ReNTE7wRLtDd||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T14:51:38.532Z|1565794298496_32UnkraaG7ReNTE7wRLtDd||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~oUVGvE7ECQ8BbyV9Uqn9rx"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:38.535Z|1565794298496_32UnkraaG7ReNTE7wRLtDd|0|objIds: ["A~~oUVGvE7ECQ8BbyV9Uqn9rx","B~~1","MAP:B~~1\u0001A~~oUVGvE7ECQ8BbyV9Uqn9rx","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:38.539Z|1565794298496_32UnkraaG7ReNTE7wRLtDd|0|executing transaction
2019-08-14T14:51:38.542Z|1565794298496_32UnkraaG7ReNTE7wRLtDd||1|addObj|0ms; level=0|A~~oUVGvE7ECQ8BbyV9Uqn9rx/{"newObj":{"_id":"A~~oUVGvE7ECQ8BbyV9Uqn9rx","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:38.572Z|1565794298496_32UnkraaG7ReNTE7wRLtDd||1|preComputeFormula|A~~oUVGvE7ECQ8BbyV9Uqn9rx --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T14:51:38.574Z|1565794298496_32UnkraaG7ReNTE7wRLtDd||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T14:51:38.576Z|1565794298496_32UnkraaG7ReNTE7wRLtDd||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~oUVGvE7ECQ8BbyV9Uqn9rx"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:38.579Z|1565794298496_32UnkraaG7ReNTE7wRLtDd||1|computeFormulasAndSave|saveObjects: {"_id":"A~~oUVGvE7ECQ8BbyV9Uqn9rx","b":"B~~1","val":2}, {"_id":"B~~1","sum__":5,"x__":95}
2019-08-14T14:51:38.618Z|1565794298496_32UnkraaG7ReNTE7wRLtDd||1|FINISH|{"clientId_":"4tkmngXHWvWcewKtSCjV4p","state_":"BEGIN","obj":{"_id":"A~~oUVGvE7ECQ8BbyV9Uqn9rx","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565794298496_32UnkraaG7ReNTE7wRLtDd"}
2019-08-14T14:51:38.631Z|1565794298631_uo88hFfppA6Y9yYTCkQNU9|BEGIN|{"_id":"1565794298631_uo88hFfppA6Y9yYTCkQNU9","type_":"[entity] ServerEventSetProperty","targetEntity":{"_id":"B","props":{"_id":{"name":"_id","propType_":"STRING"},"sum__":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id])","compiledFormula_":{"type_":"CompiledFormulaN","rawExpr":{"type":"CallExpression","startIndex":0,"arguments":[{"type":"MemberExpression","startIndex":6,"computed":false,"object":{"type":"Identifier","startIndex":6,"endIndex":7,"origExpr":"A","name":"A"},"property":{"type":"Identifier","startIndex":8,"endIndex":11,"origExpr":"val","name":"val","belongsTo":"A"},"endIndex":11,"origExpr":"A.val"},{"type":"BinaryExpression","startIndex":13,"endIndex":24,"origExpr":"b == @[_id]","operator":"==","left":{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"},"right":{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}}],"callee":{"type":"Identifier","startIndex":0,"endIndex":5,"origExpr":"SUMIF","name":"SUMIF"},"endIndex":25,"origExpr":"SUMIF(A.val, b == @[_id])"},"finalExpression":{"type":"MemberExpression","startIndex":0,"computed":true,"object":{"type":"Identifier","startIndex":0,"endIndex":5,"origExpr":"$TRG$","name":"$TRG$"},"property":{"type":"StringLiteral","startIndex":6,"endIndex":41,"origExpr":"'vaggs-A-SUMIF(A.val, b == @[_id])'","value":"vaggs-A-SUMIF(A.val, b == @[_id])","raw":"'vaggs-A-SUMIF(A.val, b == @[_id])'"},"endIndex":42,"origExpr":"$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']"},"targetEntityName":"B","targetPropertyName":"sum__","triggers":[{"type_":"MapReduceTriggerN","rawExpr":{"type":"CallExpression","startIndex":0,"arguments":[{"type":"MemberExpression","startIndex":6,"computed":false,"object":{"type":"Identifier","startIndex":6,"endIndex":7,"origExpr":"A","name":"A"},"property":{"type":"Identifier","startIndex":8,"endIndex":11,"origExpr":"val","name":"val","belongsTo":"A"},"endIndex":11,"origExpr":"A.val"},{"type":"BinaryExpression","startIndex":13,"endIndex":24,"origExpr":"b == @[_id]","operator":"==","left":{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"},"right":{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}}],"callee":{"type":"Identifier","startIndex":0,"endIndex":5,"origExpr":"SUMIF","name":"SUMIF"},"endIndex":25,"origExpr":"SUMIF(A.val, b == @[_id])"},"mapreduceAggsOfManyObservablesQueryableFromOneObs":{"aggsViewName":"vaggs-A-SUMIF(A.val, b == @[_id])","map":{"entityName":"A","keyExpr":[{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"}],"valueExpr":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"val","name":"val"},"query":{"startkeyExpr":[{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}],"endkeyExpr":[{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}],"inclusive_start":true,"inclusive_end":true}},"reduceFun":{"name":"SumReduceFunN"}},"mapObserversImpactedByOneObservable":{"obsViewName":"vobs-B-SUMIF(A.val, b == @[_id])","entityName":"B","keyExpr":[{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}],"query":{"startkeyExpr":[{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"}],"endkeyExpr":[{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"}],"inclusive_start":true,"inclusive_end":true},"valueExpr":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"_id","name":"_id"}}}]}},"x__":{"name":"x__","propType_":"FORMULA","formula":"100 - sum__","compiledFormula_":{"type_":"CompiledFormulaN","rawExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":11,"origExpr":"100 - sum__","operator":"-","left":{"type":"NumberLiteral","startIndex":0,"endIndex":3,"origExpr":"100","value":100,"raw":"100"},"right":{"type":"Identifier","startIndex":6,"endIndex":11,"origExpr":"sum__","name":"sum__"}},"finalExpression":{"type":"BinaryExpression","startIndex":0,"endIndex":11,"origExpr":"100 - sum__","operator":"-","left":{"type":"NumberLiteral","startIndex":0,"endIndex":3,"origExpr":"100","value":100,"raw":"100"},"right":{"type":"Identifier","startIndex":6,"endIndex":11,"origExpr":"sum__","name":"sum__"}},"targetEntityName":"B","targetPropertyName":"x__"}}},"validations":{"positiveX":{"conditionExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":8,"origExpr":"x__ >= 0","operator":">=","left":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"x__","name":"x__"},"right":{"type":"NumberLiteral","startIndex":7,"endIndex":8,"origExpr":"0","value":0,"raw":"0"}}}}},"property":{"name":"x__","propType_":"FORMULA","formula":"200 - sum__"},"state_":"BEGIN","clientId_":"ABC"}
2019-08-14T14:51:38.676Z|1565794298631_uo88hFfppA6Y9yYTCkQNU9-1||computeFormulasAndSave| - selfFormula: B~~1[x__] = [200 - sum__] = 195
2019-08-14T14:51:38.678Z|1565794298631_uo88hFfppA6Y9yYTCkQNU9-1||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":195},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:38.680Z|1565794298631_uo88hFfppA6Y9yYTCkQNU9-1|0|objIds: ["B~~1"]|conflicts: []
2019-08-14T14:51:38.681Z|1565794298631_uo88hFfppA6Y9yYTCkQNU9-1|0|executing transaction
2019-08-14T14:51:38.688Z|1565794298631_uo88hFfppA6Y9yYTCkQNU9-1||computeFormulasAndSave| - selfFormula: B~~1[x__] = [200 - sum__] = 195
2019-08-14T14:51:38.690Z|1565794298631_uo88hFfppA6Y9yYTCkQNU9-1||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":195},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:38.692Z|1565794298631_uo88hFfppA6Y9yYTCkQNU9-1||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":5,"x__":195}
2019-08-14T14:51:38.701Z|1565794298631_uo88hFfppA6Y9yYTCkQNU9-1||1|FINISH|{"_id":"1565794298631_uo88hFfppA6Y9yYTCkQNU9-1","type_":"[form] ServerEventModifiedFormData","state_":"BEGIN","clientId_":"ABC","obj":{"_id":"B~~1","sum__":5,"x__":195}}
2019-08-14T14:51:38.712Z|1565794298712_styBkoS9vnP6GnggKLygTn|BEGIN|{"_id":"1565794298712_styBkoS9vnP6GnggKLygTn","type_":"[entity] ServerEventSetProperty","targetEntity":{"_id":"B","props":{"_id":{"name":"_id","propType_":"STRING"},"sum__":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id])"},"x__":{"name":"x__","propType_":"FORMULA","formula":"200 - sum__","compiledFormula_":{"type_":"CompiledFormulaN","rawExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":11,"origExpr":"200 - sum__","operator":"-","left":{"type":"NumberLiteral","startIndex":0,"endIndex":3,"origExpr":"200","value":200,"raw":"200"},"right":{"type":"Identifier","startIndex":6,"endIndex":11,"origExpr":"sum__","name":"sum__"}},"finalExpression":{"type":"BinaryExpression","startIndex":0,"endIndex":11,"origExpr":"200 - sum__","operator":"-","left":{"type":"NumberLiteral","startIndex":0,"endIndex":3,"origExpr":"200","value":200,"raw":"200"},"right":{"type":"Identifier","startIndex":6,"endIndex":11,"origExpr":"sum__","name":"sum__"}},"targetEntityName":"B","targetPropertyName":"x__"}}},"validations":{"positiveX":{"conditionExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":8,"origExpr":"x__ >= 0","operator":">=","left":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"x__","name":"x__"},"right":{"type":"NumberLiteral","startIndex":7,"endIndex":8,"origExpr":"0","value":0,"raw":"0"}}}}},"property":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id]) + COUNTIF(A.val, b == @[_id])"},"state_":"BEGIN","clientId_":"ABC"}
2019-08-14T14:51:38.816Z|1565794298712_styBkoS9vnP6GnggKLygTn-1||computeFormulasAndSave| - selfFormula: B~~1[x__] = [200 - sum__] = 192
2019-08-14T14:51:38.818Z|1565794298712_styBkoS9vnP6GnggKLygTn-1||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":8,"x__":192},"oldObj":{"_id":"B~~1","sum__":5,"x__":195},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-14T14:51:38.820Z|1565794298712_styBkoS9vnP6GnggKLygTn-1|0|objIds: ["B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:38.821Z|1565794298712_styBkoS9vnP6GnggKLygTn-1|0|executing transaction
2019-08-14T14:51:38.857Z|1565794298712_styBkoS9vnP6GnggKLygTn-1||computeFormulasAndSave| - selfFormula: B~~1[x__] = [200 - sum__] = 192
2019-08-14T14:51:38.858Z|1565794298712_styBkoS9vnP6GnggKLygTn-1||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":8,"x__":192},"oldObj":{"_id":"B~~1","sum__":5,"x__":195},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-14T14:51:38.861Z|1565794298712_styBkoS9vnP6GnggKLygTn-1||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":8,"x__":192}
2019-08-14T14:51:38.883Z|1565794298712_styBkoS9vnP6GnggKLygTn-1||1|FINISH|{"_id":"1565794298712_styBkoS9vnP6GnggKLygTn-1","type_":"[form] ServerEventModifiedFormData","state_":"BEGIN","clientId_":"ABC","obj":{"_id":"B~~1","sum__":8,"x__":192}}
2019-08-14T14:51:38.888Z|1565794298888_uVAEdTXcbox3ZNq4SNE38j|BEGIN|{"clientId_":"9xvziCKggQQwKMSDw5awW","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565794298888_uVAEdTXcbox3ZNq4SNE38j"}
2019-08-14T14:51:38.892Z|1565794298888_uVAEdTXcbox3ZNq4SNE38j||1|addObj|0ms; level=0|A~~32nwcvY4SAgAxSrw33gN27/{"newObj":{"_id":"A~~32nwcvY4SAgAxSrw33gN27","b":"B~~1","val":10},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:38.965Z|1565794298888_uVAEdTXcbox3ZNq4SNE38j||1|preComputeFormula|A~~32nwcvY4SAgAxSrw33gN27 --> B~~1[sum__] = 19 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":15,"vaggs-A-COUNTIF(A.val, b == @[_id])":4}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-14T14:51:38.967Z|1565794298888_uVAEdTXcbox3ZNq4SNE38j||1|preComputeFormula| - selfFormula: B~~1[x__] = [200 - sum__] = 181
2019-08-14T14:51:38.968Z|1565794298888_uVAEdTXcbox3ZNq4SNE38j||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":19,"x__":181},"oldObj":{"_id":"B~~1","sum__":8,"x__":192},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~32nwcvY4SAgAxSrw33gN27"],"value":10}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":15}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~32nwcvY4SAgAxSrw33gN27"],"value":10}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":4}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:38.970Z|1565794298888_uVAEdTXcbox3ZNq4SNE38j|0|objIds: ["A~~32nwcvY4SAgAxSrw33gN27","B~~1","MAP:B~~1\u0001A~~32nwcvY4SAgAxSrw33gN27","REDUCE:B~~1","MAP:B~~1\u0001A~~32nwcvY4SAgAxSrw33gN27","REDUCE:B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:38.973Z|1565794298888_uVAEdTXcbox3ZNq4SNE38j|0|executing transaction
2019-08-14T14:51:38.975Z|1565794298888_uVAEdTXcbox3ZNq4SNE38j||1|addObj|0ms; level=0|A~~32nwcvY4SAgAxSrw33gN27/{"newObj":{"_id":"A~~32nwcvY4SAgAxSrw33gN27","b":"B~~1","val":10},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:39.048Z|1565794298888_uVAEdTXcbox3ZNq4SNE38j||1|preComputeFormula|A~~32nwcvY4SAgAxSrw33gN27 --> B~~1[sum__] = 19 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":15,"vaggs-A-COUNTIF(A.val, b == @[_id])":4}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-14T14:51:39.050Z|1565794298888_uVAEdTXcbox3ZNq4SNE38j||1|preComputeFormula| - selfFormula: B~~1[x__] = [200 - sum__] = 181
2019-08-14T14:51:39.052Z|1565794298888_uVAEdTXcbox3ZNq4SNE38j||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":19,"x__":181},"oldObj":{"_id":"B~~1","sum__":8,"x__":192},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~32nwcvY4SAgAxSrw33gN27"],"value":10}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":15}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~32nwcvY4SAgAxSrw33gN27"],"value":10}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":4}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:39.055Z|1565794298888_uVAEdTXcbox3ZNq4SNE38j||1|computeFormulasAndSave|saveObjects: {"_id":"A~~32nwcvY4SAgAxSrw33gN27","b":"B~~1","val":10}, {"_id":"B~~1","sum__":19,"x__":181}
2019-08-14T14:51:39.092Z|1565794298888_uVAEdTXcbox3ZNq4SNE38j||1|FINISH|{"clientId_":"9xvziCKggQQwKMSDw5awW","state_":"BEGIN","obj":{"_id":"A~~32nwcvY4SAgAxSrw33gN27","b":"B~~1","val":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565794298888_uVAEdTXcbox3ZNq4SNE38j"}
    ✓ Should allow adding/modifying formulas (0.69 sec)
frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id])
stockReservationSchema.entities.B.props.sum__.compiledFormula_= undefined
stockReservationSchema.entities.B.props.x__.formula= 100 - sum__
Starting FormulaDBEngine...
2019-08-14T14:51:39.154Z|1565794299154_5tcjbqgAaKhfjPyCf2webE|BEGIN|{"clientId_":"3KWaCTwRPSxYgTUJFkPXJb","state_":"BEGIN","obj":{"_id":"B~~1","sum__":1,"x__":7},"type_":"[form] ServerEventModifiedFormData","_id":"1565794299154_5tcjbqgAaKhfjPyCf2webE"}
2019-08-14T14:51:39.176Z|1565794299154_5tcjbqgAaKhfjPyCf2webE||computeFormulasAndSave| - selfFormula: B~~1[x__] = [100 - sum__] = 100
2019-08-14T14:51:39.180Z|1565794299154_5tcjbqgAaKhfjPyCf2webE||1|addObj|1ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":0,"x__":100},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-14T14:51:39.182Z|1565794299154_5tcjbqgAaKhfjPyCf2webE|0|objIds: ["B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:39.186Z|1565794299154_5tcjbqgAaKhfjPyCf2webE|0|executing transaction
2019-08-14T14:51:39.201Z|1565794299154_5tcjbqgAaKhfjPyCf2webE||computeFormulasAndSave| - selfFormula: B~~1[x__] = [100 - sum__] = 100
2019-08-14T14:51:39.203Z|1565794299154_5tcjbqgAaKhfjPyCf2webE||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":0,"x__":100},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-14T14:51:39.206Z|1565794299154_5tcjbqgAaKhfjPyCf2webE||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":0,"x__":100}
2019-08-14T14:51:39.226Z|1565794299154_5tcjbqgAaKhfjPyCf2webE||1|FINISH|{"clientId_":"3KWaCTwRPSxYgTUJFkPXJb","state_":"BEGIN","obj":{"_id":"B~~1","sum__":0,"x__":100},"type_":"[form] ServerEventModifiedFormData","_id":"1565794299154_5tcjbqgAaKhfjPyCf2webE"}
2019-08-14T14:51:39.228Z|1565794299228_6tzKGf9Jzxt9s4ng14FGem|BEGIN|{"clientId_":"8afg8ZSSJgTX9nJKSj77U2","state_":"BEGIN","obj":{"_id":"A~~1","b":"B~~1","val":1},"type_":"[form] ServerEventModifiedFormData","_id":"1565794299228_6tzKGf9Jzxt9s4ng14FGem"}
2019-08-14T14:51:39.235Z|1565794299228_6tzKGf9Jzxt9s4ng14FGem||1|addObj|0ms; level=0|A~~1/{"newObj":{"_id":"A~~1","b":"B~~1","val":1},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:39.305Z|1565794299228_6tzKGf9Jzxt9s4ng14FGem||1|preComputeFormula|A~~1 --> B~~1[sum__] = 2 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":1,"vaggs-A-COUNTIF(A.val, b == @[_id])":1}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-14T14:51:39.306Z|1565794299228_6tzKGf9Jzxt9s4ng14FGem||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 98
2019-08-14T14:51:39.307Z|1565794299228_6tzKGf9Jzxt9s4ng14FGem||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":2,"x__":98},"oldObj":{"_id":"B~~1","sum__":0,"x__":100},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~1"],"value":1}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":1}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~1"],"value":1}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":1}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:39.309Z|1565794299228_6tzKGf9Jzxt9s4ng14FGem|0|objIds: ["A~~1","B~~1","MAP:B~~1\u0001A~~1","REDUCE:B~~1","MAP:B~~1\u0001A~~1","REDUCE:B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:39.313Z|1565794299228_6tzKGf9Jzxt9s4ng14FGem|0|executing transaction
2019-08-14T14:51:39.319Z|1565794299228_6tzKGf9Jzxt9s4ng14FGem||1|addObj|0ms; level=0|A~~1/{"newObj":{"_id":"A~~1","b":"B~~1","val":1},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:39.372Z|1565794299228_6tzKGf9Jzxt9s4ng14FGem||1|preComputeFormula|A~~1 --> B~~1[sum__] = 2 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":1,"vaggs-A-COUNTIF(A.val, b == @[_id])":1}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-14T14:51:39.373Z|1565794299228_6tzKGf9Jzxt9s4ng14FGem||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 98
2019-08-14T14:51:39.375Z|1565794299228_6tzKGf9Jzxt9s4ng14FGem||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":2,"x__":98},"oldObj":{"_id":"B~~1","sum__":0,"x__":100},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~1"],"value":1}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":1}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~1"],"value":1}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":1}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:39.378Z|1565794299228_6tzKGf9Jzxt9s4ng14FGem||1|computeFormulasAndSave|saveObjects: {"_id":"A~~1","b":"B~~1","val":1}, {"_id":"B~~1","sum__":2,"x__":98}
2019-08-14T14:51:39.422Z|1565794299228_6tzKGf9Jzxt9s4ng14FGem||1|FINISH|{"clientId_":"8afg8ZSSJgTX9nJKSj77U2","state_":"BEGIN","obj":{"_id":"A~~1","b":"B~~1","val":1},"type_":"[form] ServerEventModifiedFormData","_id":"1565794299228_6tzKGf9Jzxt9s4ng14FGem"}
2019-08-14T14:51:39.425Z|1565794299425_mVuUzvbcs4ifivPku49f9N|BEGIN|{"clientId_":"eD6rTvsxAceRCfuAxbYF2z","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565794299425_mVuUzvbcs4ifivPku49f9N"}
2019-08-14T14:51:39.439Z|1565794299425_mVuUzvbcs4ifivPku49f9N||1|addObj|0ms; level=0|A~~2/{"newObj":{"_id":"A~~2","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:39.508Z|1565794299425_mVuUzvbcs4ifivPku49f9N||1|preComputeFormula|A~~2 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":3,"vaggs-A-COUNTIF(A.val, b == @[_id])":2}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-14T14:51:39.510Z|1565794299425_mVuUzvbcs4ifivPku49f9N||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T14:51:39.512Z|1565794299425_mVuUzvbcs4ifivPku49f9N||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":2,"x__":98},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":3}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":2}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:39.515Z|1565794299425_mVuUzvbcs4ifivPku49f9N|0|objIds: ["A~~2","B~~1","MAP:B~~1\u0001A~~2","REDUCE:B~~1","MAP:B~~1\u0001A~~2","REDUCE:B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T14:51:39.519Z|1565794299425_mVuUzvbcs4ifivPku49f9N|0|executing transaction
2019-08-14T14:51:39.533Z|1565794299425_mVuUzvbcs4ifivPku49f9N||1|addObj|0ms; level=0|A~~2/{"newObj":{"_id":"A~~2","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:39.588Z|1565794299425_mVuUzvbcs4ifivPku49f9N||1|preComputeFormula|A~~2 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":3,"vaggs-A-COUNTIF(A.val, b == @[_id])":2}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-14T14:51:39.589Z|1565794299425_mVuUzvbcs4ifivPku49f9N||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T14:51:39.591Z|1565794299425_mVuUzvbcs4ifivPku49f9N||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":2,"x__":98},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":3}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":2}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:39.593Z|1565794299425_mVuUzvbcs4ifivPku49f9N||1|computeFormulasAndSave|saveObjects: {"_id":"A~~2","b":"B~~1","val":2}, {"_id":"B~~1","sum__":5,"x__":95}
2019-08-14T14:51:39.638Z|1565794299425_mVuUzvbcs4ifivPku49f9N||1|FINISH|{"clientId_":"eD6rTvsxAceRCfuAxbYF2z","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565794299425_mVuUzvbcs4ifivPku49f9N"}
    ✓ Should update views and compute new values of Observer when Observer field change (0.539 sec)
frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id])
stockReservationSchema.entities.B.props.sum__.compiledFormula_= undefined
stockReservationSchema.entities.B.props.x__.formula= 100 - sum__
Starting FormulaDBEngine...
2019-08-14T14:51:39.750Z|1565794299750_7X3m4F9R91DL5CGENkHRDh|BEGIN|{"clientId_":"7EECL2P9ds4GvgLz1iwteo","state_":"BEGIN","obj":{"_id":"Tr~~","ac1":"Ac~~2","ac2":"Ac~~3","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565794299750_7X3m4F9R91DL5CGENkHRDh"}
2019-08-14T14:51:39.753Z|1565794299750_7X3m4F9R91DL5CGENkHRDh||1|addObj|0ms; level=0|Tr~~iXt3cHaQYCsrXehkNDjiDV/{"newObj":{"_id":"Tr~~iXt3cHaQYCsrXehkNDjiDV","ac1":"Ac~~2","ac2":"Ac~~3","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:39.757Z|1565794299757_s996iXnDxcd3HhFPfqk71J|BEGIN|{"clientId_":"88ABajohBBMBqwFAtpFdU8","state_":"BEGIN","obj":{"_id":"Tr~~","ac1":"Ac~~1","ac2":"Ac~~2","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565794299757_s996iXnDxcd3HhFPfqk71J"}
2019-08-14T14:51:39.760Z|1565794299757_s996iXnDxcd3HhFPfqk71J||1|addObj|0ms; level=0|Tr~~bPdNgX3zWn1U14u6vpgxe3/{"newObj":{"_id":"Tr~~bPdNgX3zWn1U14u6vpgxe3","ac1":"Ac~~1","ac2":"Ac~~2","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:39.766Z|1565794299766_9LyUivydvEyKeC3MtZazX6|BEGIN|{"clientId_":"73472S3nTSfhs7Bx3sP52","state_":"BEGIN","obj":{"_id":"Tr~~","ac1":"Ac~~3","ac2":"Ac~~4","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565794299766_9LyUivydvEyKeC3MtZazX6"}
2019-08-14T14:51:39.769Z|1565794299766_9LyUivydvEyKeC3MtZazX6||1|addObj|0ms; level=0|Tr~~bM92S8woVjqGgBt1wU58UB/{"newObj":{"_id":"Tr~~bM92S8woVjqGgBt1wU58UB","ac1":"Ac~~3","ac2":"Ac~~4","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:39.826Z|1565794299750_7X3m4F9R91DL5CGENkHRDh||1|preComputeFormula|Tr~~iXt3cHaQYCsrXehkNDjiDV --> Ac~~3[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T14:51:39.828Z|1565794299750_7X3m4F9R91DL5CGENkHRDh||1|addObj|0ms; level=1|Ac~~3/{"newObj":{"_id":"Ac~~3","balance__":75},"oldObj":{"_id":"Ac~~3","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Tr~~iXt3cHaQYCsrXehkNDjiDV"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Tr~~iXt3cHaQYCsrXehkNDjiDV"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:39.837Z|1565794299757_s996iXnDxcd3HhFPfqk71J||1|preComputeFormula|Tr~~bPdNgX3zWn1U14u6vpgxe3 --> Ac~~2[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T14:51:39.839Z|1565794299757_s996iXnDxcd3HhFPfqk71J||1|addObj|0ms; level=1|Ac~~2/{"newObj":{"_id":"Ac~~2","balance__":75},"oldObj":{"_id":"Ac~~2","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Tr~~bPdNgX3zWn1U14u6vpgxe3"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Tr~~bPdNgX3zWn1U14u6vpgxe3"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~1"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:39.845Z|1565794299766_9LyUivydvEyKeC3MtZazX6||1|preComputeFormula|Tr~~bM92S8woVjqGgBt1wU58UB --> Ac~~4[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T14:51:39.847Z|1565794299766_9LyUivydvEyKeC3MtZazX6||1|addObj|0ms; level=1|Ac~~4/{"newObj":{"_id":"Ac~~4","balance__":75},"oldObj":{"_id":"Ac~~4","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Tr~~bM92S8woVjqGgBt1wU58UB"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~4"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Tr~~bM92S8woVjqGgBt1wU58UB"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Ac~~4"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~4","Ac~~4"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:39.875Z|1565794299750_7X3m4F9R91DL5CGENkHRDh||1|preComputeFormula|Tr~~iXt3cHaQYCsrXehkNDjiDV --> Ac~~2[balance__] = 25 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":0,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T14:51:39.878Z|1565794299750_7X3m4F9R91DL5CGENkHRDh||1|addObj|0ms; level=1|Ac~~2/{"newObj":{"_id":"Ac~~2","balance__":25},"oldObj":{"_id":"Ac~~2","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Tr~~iXt3cHaQYCsrXehkNDjiDV"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Tr~~iXt3cHaQYCsrXehkNDjiDV"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:39.881Z|1565794299750_7X3m4F9R91DL5CGENkHRDh|0|objIds: ["Tr~~iXt3cHaQYCsrXehkNDjiDV","Ac~~3","MAP:Ac~~3\u0001Tr~~iXt3cHaQYCsrXehkNDjiDV","REDUCE:Ac~~3","MAP:Ac~~2\u0001Tr~~iXt3cHaQYCsrXehkNDjiDV","REDUCE:Ac~~2","MAP:Ac~~3\u0001Ac~~3","MAP:Ac~~3\u0001Ac~~3","Ac~~2","MAP:Ac~~3\u0001Tr~~iXt3cHaQYCsrXehkNDjiDV","REDUCE:Ac~~3","MAP:Ac~~2\u0001Tr~~iXt3cHaQYCsrXehkNDjiDV","REDUCE:Ac~~2","MAP:Ac~~2\u0001Ac~~2","MAP:Ac~~2\u0001Ac~~2"]|conflicts: []
2019-08-14T14:51:39.883Z|1565794299750_7X3m4F9R91DL5CGENkHRDh|0|executing transaction
2019-08-14T14:51:39.888Z|1565794299750_7X3m4F9R91DL5CGENkHRDh||1|addObj|0ms; level=0|Tr~~iXt3cHaQYCsrXehkNDjiDV/{"newObj":{"_id":"Tr~~iXt3cHaQYCsrXehkNDjiDV","ac1":"Ac~~2","ac2":"Ac~~3","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:39.894Z|1565794299766_9LyUivydvEyKeC3MtZazX6||1|preComputeFormula|Tr~~bM92S8woVjqGgBt1wU58UB --> Ac~~3[balance__] = 25 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":0,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T14:51:39.896Z|1565794299766_9LyUivydvEyKeC3MtZazX6||1|addObj|0ms; level=1|Ac~~3/{"newObj":{"_id":"Ac~~3","balance__":25},"oldObj":{"_id":"Ac~~3","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Tr~~bM92S8woVjqGgBt1wU58UB"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~4"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Tr~~bM92S8woVjqGgBt1wU58UB"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:39.900Z|1565794299766_9LyUivydvEyKeC3MtZazX6|0|objIds: ["Tr~~bM92S8woVjqGgBt1wU58UB","Ac~~4","MAP:Ac~~4\u0001Tr~~bM92S8woVjqGgBt1wU58UB","REDUCE:Ac~~4","MAP:Ac~~3\u0001Tr~~bM92S8woVjqGgBt1wU58UB","REDUCE:Ac~~3","MAP:Ac~~4\u0001Ac~~4","MAP:Ac~~4\u0001Ac~~4","Ac~~3","MAP:Ac~~4\u0001Tr~~bM92S8woVjqGgBt1wU58UB","REDUCE:Ac~~4","MAP:Ac~~3\u0001Tr~~bM92S8woVjqGgBt1wU58UB","REDUCE:Ac~~3","MAP:Ac~~3\u0001Ac~~3","MAP:Ac~~3\u0001Ac~~3"]|conflicts: ["1565794299750_7X3m4F9R91DL5CGENkHRDh"]
2019-08-14T14:51:39.914Z|1565794299757_s996iXnDxcd3HhFPfqk71J||1|preComputeFormula|Tr~~bPdNgX3zWn1U14u6vpgxe3 --> Ac~~1[balance__] = 25 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":0,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T14:51:39.916Z|1565794299757_s996iXnDxcd3HhFPfqk71J||1|addObj|0ms; level=1|Ac~~1/{"newObj":{"_id":"Ac~~1","balance__":25},"oldObj":{"_id":"Ac~~1","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Tr~~bPdNgX3zWn1U14u6vpgxe3"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Tr~~bPdNgX3zWn1U14u6vpgxe3"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~1"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~1","Ac~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Ac~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:39.919Z|1565794299757_s996iXnDxcd3HhFPfqk71J|0|objIds: ["Tr~~bPdNgX3zWn1U14u6vpgxe3","Ac~~2","MAP:Ac~~2\u0001Tr~~bPdNgX3zWn1U14u6vpgxe3","REDUCE:Ac~~2","MAP:Ac~~1\u0001Tr~~bPdNgX3zWn1U14u6vpgxe3","REDUCE:Ac~~1","MAP:Ac~~2\u0001Ac~~2","MAP:Ac~~2\u0001Ac~~2","Ac~~1","MAP:Ac~~2\u0001Tr~~bPdNgX3zWn1U14u6vpgxe3","REDUCE:Ac~~2","MAP:Ac~~1\u0001Tr~~bPdNgX3zWn1U14u6vpgxe3","REDUCE:Ac~~1","MAP:Ac~~1\u0001Ac~~1","MAP:Ac~~1\u0001Ac~~1"]|conflicts: ["1565794299750_7X3m4F9R91DL5CGENkHRDh"]
2019-08-14T14:51:39.976Z|1565794299750_7X3m4F9R91DL5CGENkHRDh||1|preComputeFormula|Tr~~iXt3cHaQYCsrXehkNDjiDV --> Ac~~3[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T14:51:39.978Z|1565794299750_7X3m4F9R91DL5CGENkHRDh||1|addObj|0ms; level=1|Ac~~3/{"newObj":{"_id":"Ac~~3","balance__":75},"oldObj":{"_id":"Ac~~3","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Tr~~iXt3cHaQYCsrXehkNDjiDV"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Tr~~iXt3cHaQYCsrXehkNDjiDV"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:40.030Z|1565794299750_7X3m4F9R91DL5CGENkHRDh||1|preComputeFormula|Tr~~iXt3cHaQYCsrXehkNDjiDV --> Ac~~2[balance__] = 25 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":0,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T14:51:40.031Z|1565794299750_7X3m4F9R91DL5CGENkHRDh||1|addObj|0ms; level=1|Ac~~2/{"newObj":{"_id":"Ac~~2","balance__":25},"oldObj":{"_id":"Ac~~2","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Tr~~iXt3cHaQYCsrXehkNDjiDV"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Tr~~iXt3cHaQYCsrXehkNDjiDV"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:40.035Z|1565794299750_7X3m4F9R91DL5CGENkHRDh||1|computeFormulasAndSave|saveObjects: {"_id":"Tr~~iXt3cHaQYCsrXehkNDjiDV","ac1":"Ac~~2","ac2":"Ac~~3","val":25}, {"_id":"Ac~~3","balance__":75}, {"_id":"Ac~~2","balance__":25}
2019-08-14T14:51:40.106Z|1565794299750_7X3m4F9R91DL5CGENkHRDh||1|FINISH|{"clientId_":"7EECL2P9ds4GvgLz1iwteo","state_":"BEGIN","obj":{"_id":"Tr~~iXt3cHaQYCsrXehkNDjiDV","ac1":"Ac~~2","ac2":"Ac~~3","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565794299750_7X3m4F9R91DL5CGENkHRDh"}
2019-08-14T14:51:40.109Z|1565794299766_9LyUivydvEyKeC3MtZazX6|0|executing transaction
2019-08-14T14:51:40.110Z|1565794299766_9LyUivydvEyKeC3MtZazX6||1|addObj|0ms; level=0|Tr~~bM92S8woVjqGgBt1wU58UB/{"newObj":{"_id":"Tr~~bM92S8woVjqGgBt1wU58UB","ac1":"Ac~~3","ac2":"Ac~~4","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:40.125Z|1565794299757_s996iXnDxcd3HhFPfqk71J|0|executing transaction
2019-08-14T14:51:40.127Z|1565794299757_s996iXnDxcd3HhFPfqk71J||1|addObj|0ms; level=0|Tr~~bPdNgX3zWn1U14u6vpgxe3/{"newObj":{"_id":"Tr~~bPdNgX3zWn1U14u6vpgxe3","ac1":"Ac~~1","ac2":"Ac~~2","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T14:51:40.190Z|1565794299766_9LyUivydvEyKeC3MtZazX6||1|preComputeFormula|Tr~~bM92S8woVjqGgBt1wU58UB --> Ac~~4[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T14:51:40.192Z|1565794299766_9LyUivydvEyKeC3MtZazX6||1|addObj|0ms; level=1|Ac~~4/{"newObj":{"_id":"Ac~~4","balance__":75},"oldObj":{"_id":"Ac~~4","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Tr~~bM92S8woVjqGgBt1wU58UB"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~4"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Tr~~bM92S8woVjqGgBt1wU58UB"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Ac~~4"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~4","Ac~~4"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:40.194Z|1565794299757_s996iXnDxcd3HhFPfqk71J||1|preComputeFormula|Tr~~bPdNgX3zWn1U14u6vpgxe3 --> Ac~~2[balance__] = 50 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T14:51:40.196Z|1565794299757_s996iXnDxcd3HhFPfqk71J||1|addObj|0ms; level=1|Ac~~2/{"newObj":{"_id":"Ac~~2","balance__":50},"oldObj":{"_id":"Ac~~2","balance__":25},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Tr~~bPdNgX3zWn1U14u6vpgxe3"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Tr~~bPdNgX3zWn1U14u6vpgxe3"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~1"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:40.217Z|1565794299757_s996iXnDxcd3HhFPfqk71J||1|preComputeFormula|Tr~~bPdNgX3zWn1U14u6vpgxe3 --> Ac~~1[balance__] = 25 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":0,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T14:51:40.218Z|1565794299757_s996iXnDxcd3HhFPfqk71J||1|addObj|0ms; level=1|Ac~~1/{"newObj":{"_id":"Ac~~1","balance__":25},"oldObj":{"_id":"Ac~~1","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Tr~~bPdNgX3zWn1U14u6vpgxe3"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Tr~~bPdNgX3zWn1U14u6vpgxe3"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~1"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~1","Ac~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Ac~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:40.220Z|1565794299757_s996iXnDxcd3HhFPfqk71J||1|computeFormulasAndSave|saveObjects: {"_id":"Tr~~bPdNgX3zWn1U14u6vpgxe3","ac1":"Ac~~1","ac2":"Ac~~2","val":25}, {"_id":"Ac~~2","balance__":50}, {"_id":"Ac~~1","balance__":25}
2019-08-14T14:51:40.240Z|1565794299766_9LyUivydvEyKeC3MtZazX6||1|preComputeFormula|Tr~~bM92S8woVjqGgBt1wU58UB --> Ac~~3[balance__] = 50 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T14:51:40.242Z|1565794299766_9LyUivydvEyKeC3MtZazX6||1|addObj|0ms; level=1|Ac~~3/{"newObj":{"_id":"Ac~~3","balance__":50},"oldObj":{"_id":"Ac~~3","balance__":75},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Tr~~bM92S8woVjqGgBt1wU58UB"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~4"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Tr~~bM92S8woVjqGgBt1wU58UB"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T14:51:40.245Z|1565794299766_9LyUivydvEyKeC3MtZazX6||1|computeFormulasAndSave|saveObjects: {"_id":"Tr~~bM92S8woVjqGgBt1wU58UB","ac1":"Ac~~3","ac2":"Ac~~4","val":25}, {"_id":"Ac~~4","balance__":75}, {"_id":"Ac~~3","balance__":50}
2019-08-14T14:51:40.336Z|1565794299757_s996iXnDxcd3HhFPfqk71J||1|FINISH|{"clientId_":"88ABajohBBMBqwFAtpFdU8","state_":"BEGIN","obj":{"_id":"Tr~~bPdNgX3zWn1U14u6vpgxe3","ac1":"Ac~~1","ac2":"Ac~~2","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565794299757_s996iXnDxcd3HhFPfqk71J"}
2019-08-14T14:51:40.357Z|1565794299766_9LyUivydvEyKeC3MtZazX6||1|FINISH|{"clientId_":"73472S3nTSfhs7Bx3sP52","state_":"BEGIN","obj":{"_id":"Tr~~bM92S8woVjqGgBt1wU58UB","ac1":"Ac~~3","ac2":"Ac~~4","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565794299766_9LyUivydvEyKeC3MtZazX6"}
    ✓ Should compute account balance correctly for transfer transactions (0.734 sec)

  KeyObjStoreI
    ✓ testGetAll mem (0.03 sec)
    ✓ rangeQuery for views mem (0.056 sec)
    ✓ run adHocQueries mem (0.045 sec)

  MapReduceView
    ✓ should precompute and compute basic SUM (0.204 sec)

  scalarFormulaEvalaluate
    ✓ should evaluate scalar formulas (0.009 sec)

2019-08-14T14:51:40.805Z|tr0|0|objIds: ["obj1"]|conflicts: []
2019-08-14T14:51:40.807Z|tr0|0|executing transaction
2019-08-14T14:51:40.810Z|tr1|0|objIds: ["obj1"]|conflicts: ["tr0"]
2019-08-14T14:51:40.813Z|tr2|0|objIds: ["obj1"]|conflicts: ["tr0","tr1"]
2019-08-14T14:51:40.817Z|tr3|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2"]
2019-08-14T14:51:40.821Z|tr4|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3"]
2019-08-14T14:51:40.824Z|tr5|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4"]
2019-08-14T14:51:40.828Z|tr6|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5"]
2019-08-14T14:51:40.832Z|tr7|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6"]
2019-08-14T14:51:40.836Z|tr8|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7"]
2019-08-14T14:51:40.839Z|tr9|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8"]
2019-08-14T14:51:40.843Z|tr10|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9"]
2019-08-14T14:51:40.847Z|tr11|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10"]
2019-08-14T14:51:40.850Z|tr12|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11"]
2019-08-14T14:51:40.854Z|tr13|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11","tr12"]
2019-08-14T14:51:40.858Z|tr14|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11","tr12","tr13"]
2019-08-14T14:51:40.862Z|tr15|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11","tr12","tr13","tr14"]
2019-08-14T14:51:40.866Z|tr16|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11","tr12","tr13","tr14","tr15"]
2019-08-14T14:51:40.868Z|tr17|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11","tr12","tr13","tr14","tr15","tr16"]
2019-08-14T14:51:40.870Z|tr18|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11","tr12","tr13","tr14","tr15","tr16","tr17"]
2019-08-14T14:51:40.872Z|tr19|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11","tr12","tr13","tr14","tr15","tr16","tr17","tr18"]
2019-08-14T14:51:41.116Z|tr1|0|executing transaction
2019-08-14T14:51:41.221Z|tr2|0|executing transaction
2019-08-14T14:51:41.324Z|tr3|0|executing transaction
2019-08-14T14:51:41.537Z|tr4|0|executing transaction
2019-08-14T14:51:41.640Z|tr5|0|executing transaction
2019-08-14T14:51:41.743Z|tr6|0|executing transaction
2019-08-14T14:51:41.950Z|tr7|0|executing transaction
2019-08-14T14:51:42.053Z|tr8|0|executing transaction
2019-08-14T14:51:42.157Z|tr9|0|executing transaction
2019-08-14T14:51:42.262Z|tr10|0|executing transaction
2019-08-14T14:51:42.467Z|tr11|0|executing transaction
2019-08-14T14:51:42.570Z|tr12|0|executing transaction
2019-08-14T14:51:42.673Z|tr13|0|executing transaction
2019-08-14T14:51:42.878Z|tr14|0|executing transaction
2019-08-14T14:51:43.082Z|tr15|0|executing transaction
2019-08-14T14:51:43.194Z|tr16|0|executing transaction
2019-08-14T14:51:43.397Z|tr17|0|executing transaction
2019-08-14T14:51:43.501Z|tr18|0|executing transaction
2019-08-14T14:51:43.707Z|tr19|0|executing transaction
  TransactionManager
    ✓ Should serialize concurrent conflicting transactions (3 secs)

  collator
    ✓ pad numbers (0.001 sec)
    ✓ collate number and string (0.001 sec)
    ✓ collate number and string and boolean (0.002 sec)
    ✓ should compare arrays correctly (0.001 sec)

**************************************************
*                   Successes                    *
**************************************************

1) AutocompleteComponent should render

2) DbEditorComponent should navigate between tables

3) DbEditorComponent should navigate between tables used in formula

4) DbEditorComponent should highlight table colums used in formula

5) FormService mock debounce example

6) FormService should allow editing of records

7) FormulaEditorComponent should render

8) [FE] FrmdbTemplate should update view when template OR data changes

9) [FE] FrmdbTemplate should serialize element to DataObj

10) VNavComponent should render

11) WebComponentExample Spec Example should render

12) FormulaCompiler should stringify parsed expressions

13) FormulaCompiler should extract keys from binary expressions operand

14) FormulaCompiler should extract map reduce keys and queries from binary expressions

15) FormulaCompiler should extract map reduce keys and queries from logical expressions

16) FormulaCompiler should compile mock schema correctly

17) FormulaTokenizer should tokenize correct formula with function signature helper

18) FormulaTokenizer should report non-existent column

19) FormulaTokenizer should report non-existent column and not missing parenthesis

20) FormulaTokenizer should report non-existent table

21) FormulaTokenizer should suggest function names

22) FormulaTokenizer test REF

23) FormulaTokenizer test REFERENCE_TO

24) FormulaTokenizer test REFERENCE_TO(

25) FormulaTokenizer test REFERENCE_TO(Bla

26) FormulaTokenizer test REFERENCE_TO(B.

27) FormulaTokenizer test REFERENCE_TO(B.i

28) FormulaTokenizer test num

29) FrmdbEngineStore _textjoin B.list= TEXTJOIN(IF(A._id, FLOOR(x/4) == @[idx]),";;")

30) frmdb_engine_store Should allow working with MapReduce queries produced by the FormulaCompiler

31) frmdb_engine_store Should allow to install formulas then query observers and aggregations

32) frmdb_engine_store TablePage Relationships example REFERENCE_TO by _id

33) Inventory Metadata Basic stock operations

34) Inventory Metadata Change formula

35) FrmdbEngine Should allow basic formulas computation when saving an object with auto-correct

36) FrmdbEngine Should allow preview formulas

37) FrmdbEngine Should allow adding/modifying formulas

38) FrmdbEngine Should update views and compute new values of Observer when Observer field change

39) FrmdbEngine Should compute account balance correctly for transfer transactions

40) KeyObjStoreI testGetAll mem

41) KeyObjStoreI rangeQuery for views mem

42) KeyObjStoreI run adHocQueries mem

43) MapReduceView should precompute and compute basic SUM

44) scalarFormulaEvalaluate should evaluate scalar formulas

45) TransactionManager Should serialize concurrent conflicting transactions

46) collator pad numbers

47) collator collate number and string

48) collator collate number and string and boolean

49) collator should compare arrays correctly

**************************************************
*                    Failures                    *
**************************************************

1) FrmdbEngineStore _count simple one table RANK formula: RANK([FLOOR(@[x]/4) * 4, @[x]],_MAP(A.x,[FLOOR(x/4) * 4, x]))

2) FrmdbEngineStore _count two table RANK formula: RANK([FLOOR(@[idx]/4) * 4, @[idx]], _MAP(A.x, [FLOOR(x/4) * 4, x]))

Executed 51 of 51 specs (2 FAILED) in 16 secs.
