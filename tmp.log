C:\Windows\System32\bash.exe -ic 'node --trace-warnings --debug-brk --inspect=0.0.0.0:9232 jasmine.js 'storage\src\postgres\key_value_store_postgres.ts''
bash: /usr/lib/git-core/git-sh-prompt: line 300: syntax error near unexpected token `('
bash: /usr/lib/git-core/git-sh-prompt: line 300: `__git_ps1 ()'
Debugger listening on ws://0.0.0.0:9232/11316974-c868-4e7f-b467-9398a951240a
For help, see: https://nodejs.org/en/docs/inspector
Debugger attached.
null: Array(3) ["/usr/bin/node", "/d/code/metawiz/febe/jasmine.js", "storage\src\postgres\key_value_store_postgres.ts"]
Jasmine started

  AutocompleteComponent
    ✓ should render (0.032 sec)

null: Error: Uncaught [TypeError: Cannot read property 'split' of undefined]
    at reportException (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at CustomElementReactionStack.invokeCEReactions (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/custom-elements.js:139:13)
    at HTMLElement.CEReaction [as innerHTML] (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/ce-reaction.js:632:35)
    at HTMLElement.connectedCallbackNew (/d/code/metawiz/febe/fe/src/live-dom-template/frmdb-element.ts:41:31)
    at CustomElementReactionStack.invokeCEReactions (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/custom-elements.js:133:26)
    at HTMLBodyElement.CEReaction [as innerHTML] (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/ce-reaction.js:632:35)
    at UserContext.it (/d/code/metawiz/febe/fe/src/db-editor/db-editor.component.spec.ts:22:32)
    at QueueRunner.attempt (/d/code/metawiz/febe/node_modules/jasmine-core/lib/jasmine-core/jasmine.js:5513:24)
    at QueueRunner.run (/d/code/metawiz/febe/node_modules/jasmine-core/lib/jasmine-core/jasmine.js:5543:25)
    at runNext (/d/code/metawiz/febe/node_modules/jasmine-core/lib/jasmine-core/jasmine.js:5469:18)
null: TypeError: Cannot read property 'split' of undefined
null: Error: Uncaught [TypeError: Right-hand side of 'instanceof' is not callable]
    at reportException (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at CustomElementReactionStack.invokeCEReactions (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/custom-elements.js:139:13)
    at HTMLElement.CEReaction [as innerHTML] (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/ce-reaction.js:632:35)
    at HTMLElement.connectedCallbackNew (/d/code/metawiz/febe/fe/src/live-dom-template/frmdb-element.ts:41:31)
    at CustomElementReactionStack.invokeCEReactions (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/custom-elements.js:133:26)
    at HTMLBodyElement.CEReaction [as innerHTML] (/d/code/metawiz/febe/node_modules/@tbranyen/jsdom/lib/jsdom/living/helpers/ce-reaction.js:632:35)
    at UserContext.it (/d/code/metawiz/febe/fe/src/db-editor/db-editor.component.spec.ts:22:32)
    at QueueRunner.attempt (/d/code/metawiz/febe/node_modules/jasmine-core/lib/jasmine-core/jasmine.js:5513:24)
    at QueueRunner.run (/d/code/metawiz/febe/node_modules/jasmine-core/lib/jasmine-core/jasmine.js:5543:25)
    at runNext (/d/code/metawiz/febe/node_modules/jasmine-core/lib/jasmine-core/jasmine.js:5469:18)
null: TypeError: Right-hand side of 'instanceof' is not callable
  DbEditorComponent
    ✓ should navigate between tables (2 secs)
    ✓ should navigate between tables used in formula (0.004 sec)
    ✓ should highlight table colums used in formula (0.003 sec)

  FormService
    ✓ mock debounce example (0.013 sec)
null: Array(0) []
    ✓ should allow editing of records (0.546 sec)

<div class="formula-code-editor d-flex">
    <button id="toggle-formula-editor" class="btn btn-light p-1" title="Formula Editor">
        <img src="img/frmdb-icon.png" alt="Edit Formula">
    </button>  
    <div class="editor">
      <textarea class="editor-textarea" readonly="" spellcheck="false"></textarea>
      <div class="editor-formatted-overlay"></div>
    </div>
    <button id="apply-formula-changes" class="btn btn-light p-1" disabled="" title="Apply Changes">
        <i class="la la-check-circle"></i>
    </button>    
</div>
  FormulaEditorComponent
    ✓ should render (0.228 sec)

  [FE] FrmdbTemplate
    ✓ should update view when template OR data changes (2 secs)
    ✓ should serialize element to DataObj (0.057 sec)

  VNavComponent
    ✓ should render (0.004 sec)

  WebComponentExample Spec Example
    ✓ should render (0.005 sec)

  FormulaCompiler
    ✓ should stringify parsed expressions (0.002 sec)
    ✓ should extract keys from binary expressions operand (0.003 sec)
    ✓ should extract map reduce keys and queries from binary expressions (0.003 sec)
    ✓ should extract map reduce keys and queries from logical expressions (0.002 sec)
    ✓ should compile mock schema correctly (0 sec)

null: Array(3) [Object, Object, Object]
null: Array(1) [Object]
null: Array(1) [Object]
null: Array(6) [Object, Object, Object, Object, Object, Object]
null: Array(18) [Object, Object, Object, Object, Object, Object, Object, Object, …]
  FormulaTokenizer
    ✓ should tokenize correct formula with function signature helper (0.048 sec)
null: Array(3) [Object, Object, Object]
null: Array(1) [Object]
null: Array(1) [Object]
null: Array(6) [Object, Object, Object, Object, Object, Object]
null: Array(18) [Object, Object, Object, Object, Object, Object, Object, Object, …]
    ✓ should report non-existent column (0.044 sec)
null: Array(3) [Object, Object, Object]
null: Array(1) [Object]
null: Array(1) [Object]
null: Array(6) [Object, Object, Object, Object, Object, Object]
null: Array(18) [Object, Object, Object, Object, Object, Object, Object, Object, …]
    ✓ should report non-existent column and not missing parenthesis (0.033 sec)
null: Array(3) [Object, Object, Object]
null: Array(1) [Object]
null: Array(1) [Object]
null: Array(6) [Object, Object, Object, Object, Object, Object]
null: Array(18) [Object, Object, Object, Object, Object, Object, Object, Object, …]
    ✓ should report non-existent table (0.044 sec)
null: Array(3) [Object, Object, Object]
    ✓ should suggest function names (0.011 sec)
    ✓ test REF (0.004 sec)
    ✓ test REFERENCE_TO (0.014 sec)
    ✓ test REFERENCE_TO( (0.006 sec)
null: Array(1) [Object]
    ✓ test REFERENCE_TO(Bla (0.011 sec)
null: Array(3) [Object, Object, Object]
    ✓ test REFERENCE_TO(B. (0.009 sec)
null: Array(3) [Object, Object, Object]
    ✓ test REFERENCE_TO(B.i (0.011 sec)
    ✓ test num (0.001 sec)

null: Connecting to
null: Object {database: "postgres", host: "localhost", port: 5432, user: "postgres", password: "postgres"}
Droping all tables
Tables droped
  FrmdbEngineStore _count
    ✓ simple one table RANK formula: RANK([FLOOR(@[x]/4) * 4, @[x]],_MAP(A.x,[FLOOR(x/4) * 4, x])) (0.937 sec)
Droping all tables
Tables droped
    ✓ two table RANK formula: RANK([FLOOR(@[idx]/4) * 4, @[idx]], _MAP(A.x, [FLOOR(x/4) * 4, x])) (0.416 sec)

Droping all tables
Tables droped
  FrmdbEngineStore _textjoin
    ✓ B.list= TEXTJOIN(IF(A._id, FLOOR(x/4) == @[idx]),";;") (0.463 sec)

Droping all tables
Tables droped
  frmdb_engine_store
    ✓ Should allow working with MapReduce queries produced by the FormulaCompiler (0.162 sec)
Droping all tables
Tables droped
    ✓ Should allow to install formulas then query observers and aggregations (0.345 sec)
Droping all tables
Tables droped

    TablePage Relationships
      ✓ example REFERENCE_TO by _id (0.303 sec)

Droping all tables
Tables droped
init store...
Starting FormulaDBEngine...
2019-08-15T11:23:03.586Z|1565868183585_df173ojkzSFJu5uqyGoVy9|BEGIN|{"clientId_":"ucZirwf6KcYTBqY6FJvEzX","state_":"BEGIN","obj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":11},"type_":"[form] ServerEventModifiedFormData","_id":"1565868183585_df173ojkzSFJu5uqyGoVy9"}
2019-08-15T11:23:03.596Z|1565868183585_df173ojkzSFJu5uqyGoVy9||1|addObj|0ms; level=0|ReceiptItem~~1__1/{"newObj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":11},"oldObj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":11},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:03.655Z|1565868183585_df173ojkzSFJu5uqyGoVy9||1|preComputeFormula|ReceiptItem~~1__1 --> ProductLocation~~1[received_stock__] = 16 ($TRG$={"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])":16}) = [$TRG$['vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])']]
2019-08-15T11:23:03.656Z|1565868183585_df173ojkzSFJu5uqyGoVy9||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 17
2019-08-15T11:23:03.657Z|1565868183585_df173ojkzSFJu5uqyGoVy9||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":16,"available_stock__":17,"ordered_stock__":-1},"oldObj":{"_id":"ProductLocation~~1","received_stock__":-1,"available_stock__":-1,"ordered_stock__":-1},"aggsViewsUpdates":[{"viewHashCode":"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ReceiptItem~~1__1"],"value":11}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":16}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:03.659Z|1565868183585_df173ojkzSFJu5uqyGoVy9|0|objIds: ["ReceiptItem~~1__1","ProductLocation~~1","MAP:ProductLocation~~1\u0001ReceiptItem~~1__1","REDUCE:ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-15T11:23:03.660Z|1565868183585_df173ojkzSFJu5uqyGoVy9|0|executing transaction
2019-08-15T11:23:03.667Z|1565868183585_df173ojkzSFJu5uqyGoVy9||1|addObj|0ms; level=0|ReceiptItem~~1__1/{"newObj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":11},"oldObj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":11},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:03.725Z|1565868183585_df173ojkzSFJu5uqyGoVy9||1|preComputeFormula|ReceiptItem~~1__1 --> ProductLocation~~1[received_stock__] = 16 ($TRG$={"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])":16}) = [$TRG$['vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])']]
2019-08-15T11:23:03.729Z|1565868183585_df173ojkzSFJu5uqyGoVy9||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 17
2019-08-15T11:23:03.730Z|1565868183585_df173ojkzSFJu5uqyGoVy9||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":16,"available_stock__":17,"ordered_stock__":-1},"oldObj":{"_id":"ProductLocation~~1","received_stock__":-1,"available_stock__":-1,"ordered_stock__":-1},"aggsViewsUpdates":[{"viewHashCode":"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ReceiptItem~~1__1"],"value":11}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":16}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:03.731Z|1565868183585_df173ojkzSFJu5uqyGoVy9||1|computeFormulasAndSave|saveObjects: {"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":11}, {"_id":"ProductLocation~~1","received_stock__":16,"available_stock__":17,"ordered_stock__":-1}
2019-08-15T11:23:03.761Z|1565868183585_df173ojkzSFJu5uqyGoVy9||1|FINISH|{"clientId_":"ucZirwf6KcYTBqY6FJvEzX","state_":"BEGIN","obj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":11},"type_":"[form] ServerEventModifiedFormData","_id":"1565868183585_df173ojkzSFJu5uqyGoVy9"}
2019-08-15T11:23:03.762Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ|BEGIN|{"clientId_":"DRt3DxXjJHF1p1PjFaHWL","state_":"BEGIN","obj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565868183762_aGFXggvQMt7d4c1CK1noLJ"}
2019-08-15T11:23:03.769Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||1|addObj|0ms; level=0|OrderItem~~1__2/{"newObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":10},"oldObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:03.839Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||1|computeAutoCorrections: OrderItem~~1__2[quantity] = [MAX(0, quantity + $ROW$.available_stock__)] = 6
2019-08-15T11:23:03.840Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||1|computeAutoCorrections: OrderItem~~1__2[error_quantity] = [ABS($OLD$.quantity - quantity)] = 4
2019-08-15T11:23:03.849Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||2|addObj|0ms; level=0|OrderItem~~1__2/{"newObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":6,"error_quantity":4},"oldObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:03.938Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||2|preComputeFormula|OrderItem~~1__2 --> ProductLocation~~1[ordered_stock__] = 16 ($TRG$={"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])":16}) = [$TRG$['vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])']]
2019-08-15T11:23:03.938Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||2|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 0
2019-08-15T11:23:03.939Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||2|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":16,"available_stock__":0,"ordered_stock__":16},"oldObj":{"_id":"ProductLocation~~1","received_stock__":16,"available_stock__":17,"ordered_stock__":-1},"aggsViewsUpdates":[{"viewHashCode":"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","OrderItem~~1__2"],"value":6}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":16}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:03.940Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ|0|objIds: ["OrderItem~~1__2","ProductLocation~~1","MAP:ProductLocation~~1\u0001OrderItem~~1__2","REDUCE:ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-15T11:23:03.941Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ|0|executing transaction
2019-08-15T11:23:03.963Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||1|addObj|0ms; level=0|OrderItem~~1__2/{"newObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":10,"error_quantity":4},"oldObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:04.052Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||1|computeAutoCorrections: OrderItem~~1__2[quantity] = [MAX(0, quantity + $ROW$.available_stock__)] = 6
2019-08-15T11:23:04.052Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||1|computeAutoCorrections: OrderItem~~1__2[error_quantity] = [ABS($OLD$.quantity - quantity)] = 4
2019-08-15T11:23:04.059Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||2|addObj|0ms; level=0|OrderItem~~1__2/{"newObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":6,"error_quantity":4},"oldObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:04.116Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||2|preComputeFormula|OrderItem~~1__2 --> ProductLocation~~1[ordered_stock__] = 16 ($TRG$={"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])":16}) = [$TRG$['vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])']]
2019-08-15T11:23:04.117Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||2|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 0
2019-08-15T11:23:04.117Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||2|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":16,"available_stock__":0,"ordered_stock__":16},"oldObj":{"_id":"ProductLocation~~1","received_stock__":16,"available_stock__":17,"ordered_stock__":-1},"aggsViewsUpdates":[{"viewHashCode":"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","OrderItem~~1__2"],"value":6}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":16}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:04.118Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||2|computeFormulasAndSave|saveObjects: {"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":6,"error_quantity":4}, {"_id":"ProductLocation~~1","received_stock__":16,"available_stock__":0,"ordered_stock__":16}
2019-08-15T11:23:04.151Z|1565868183762_aGFXggvQMt7d4c1CK1noLJ||2|FINISH|{"clientId_":"DRt3DxXjJHF1p1PjFaHWL","state_":"BEGIN","obj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":6,"error_quantity":4},"type_":"[form] ServerEventModifiedFormData","_id":"1565868183762_aGFXggvQMt7d4c1CK1noLJ"}
  Inventory Metadata
    ✓ Basic stock operations (0.907 sec)
Droping all tables
Tables droped
init store...
Starting FormulaDBEngine...
2019-08-15T11:23:04.217Z|1565868184217_qazWWCdE1aexXwVJZUqiHA|BEGIN|{"clientId_":"7Htugh3fBu5x8NdKkSRvg4","state_":"BEGIN","obj":{"_id":"ProductLocation~~1","received_stock__":-1,"ordered_stock__":-1,"available_stock__":-1},"type_":"[form] ServerEventModifiedFormData","_id":"1565868184217_qazWWCdE1aexXwVJZUqiHA"}
2019-08-15T11:23:04.237Z|1565868184217_qazWWCdE1aexXwVJZUqiHA||computeFormulasAndSave| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 0
2019-08-15T11:23:04.237Z|1565868184217_qazWWCdE1aexXwVJZUqiHA||1|addObj|0ms; level=0|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":0,"ordered_stock__":0,"available_stock__":0},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-ProductLocation-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-15T11:23:04.238Z|1565868184217_qazWWCdE1aexXwVJZUqiHA|0|objIds: ["ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-15T11:23:04.239Z|1565868184217_qazWWCdE1aexXwVJZUqiHA|0|executing transaction
2019-08-15T11:23:04.253Z|1565868184217_qazWWCdE1aexXwVJZUqiHA||computeFormulasAndSave| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 0
2019-08-15T11:23:04.254Z|1565868184217_qazWWCdE1aexXwVJZUqiHA||1|addObj|0ms; level=0|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":0,"ordered_stock__":0,"available_stock__":0},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-ProductLocation-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-15T11:23:04.255Z|1565868184217_qazWWCdE1aexXwVJZUqiHA||1|computeFormulasAndSave|saveObjects: {"_id":"ProductLocation~~1","received_stock__":0,"ordered_stock__":0,"available_stock__":0}
2019-08-15T11:23:04.272Z|1565868184217_qazWWCdE1aexXwVJZUqiHA||1|FINISH|{"clientId_":"7Htugh3fBu5x8NdKkSRvg4","state_":"BEGIN","obj":{"_id":"ProductLocation~~1","received_stock__":0,"ordered_stock__":0,"available_stock__":0},"type_":"[form] ServerEventModifiedFormData","_id":"1565868184217_qazWWCdE1aexXwVJZUqiHA"}
2019-08-15T11:23:04.273Z|1565868184273_5itdoWVAgv1ToLMtzFbmPB|BEGIN|{"clientId_":"2NwdwXzu7H52jMVyTzy3q","state_":"BEGIN","obj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565868184273_5itdoWVAgv1ToLMtzFbmPB"}
2019-08-15T11:23:04.278Z|1565868184273_5itdoWVAgv1ToLMtzFbmPB||1|addObj|0ms; level=0|ReceiptItem~~1__1/{"newObj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:04.301Z|1565868184273_5itdoWVAgv1ToLMtzFbmPB||1|preComputeFormula|ReceiptItem~~1__1 --> ProductLocation~~1[received_stock__] = 10 ($TRG$={"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])":10}) = [$TRG$['vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])']]
2019-08-15T11:23:04.302Z|1565868184273_5itdoWVAgv1ToLMtzFbmPB||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 10
2019-08-15T11:23:04.302Z|1565868184273_5itdoWVAgv1ToLMtzFbmPB||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":10,"available_stock__":10,"ordered_stock__":0},"oldObj":{"_id":"ProductLocation~~1","received_stock__":0,"available_stock__":0,"ordered_stock__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ReceiptItem~~1__1"],"value":10}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:04.303Z|1565868184273_5itdoWVAgv1ToLMtzFbmPB|0|objIds: ["ReceiptItem~~1__1","ProductLocation~~1","MAP:ProductLocation~~1\u0001ReceiptItem~~1__1","REDUCE:ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-15T11:23:04.303Z|1565868184273_5itdoWVAgv1ToLMtzFbmPB|0|executing transaction
2019-08-15T11:23:04.310Z|1565868184273_5itdoWVAgv1ToLMtzFbmPB||1|addObj|0ms; level=0|ReceiptItem~~1__1/{"newObj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:04.334Z|1565868184273_5itdoWVAgv1ToLMtzFbmPB||1|preComputeFormula|ReceiptItem~~1__1 --> ProductLocation~~1[received_stock__] = 10 ($TRG$={"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])":10}) = [$TRG$['vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])']]
2019-08-15T11:23:04.335Z|1565868184273_5itdoWVAgv1ToLMtzFbmPB||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 10
2019-08-15T11:23:04.335Z|1565868184273_5itdoWVAgv1ToLMtzFbmPB||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":10,"available_stock__":10,"ordered_stock__":0},"oldObj":{"_id":"ProductLocation~~1","received_stock__":0,"available_stock__":0,"ordered_stock__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ReceiptItem~~1__1"],"value":10}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:04.335Z|1565868184273_5itdoWVAgv1ToLMtzFbmPB||1|computeFormulasAndSave|saveObjects: {"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":10}, {"_id":"ProductLocation~~1","received_stock__":10,"available_stock__":10,"ordered_stock__":0}
2019-08-15T11:23:04.359Z|1565868184273_5itdoWVAgv1ToLMtzFbmPB||1|FINISH|{"clientId_":"2NwdwXzu7H52jMVyTzy3q","state_":"BEGIN","obj":{"_id":"ReceiptItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565868184273_5itdoWVAgv1ToLMtzFbmPB"}
2019-08-15T11:23:04.360Z|1565868184360_ojiiDQ8ohPTJc9wKqfKBvS|BEGIN|{"clientId_":"bj1nSUDnQvrtGmLjTGn8uT","state_":"BEGIN","obj":{"_id":"ReceiptItem~~1__2","product_id":"ProductLocation~~1","quantity":5},"type_":"[form] ServerEventModifiedFormData","_id":"1565868184360_ojiiDQ8ohPTJc9wKqfKBvS"}
2019-08-15T11:23:04.372Z|1565868184360_ojiiDQ8ohPTJc9wKqfKBvS||1|addObj|0ms; level=0|ReceiptItem~~1__2/{"newObj":{"_id":"ReceiptItem~~1__2","product_id":"ProductLocation~~1","quantity":5},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:04.401Z|1565868184360_ojiiDQ8ohPTJc9wKqfKBvS||1|preComputeFormula|ReceiptItem~~1__2 --> ProductLocation~~1[received_stock__] = 15 ($TRG$={"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])":15}) = [$TRG$['vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])']]
2019-08-15T11:23:04.402Z|1565868184360_ojiiDQ8ohPTJc9wKqfKBvS||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 15
2019-08-15T11:23:04.402Z|1565868184360_ojiiDQ8ohPTJc9wKqfKBvS||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":15,"ordered_stock__":0},"oldObj":{"_id":"ProductLocation~~1","received_stock__":10,"available_stock__":10,"ordered_stock__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ReceiptItem~~1__2"],"value":5}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":15}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:04.404Z|1565868184360_ojiiDQ8ohPTJc9wKqfKBvS|0|objIds: ["ReceiptItem~~1__2","ProductLocation~~1","MAP:ProductLocation~~1\u0001ReceiptItem~~1__2","REDUCE:ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-15T11:23:04.405Z|1565868184360_ojiiDQ8ohPTJc9wKqfKBvS|0|executing transaction
2019-08-15T11:23:04.411Z|1565868184360_ojiiDQ8ohPTJc9wKqfKBvS||1|addObj|0ms; level=0|ReceiptItem~~1__2/{"newObj":{"_id":"ReceiptItem~~1__2","product_id":"ProductLocation~~1","quantity":5},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:04.443Z|1565868184360_ojiiDQ8ohPTJc9wKqfKBvS||1|preComputeFormula|ReceiptItem~~1__2 --> ProductLocation~~1[received_stock__] = 15 ($TRG$={"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])":15}) = [$TRG$['vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])']]
2019-08-15T11:23:04.443Z|1565868184360_ojiiDQ8ohPTJc9wKqfKBvS||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 15
2019-08-15T11:23:04.444Z|1565868184360_ojiiDQ8ohPTJc9wKqfKBvS||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":15,"ordered_stock__":0},"oldObj":{"_id":"ProductLocation~~1","received_stock__":10,"available_stock__":10,"ordered_stock__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-ReceiptItem-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ReceiptItem~~1__2"],"value":5}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":15}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:04.444Z|1565868184360_ojiiDQ8ohPTJc9wKqfKBvS||1|computeFormulasAndSave|saveObjects: {"_id":"ReceiptItem~~1__2","product_id":"ProductLocation~~1","quantity":5}, {"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":15,"ordered_stock__":0}
2019-08-15T11:23:04.489Z|1565868184360_ojiiDQ8ohPTJc9wKqfKBvS||1|FINISH|{"clientId_":"bj1nSUDnQvrtGmLjTGn8uT","state_":"BEGIN","obj":{"_id":"ReceiptItem~~1__2","product_id":"ProductLocation~~1","quantity":5},"type_":"[form] ServerEventModifiedFormData","_id":"1565868184360_ojiiDQ8ohPTJc9wKqfKBvS"}
2019-08-15T11:23:04.490Z|1565868184490_kFGTNwYADo9gi1N2kySjf|BEGIN|{"clientId_":"ny82RhHdc48asqWqxQipqq","state_":"BEGIN","obj":{"_id":"OrderItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565868184490_kFGTNwYADo9gi1N2kySjf"}
2019-08-15T11:23:04.500Z|1565868184490_kFGTNwYADo9gi1N2kySjf||1|addObj|0ms; level=0|OrderItem~~1__1/{"newObj":{"_id":"OrderItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:04.552Z|1565868184490_kFGTNwYADo9gi1N2kySjf||1|preComputeFormula|OrderItem~~1__1 --> ProductLocation~~1[ordered_stock__] = 10 ($TRG$={"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])":10}) = [$TRG$['vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])']]
2019-08-15T11:23:04.552Z|1565868184490_kFGTNwYADo9gi1N2kySjf||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 5
2019-08-15T11:23:04.553Z|1565868184490_kFGTNwYADo9gi1N2kySjf||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":5,"ordered_stock__":10},"oldObj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":15,"ordered_stock__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","OrderItem~~1__1"],"value":10}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:04.553Z|1565868184490_kFGTNwYADo9gi1N2kySjf|0|objIds: ["OrderItem~~1__1","ProductLocation~~1","MAP:ProductLocation~~1\u0001OrderItem~~1__1","REDUCE:ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-15T11:23:04.554Z|1565868184490_kFGTNwYADo9gi1N2kySjf|0|executing transaction
2019-08-15T11:23:04.563Z|1565868184490_kFGTNwYADo9gi1N2kySjf||1|addObj|0ms; level=0|OrderItem~~1__1/{"newObj":{"_id":"OrderItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:04.600Z|1565868184490_kFGTNwYADo9gi1N2kySjf||1|preComputeFormula|OrderItem~~1__1 --> ProductLocation~~1[ordered_stock__] = 10 ($TRG$={"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])":10}) = [$TRG$['vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])']]
2019-08-15T11:23:04.601Z|1565868184490_kFGTNwYADo9gi1N2kySjf||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 5
2019-08-15T11:23:04.601Z|1565868184490_kFGTNwYADo9gi1N2kySjf||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":5,"ordered_stock__":10},"oldObj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":15,"ordered_stock__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","OrderItem~~1__1"],"value":10}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:04.602Z|1565868184490_kFGTNwYADo9gi1N2kySjf||1|computeFormulasAndSave|saveObjects: {"_id":"OrderItem~~1__1","product_id":"ProductLocation~~1","quantity":10}, {"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":5,"ordered_stock__":10}
2019-08-15T11:23:04.647Z|1565868184490_kFGTNwYADo9gi1N2kySjf||1|FINISH|{"clientId_":"ny82RhHdc48asqWqxQipqq","state_":"BEGIN","obj":{"_id":"OrderItem~~1__1","product_id":"ProductLocation~~1","quantity":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565868184490_kFGTNwYADo9gi1N2kySjf"}
2019-08-15T11:23:04.651Z|1565868184651_exB73MTvdeMhM92GSJF6Eo|BEGIN|{"clientId_":"mxJPsrhnScpss1CaeiqRsg","state_":"BEGIN","obj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":4},"type_":"[form] ServerEventModifiedFormData","_id":"1565868184651_exB73MTvdeMhM92GSJF6Eo"}
2019-08-15T11:23:04.668Z|1565868184651_exB73MTvdeMhM92GSJF6Eo||1|addObj|0ms; level=0|OrderItem~~1__2/{"newObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:04.739Z|1565868184651_exB73MTvdeMhM92GSJF6Eo||1|preComputeFormula|OrderItem~~1__2 --> ProductLocation~~1[ordered_stock__] = 14 ($TRG$={"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])":14}) = [$TRG$['vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])']]
2019-08-15T11:23:04.740Z|1565868184651_exB73MTvdeMhM92GSJF6Eo||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 1
2019-08-15T11:23:04.742Z|1565868184651_exB73MTvdeMhM92GSJF6Eo||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":1,"ordered_stock__":14},"oldObj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":5,"ordered_stock__":10},"aggsViewsUpdates":[{"viewHashCode":"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","OrderItem~~1__2"],"value":4}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":14}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:04.743Z|1565868184651_exB73MTvdeMhM92GSJF6Eo|0|objIds: ["OrderItem~~1__2","ProductLocation~~1","MAP:ProductLocation~~1\u0001OrderItem~~1__2","REDUCE:ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-15T11:23:04.745Z|1565868184651_exB73MTvdeMhM92GSJF6Eo|0|executing transaction
2019-08-15T11:23:04.760Z|1565868184651_exB73MTvdeMhM92GSJF6Eo||1|addObj|0ms; level=0|OrderItem~~1__2/{"newObj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:04.826Z|1565868184651_exB73MTvdeMhM92GSJF6Eo||1|preComputeFormula|OrderItem~~1__2 --> ProductLocation~~1[ordered_stock__] = 14 ($TRG$={"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])":14}) = [$TRG$['vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])']]
2019-08-15T11:23:04.827Z|1565868184651_exB73MTvdeMhM92GSJF6Eo||1|preComputeFormula| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 1
2019-08-15T11:23:04.829Z|1565868184651_exB73MTvdeMhM92GSJF6Eo||1|addObj|0ms; level=1|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":1,"ordered_stock__":14},"oldObj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":5,"ordered_stock__":10},"aggsViewsUpdates":[{"viewHashCode":"vaggs-OrderItem-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","OrderItem~~1__2"],"value":4}],"mapDelete":[],"reduce":[{"key":["ProductLocation~~1"],"value":14}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(OrderItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:04.831Z|1565868184651_exB73MTvdeMhM92GSJF6Eo||1|computeFormulasAndSave|saveObjects: {"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":4}, {"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":1,"ordered_stock__":14}
2019-08-15T11:23:04.888Z|1565868184651_exB73MTvdeMhM92GSJF6Eo||1|FINISH|{"clientId_":"mxJPsrhnScpss1CaeiqRsg","state_":"BEGIN","obj":{"_id":"OrderItem~~1__2","product_id":"ProductLocation~~1","quantity":4},"type_":"[form] ServerEventModifiedFormData","_id":"1565868184651_exB73MTvdeMhM92GSJF6Eo"}
2019-08-15T11:23:04.903Z|1565868184902_i2bge37BZz8xQ7Me5QNKX1|BEGIN|{"_id":"1565868184902_i2bge37BZz8xQ7Me5QNKX1","type_":"[entity] ServerEventSetProperty","targetEntity":{"_id":"ProductLocation","props":{"_id":{"name":"_id","propType_":"STRING","allowNull":false},"product_id":{"name":"product_id","propType_":"STRING","allowNull":false,"defaultValue":"DEFAULT-location"},"location_code":{"name":"location_code","propType_":"STRING","allowNull":false,"defaultValue":"DEFAULT-location"},"category":{"name":"category","propType_":"STRING","allowNull":false},"received_stock__":{"name":"received_stock__","propType_":"FORMULA","formula":"SUMIF(ReceiptItem.quantity, product_id == @[_id])"},"available_stock__":{"name":"available_stock__","propType_":"FORMULA","formula":"received_stock__ - ordered_stock__"},"ordered_stock__":{"name":"ordered_stock__","propType_":"FORMULA","formula":"SUMIF(OrderItem.quantity, product_id == @[_id])"},"price":{"name":"price","propType_":"NUMBER","allowNull":true},"currency":{"propType_":"REFERENCE_TO","referencedEntityName":"General_Currency","referencedPropertyName":"code","name":"currency__"},"minimal_stock":{"name":"minimal_stock","propType_":"NUMBER","allowNull":false},"moving_stock":{"name":"moving_stock","propType_":"NUMBER","allowNull":false},"state":{"name":"state","propType_":"STRING","allowNull":false}},"validations":{"positiveStock":{"conditionExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":22,"origExpr":"available_stock__ >= 0","operator":">=","left":{"type":"Identifier","startIndex":0,"endIndex":17,"origExpr":"available_stock__","name":"available_stock__"},"right":{"type":"NumberLiteral","startIndex":21,"endIndex":22,"origExpr":"0","value":0,"raw":"0"}}}},"isEditable":true},"property":{"name":"ordered_stock__","propType_":"FORMULA","formula":"COUNTIF(ReceiptItem.quantity, product_id == @[_id])"},"state_":"BEGIN","clientId_":"ABC"}
2019-08-15T11:23:05.189Z|1565868184902_i2bge37BZz8xQ7Me5QNKX1-1||computeFormulasAndSave| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 13
2019-08-15T11:23:05.190Z|1565868184902_i2bge37BZz8xQ7Me5QNKX1-1||1|addObj|0ms; level=0|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":13,"ordered_stock__":2},"oldObj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":1,"ordered_stock__":14},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-ProductLocation-COUNTIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-15T11:23:05.192Z|1565868184902_i2bge37BZz8xQ7Me5QNKX1-1|0|objIds: ["ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1","MAP:ProductLocation~~1\u0001ProductLocation~~1"]|conflicts: []
2019-08-15T11:23:05.194Z|1565868184902_i2bge37BZz8xQ7Me5QNKX1-1|0|executing transaction
2019-08-15T11:23:05.266Z|1565868184902_i2bge37BZz8xQ7Me5QNKX1-1||computeFormulasAndSave| - selfFormula: ProductLocation~~1[available_stock__] = [received_stock__ - ordered_stock__] = 13
2019-08-15T11:23:05.267Z|1565868184902_i2bge37BZz8xQ7Me5QNKX1-1||1|addObj|0ms; level=0|ProductLocation~~1/{"newObj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":13,"ordered_stock__":2},"oldObj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":1,"ordered_stock__":14},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-ProductLocation-SUMIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-ProductLocation-COUNTIF(ReceiptItem.quantity, product_id == @[_id])","map":[{"key":["ProductLocation~~1","ProductLocation~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-15T11:23:05.269Z|1565868184902_i2bge37BZz8xQ7Me5QNKX1-1||1|computeFormulasAndSave|saveObjects: {"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":13,"ordered_stock__":2}
2019-08-15T11:23:05.289Z|1565868184902_i2bge37BZz8xQ7Me5QNKX1-1||1|FINISH|{"_id":"1565868184902_i2bge37BZz8xQ7Me5QNKX1-1","type_":"[form] ServerEventModifiedFormData","state_":"BEGIN","clientId_":"ABC","obj":{"_id":"ProductLocation~~1","received_stock__":15,"available_stock__":13,"ordered_stock__":2}}
    ✓ Change formula (1 sec)

Droping all tables
Tables droped
frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id])
stockReservationSchema.entities.B.props.sum__.compiledFormula_= undefined
stockReservationSchema.entities.B.props.x__.formula= 100 - sum__
init store...
Starting FormulaDBEngine...
2019-08-15T11:23:05.512Z|1565868185512_jjZav6SpZJfr6oQ7mWHnok|BEGIN|{"clientId_":"dxBZAUw8r1tH4PP7RzHE4t","state_":"BEGIN","obj":{"_id":"A~~c__","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565868185512_jjZav6SpZJfr6oQ7mWHnok"}
2019-08-15T11:23:05.514Z|1565868185512_jjZav6SpZJfr6oQ7mWHnok||1|addObj|0ms; level=0|A~~c__9VuXhvyAHqhtQPEvzSVqHW/{"newObj":{"_id":"A~~c__9VuXhvyAHqhtQPEvzSVqHW","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:05.561Z|1565868185512_jjZav6SpZJfr6oQ7mWHnok||1|preComputeFormula|A~~c__9VuXhvyAHqhtQPEvzSVqHW --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:05.562Z|1565868185512_jjZav6SpZJfr6oQ7mWHnok||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-15T11:23:05.562Z|1565868185512_jjZav6SpZJfr6oQ7mWHnok||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~c__9VuXhvyAHqhtQPEvzSVqHW"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:05.563Z|1565868185512_jjZav6SpZJfr6oQ7mWHnok|0|objIds: ["A~~c__9VuXhvyAHqhtQPEvzSVqHW","B~~1","MAP:B~~1\u0001A~~c__9VuXhvyAHqhtQPEvzSVqHW","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:05.565Z|1565868185512_jjZav6SpZJfr6oQ7mWHnok|0|executing transaction
2019-08-15T11:23:05.566Z|1565868185512_jjZav6SpZJfr6oQ7mWHnok||1|addObj|0ms; level=0|A~~c__9VuXhvyAHqhtQPEvzSVqHW/{"newObj":{"_id":"A~~c__9VuXhvyAHqhtQPEvzSVqHW","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:05.601Z|1565868185512_jjZav6SpZJfr6oQ7mWHnok||1|preComputeFormula|A~~c__9VuXhvyAHqhtQPEvzSVqHW --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:05.602Z|1565868185512_jjZav6SpZJfr6oQ7mWHnok||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-15T11:23:05.602Z|1565868185512_jjZav6SpZJfr6oQ7mWHnok||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~c__9VuXhvyAHqhtQPEvzSVqHW"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:05.603Z|1565868185512_jjZav6SpZJfr6oQ7mWHnok||1|computeFormulasAndSave|saveObjects: {"_id":"A~~c__9VuXhvyAHqhtQPEvzSVqHW","b":"B~~1","val":2}, {"_id":"B~~1","sum__":5,"x__":95}
2019-08-15T11:23:05.633Z|1565868185512_jjZav6SpZJfr6oQ7mWHnok||1|FINISH|{"clientId_":"dxBZAUw8r1tH4PP7RzHE4t","state_":"BEGIN","obj":{"_id":"A~~c__9VuXhvyAHqhtQPEvzSVqHW","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565868185512_jjZav6SpZJfr6oQ7mWHnok"}
2019-08-15T11:23:05.639Z|1565868185639_s3LmYwaJrbDs7AtoaYD6fQ|BEGIN|{"clientId_":"aLayKA77Fs9hgeYu7Zgytq","state_":"BEGIN","obj":{"_id":"A~~c__","b":"B~~1","val":3},"type_":"[form] ServerEventModifiedFormData","_id":"1565868185639_s3LmYwaJrbDs7AtoaYD6fQ"}
2019-08-15T11:23:05.642Z|1565868185639_s3LmYwaJrbDs7AtoaYD6fQ||1|addObj|0ms; level=0|A~~c__4mDwuLGwpWY3EFk4hq9g5n/{"newObj":{"_id":"A~~c__4mDwuLGwpWY3EFk4hq9g5n","b":"B~~1","val":3},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:05.678Z|1565868185639_s3LmYwaJrbDs7AtoaYD6fQ||1|preComputeFormula|A~~c__4mDwuLGwpWY3EFk4hq9g5n --> B~~1[sum__] = 8 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":8}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:05.679Z|1565868185639_s3LmYwaJrbDs7AtoaYD6fQ||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 92
2019-08-15T11:23:05.679Z|1565868185639_s3LmYwaJrbDs7AtoaYD6fQ||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":8,"x__":92},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~c__4mDwuLGwpWY3EFk4hq9g5n"],"value":3}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":8}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:05.680Z|1565868185639_s3LmYwaJrbDs7AtoaYD6fQ|0|objIds: ["A~~c__4mDwuLGwpWY3EFk4hq9g5n","B~~1","MAP:B~~1\u0001A~~c__4mDwuLGwpWY3EFk4hq9g5n","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:05.681Z|1565868185639_s3LmYwaJrbDs7AtoaYD6fQ|0|executing transaction
2019-08-15T11:23:05.682Z|1565868185639_s3LmYwaJrbDs7AtoaYD6fQ||1|addObj|0ms; level=0|A~~c__4mDwuLGwpWY3EFk4hq9g5n/{"newObj":{"_id":"A~~c__4mDwuLGwpWY3EFk4hq9g5n","b":"B~~1","val":3},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:05.715Z|1565868185639_s3LmYwaJrbDs7AtoaYD6fQ||1|preComputeFormula|A~~c__4mDwuLGwpWY3EFk4hq9g5n --> B~~1[sum__] = 8 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":8}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:05.716Z|1565868185639_s3LmYwaJrbDs7AtoaYD6fQ||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 92
2019-08-15T11:23:05.717Z|1565868185639_s3LmYwaJrbDs7AtoaYD6fQ||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":8,"x__":92},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~c__4mDwuLGwpWY3EFk4hq9g5n"],"value":3}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":8}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:05.718Z|1565868185639_s3LmYwaJrbDs7AtoaYD6fQ||1|computeFormulasAndSave|saveObjects: {"_id":"A~~c__4mDwuLGwpWY3EFk4hq9g5n","b":"B~~1","val":3}, {"_id":"B~~1","sum__":8,"x__":92}
2019-08-15T11:23:05.751Z|1565868185639_s3LmYwaJrbDs7AtoaYD6fQ||1|FINISH|{"clientId_":"aLayKA77Fs9hgeYu7Zgytq","state_":"BEGIN","obj":{"_id":"A~~c__4mDwuLGwpWY3EFk4hq9g5n","b":"B~~1","val":3},"type_":"[form] ServerEventModifiedFormData","_id":"1565868185639_s3LmYwaJrbDs7AtoaYD6fQ"}
2019-08-15T11:23:05.758Z|1565868185758_fYesJAixthakQQm7d7HzFm|BEGIN|{"clientId_":"vHGV8ji5t43HovMyqShz7J","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":4},"type_":"[form] ServerEventModifiedFormData","_id":"1565868185758_fYesJAixthakQQm7d7HzFm"}
2019-08-15T11:23:05.776Z|1565868185758_fYesJAixthakQQm7d7HzFm||1|addObj|0ms; level=0|A~~2/{"newObj":{"_id":"A~~2","b":"B~~1","val":4},"oldObj":{"_id":"A~~2","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:05.831Z|1565868185758_fYesJAixthakQQm7d7HzFm||1|preComputeFormula|A~~2 --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:05.831Z|1565868185758_fYesJAixthakQQm7d7HzFm||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-15T11:23:05.832Z|1565868185758_fYesJAixthakQQm7d7HzFm||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":8,"x__":92},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":4}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:05.833Z|1565868185758_fYesJAixthakQQm7d7HzFm|0|objIds: ["A~~2","B~~1","MAP:B~~1\u0001A~~2","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:05.834Z|1565868185758_fYesJAixthakQQm7d7HzFm|0|executing transaction
2019-08-15T11:23:05.838Z|1565868185758_fYesJAixthakQQm7d7HzFm||1|addObj|0ms; level=0|A~~2/{"newObj":{"_id":"A~~2","b":"B~~1","val":4},"oldObj":{"_id":"A~~2","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:05.894Z|1565868185758_fYesJAixthakQQm7d7HzFm||1|preComputeFormula|A~~2 --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:05.895Z|1565868185758_fYesJAixthakQQm7d7HzFm||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-15T11:23:05.895Z|1565868185758_fYesJAixthakQQm7d7HzFm||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":8,"x__":92},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":4}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:05.896Z|1565868185758_fYesJAixthakQQm7d7HzFm||1|computeFormulasAndSave|saveObjects: {"_id":"A~~2","b":"B~~1","val":4}, {"_id":"B~~1","sum__":10,"x__":90}
2019-08-15T11:23:05.931Z|1565868185758_fYesJAixthakQQm7d7HzFm||1|FINISH|{"clientId_":"vHGV8ji5t43HovMyqShz7J","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":4},"type_":"[form] ServerEventModifiedFormData","_id":"1565868185758_fYesJAixthakQQm7d7HzFm"}
2019-08-15T11:23:05.936Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6|BEGIN|{"clientId_":"gqi71XacgcL7Jy3y1WyqW2","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":95},"type_":"[form] ServerEventModifiedFormData","_id":"1565868185936_xzPPaVVJuFs6oQmh8uFDa6"}
2019-08-15T11:23:05.938Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||1|addObj|0ms; level=0|A~~rHzJyytQLPUsivrHkDqdR1/{"newObj":{"_id":"A~~rHzJyytQLPUsivrHkDqdR1","b":"B~~1","val":95},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:05.969Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||1|computeAutoCorrections: A~~rHzJyytQLPUsivrHkDqdR1[val] = [MAX(0, val + $ROW$.x__)] = 90
2019-08-15T11:23:05.970Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||1|computeAutoCorrections: A~~rHzJyytQLPUsivrHkDqdR1[err] = [ABS($OLD$.val - val)] = 5
2019-08-15T11:23:05.971Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||2|addObj|0ms; level=0|A~~rHzJyytQLPUsivrHkDqdR1/{"newObj":{"_id":"A~~rHzJyytQLPUsivrHkDqdR1","b":"B~~1","val":90,"err":5},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:06.004Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||2|preComputeFormula|A~~rHzJyytQLPUsivrHkDqdR1 --> B~~1[sum__] = 100 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":100}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:06.004Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||2|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 0
2019-08-15T11:23:06.005Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||2|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":100,"x__":0},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~rHzJyytQLPUsivrHkDqdR1"],"value":90}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":100}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:06.006Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6|0|objIds: ["A~~rHzJyytQLPUsivrHkDqdR1","B~~1","MAP:B~~1\u0001A~~rHzJyytQLPUsivrHkDqdR1","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:06.011Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6|0|executing transaction
2019-08-15T11:23:06.012Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||1|addObj|0ms; level=0|A~~rHzJyytQLPUsivrHkDqdR1/{"newObj":{"_id":"A~~rHzJyytQLPUsivrHkDqdR1","b":"B~~1","val":95,"err":5},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:06.039Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||1|computeAutoCorrections: A~~rHzJyytQLPUsivrHkDqdR1[val] = [MAX(0, val + $ROW$.x__)] = 90
2019-08-15T11:23:06.040Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||1|computeAutoCorrections: A~~rHzJyytQLPUsivrHkDqdR1[err] = [ABS($OLD$.val - val)] = 5
2019-08-15T11:23:06.041Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||2|addObj|0ms; level=0|A~~rHzJyytQLPUsivrHkDqdR1/{"newObj":{"_id":"A~~rHzJyytQLPUsivrHkDqdR1","b":"B~~1","val":90,"err":5},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:06.069Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||2|preComputeFormula|A~~rHzJyytQLPUsivrHkDqdR1 --> B~~1[sum__] = 100 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":100}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:06.070Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||2|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 0
2019-08-15T11:23:06.070Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||2|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":100,"x__":0},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~rHzJyytQLPUsivrHkDqdR1"],"value":90}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":100}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:06.070Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||2|computeFormulasAndSave|saveObjects: {"_id":"A~~rHzJyytQLPUsivrHkDqdR1","b":"B~~1","val":90,"err":5}, {"_id":"B~~1","sum__":100,"x__":0}
2019-08-15T11:23:06.091Z|1565868185936_xzPPaVVJuFs6oQmh8uFDa6||2|FINISH|{"clientId_":"gqi71XacgcL7Jy3y1WyqW2","state_":"BEGIN","obj":{"_id":"A~~rHzJyytQLPUsivrHkDqdR1","b":"B~~1","val":90,"err":5},"type_":"[form] ServerEventModifiedFormData","_id":"1565868185936_xzPPaVVJuFs6oQmh8uFDa6"}
2019-08-15T11:23:06.098Z|1565868186098_oxJXVj9r8Pd1Vn515LBPqi|BEGIN|{"clientId_":"96FeiJxrCC9yhxzLvHHw28","state_":"BEGIN","obj":{"_id":"A~~rHzJyytQLPUsivrHkDqdR1","b":"B~~1","val":90,"err":5},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565868186098_oxJXVj9r8Pd1Vn515LBPqi"}
2019-08-15T11:23:06.110Z|1565868186098_oxJXVj9r8Pd1Vn515LBPqi||1|addObj|0ms; level=0|A~~rHzJyytQLPUsivrHkDqdR1/{"newObj":null,"oldObj":{"_id":"A~~rHzJyytQLPUsivrHkDqdR1","b":"B~~1","val":90,"err":5},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:06.137Z|1565868186098_oxJXVj9r8Pd1Vn515LBPqi||1|preComputeFormula|A~~rHzJyytQLPUsivrHkDqdR1 --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:06.137Z|1565868186098_oxJXVj9r8Pd1Vn515LBPqi||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-15T11:23:06.138Z|1565868186098_oxJXVj9r8Pd1Vn515LBPqi||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":100,"x__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~rHzJyytQLPUsivrHkDqdR1"]],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:06.138Z|1565868186098_oxJXVj9r8Pd1Vn515LBPqi|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~rHzJyytQLPUsivrHkDqdR1","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:06.139Z|1565868186098_oxJXVj9r8Pd1Vn515LBPqi|0|executing transaction
2019-08-15T11:23:06.153Z|1565868186098_oxJXVj9r8Pd1Vn515LBPqi||1|addObj|0ms; level=0|A~~rHzJyytQLPUsivrHkDqdR1/{"newObj":null,"oldObj":{"_id":"A~~rHzJyytQLPUsivrHkDqdR1","b":"B~~1","val":90,"err":5},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:06.181Z|1565868186098_oxJXVj9r8Pd1Vn515LBPqi||1|preComputeFormula|A~~rHzJyytQLPUsivrHkDqdR1 --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:06.181Z|1565868186098_oxJXVj9r8Pd1Vn515LBPqi||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-15T11:23:06.181Z|1565868186098_oxJXVj9r8Pd1Vn515LBPqi||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":100,"x__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~rHzJyytQLPUsivrHkDqdR1"]],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:06.182Z|1565868186098_oxJXVj9r8Pd1Vn515LBPqi||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":10,"x__":90}
2019-08-15T11:23:06.226Z|1565868186098_oxJXVj9r8Pd1Vn515LBPqi||1|FINISH|{"clientId_":"96FeiJxrCC9yhxzLvHHw28","state_":"BEGIN","obj":{"_id":"A~~rHzJyytQLPUsivrHkDqdR1","b":"B~~1","val":90,"err":5},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565868186098_oxJXVj9r8Pd1Vn515LBPqi"}
2019-08-15T11:23:06.233Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA|BEGIN|{"clientId_":"bnKSiYVyihD8Dc4hBVi63s","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":295},"type_":"[form] ServerEventModifiedFormData","_id":"1565868186233_cpsfTH22CEq53Vi9cdc4tA"}
2019-08-15T11:23:06.235Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||1|addObj|0ms; level=0|A~~5p9HqYmwHHRASpdJh1XAHm/{"newObj":{"_id":"A~~5p9HqYmwHHRASpdJh1XAHm","b":"B~~1","val":295},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:06.274Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||1|computeAutoCorrections: A~~5p9HqYmwHHRASpdJh1XAHm[val] = [MAX(0, val + $ROW$.x__)] = 90
2019-08-15T11:23:06.275Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||1|computeAutoCorrections: A~~5p9HqYmwHHRASpdJh1XAHm[err] = [ABS($OLD$.val - val)] = 205
2019-08-15T11:23:06.276Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||2|addObj|0ms; level=0|A~~5p9HqYmwHHRASpdJh1XAHm/{"newObj":{"_id":"A~~5p9HqYmwHHRASpdJh1XAHm","b":"B~~1","val":90,"err":205},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:06.326Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||2|preComputeFormula|A~~5p9HqYmwHHRASpdJh1XAHm --> B~~1[sum__] = 100 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":100}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:06.326Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||2|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 0
2019-08-15T11:23:06.327Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||2|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":100,"x__":0},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~5p9HqYmwHHRASpdJh1XAHm"],"value":90}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":100}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:06.329Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA|0|objIds: ["A~~5p9HqYmwHHRASpdJh1XAHm","B~~1","MAP:B~~1\u0001A~~5p9HqYmwHHRASpdJh1XAHm","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:06.330Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA|0|executing transaction
2019-08-15T11:23:06.332Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||1|addObj|0ms; level=0|A~~5p9HqYmwHHRASpdJh1XAHm/{"newObj":{"_id":"A~~5p9HqYmwHHRASpdJh1XAHm","b":"B~~1","val":295,"err":205},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:06.380Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||1|computeAutoCorrections: A~~5p9HqYmwHHRASpdJh1XAHm[val] = [MAX(0, val + $ROW$.x__)] = 90
2019-08-15T11:23:06.380Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||1|computeAutoCorrections: A~~5p9HqYmwHHRASpdJh1XAHm[err] = [ABS($OLD$.val - val)] = 205
2019-08-15T11:23:06.381Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||2|addObj|0ms; level=0|A~~5p9HqYmwHHRASpdJh1XAHm/{"newObj":{"_id":"A~~5p9HqYmwHHRASpdJh1XAHm","b":"B~~1","val":90,"err":205},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:06.429Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||2|preComputeFormula|A~~5p9HqYmwHHRASpdJh1XAHm --> B~~1[sum__] = 100 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":100}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:06.430Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||2|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 0
2019-08-15T11:23:06.431Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||2|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":100,"x__":0},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~5p9HqYmwHHRASpdJh1XAHm"],"value":90}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":100}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:06.433Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||2|computeFormulasAndSave|saveObjects: {"_id":"A~~5p9HqYmwHHRASpdJh1XAHm","b":"B~~1","val":90,"err":205}, {"_id":"B~~1","sum__":100,"x__":0}
2019-08-15T11:23:06.481Z|1565868186233_cpsfTH22CEq53Vi9cdc4tA||2|FINISH|{"clientId_":"bnKSiYVyihD8Dc4hBVi63s","state_":"BEGIN","obj":{"_id":"A~~5p9HqYmwHHRASpdJh1XAHm","b":"B~~1","val":90,"err":205},"type_":"[form] ServerEventModifiedFormData","_id":"1565868186233_cpsfTH22CEq53Vi9cdc4tA"}
2019-08-15T11:23:06.500Z|1565868186499_tMSivF9LeG2PKQwXKfJXm|BEGIN|{"clientId_":"sM3pRQQFfXN1wXpKBQ1KQF","state_":"BEGIN","obj":{"_id":"A~~5p9HqYmwHHRASpdJh1XAHm","b":"B~~1","val":90,"err":205},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565868186499_tMSivF9LeG2PKQwXKfJXm"}
2019-08-15T11:23:06.521Z|1565868186499_tMSivF9LeG2PKQwXKfJXm||1|addObj|0ms; level=0|A~~5p9HqYmwHHRASpdJh1XAHm/{"newObj":null,"oldObj":{"_id":"A~~5p9HqYmwHHRASpdJh1XAHm","b":"B~~1","val":90,"err":205},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:06.581Z|1565868186499_tMSivF9LeG2PKQwXKfJXm||1|preComputeFormula|A~~5p9HqYmwHHRASpdJh1XAHm --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:06.582Z|1565868186499_tMSivF9LeG2PKQwXKfJXm||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-15T11:23:06.582Z|1565868186499_tMSivF9LeG2PKQwXKfJXm||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":100,"x__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~5p9HqYmwHHRASpdJh1XAHm"]],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:06.583Z|1565868186499_tMSivF9LeG2PKQwXKfJXm|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~5p9HqYmwHHRASpdJh1XAHm","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:06.584Z|1565868186499_tMSivF9LeG2PKQwXKfJXm|0|executing transaction
2019-08-15T11:23:06.617Z|1565868186499_tMSivF9LeG2PKQwXKfJXm||1|addObj|0ms; level=0|A~~5p9HqYmwHHRASpdJh1XAHm/{"newObj":null,"oldObj":{"_id":"A~~5p9HqYmwHHRASpdJh1XAHm","b":"B~~1","val":90,"err":205},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:06.676Z|1565868186499_tMSivF9LeG2PKQwXKfJXm||1|preComputeFormula|A~~5p9HqYmwHHRASpdJh1XAHm --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:06.676Z|1565868186499_tMSivF9LeG2PKQwXKfJXm||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-15T11:23:06.677Z|1565868186499_tMSivF9LeG2PKQwXKfJXm||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":100,"x__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~5p9HqYmwHHRASpdJh1XAHm"]],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:06.678Z|1565868186499_tMSivF9LeG2PKQwXKfJXm||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":10,"x__":90}
2019-08-15T11:23:06.749Z|1565868186499_tMSivF9LeG2PKQwXKfJXm||1|FINISH|{"clientId_":"sM3pRQQFfXN1wXpKBQ1KQF","state_":"BEGIN","obj":{"_id":"A~~5p9HqYmwHHRASpdJh1XAHm","b":"B~~1","val":90,"err":205},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565868186499_tMSivF9LeG2PKQwXKfJXm"}
2019-08-15T11:23:06.751Z|1565868186751_g7F3QVQ1vg29o42zGjSFme|BEGIN|{"clientId_":"aFEFBmbcKAqEfZTYMcPPAt","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":4},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565868186751_g7F3QVQ1vg29o42zGjSFme"}
2019-08-15T11:23:06.775Z|1565868186751_g7F3QVQ1vg29o42zGjSFme||1|addObj|0ms; level=0|A~~2/{"newObj":null,"oldObj":{"_id":"A~~2","b":"B~~1","val":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:06.847Z|1565868186751_g7F3QVQ1vg29o42zGjSFme||1|preComputeFormula|A~~2 --> B~~1[sum__] = 6 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":6}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:06.848Z|1565868186751_g7F3QVQ1vg29o42zGjSFme||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 94
2019-08-15T11:23:06.849Z|1565868186751_g7F3QVQ1vg29o42zGjSFme||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":6,"x__":94},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~2"]],"reduce":[{"key":["B~~1"],"value":6}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:06.850Z|1565868186751_g7F3QVQ1vg29o42zGjSFme|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~2","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:06.851Z|1565868186751_g7F3QVQ1vg29o42zGjSFme|0|executing transaction
2019-08-15T11:23:06.874Z|1565868186751_g7F3QVQ1vg29o42zGjSFme||1|addObj|0ms; level=0|A~~2/{"newObj":null,"oldObj":{"_id":"A~~2","b":"B~~1","val":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:06.946Z|1565868186751_g7F3QVQ1vg29o42zGjSFme||1|preComputeFormula|A~~2 --> B~~1[sum__] = 6 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":6}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:06.947Z|1565868186751_g7F3QVQ1vg29o42zGjSFme||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 94
2019-08-15T11:23:06.948Z|1565868186751_g7F3QVQ1vg29o42zGjSFme||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":6,"x__":94},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~2"]],"reduce":[{"key":["B~~1"],"value":6}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:06.949Z|1565868186751_g7F3QVQ1vg29o42zGjSFme||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":6,"x__":94}
2019-08-15T11:23:07.027Z|1565868186751_g7F3QVQ1vg29o42zGjSFme||1|FINISH|{"clientId_":"aFEFBmbcKAqEfZTYMcPPAt","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":4},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565868186751_g7F3QVQ1vg29o42zGjSFme"}
2019-08-15T11:23:07.039Z|1565868187039_kgfYvJC8upfXStW8oh6qLA|BEGIN|{"clientId_":"2HNMiueX4DosXibvtEKQww","state_":"BEGIN","obj":{"_id":"A~~1","b":"B~~1","val":1},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565868187039_kgfYvJC8upfXStW8oh6qLA"}
2019-08-15T11:23:07.064Z|1565868187039_kgfYvJC8upfXStW8oh6qLA||1|addObj|0ms; level=0|A~~1/{"newObj":null,"oldObj":{"_id":"A~~1","b":"B~~1","val":1},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:07.139Z|1565868187039_kgfYvJC8upfXStW8oh6qLA||1|preComputeFormula|A~~1 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:07.139Z|1565868187039_kgfYvJC8upfXStW8oh6qLA||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-15T11:23:07.141Z|1565868187039_kgfYvJC8upfXStW8oh6qLA||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":6,"x__":94},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~1"]],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:07.143Z|1565868187039_kgfYvJC8upfXStW8oh6qLA|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~1","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:07.145Z|1565868187039_kgfYvJC8upfXStW8oh6qLA|0|executing transaction
2019-08-15T11:23:07.171Z|1565868187039_kgfYvJC8upfXStW8oh6qLA||1|addObj|0ms; level=0|A~~1/{"newObj":null,"oldObj":{"_id":"A~~1","b":"B~~1","val":1},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:07.233Z|1565868187039_kgfYvJC8upfXStW8oh6qLA||1|preComputeFormula|A~~1 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:07.233Z|1565868187039_kgfYvJC8upfXStW8oh6qLA||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-15T11:23:07.234Z|1565868187039_kgfYvJC8upfXStW8oh6qLA||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":6,"x__":94},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~1"]],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:07.235Z|1565868187039_kgfYvJC8upfXStW8oh6qLA||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":5,"x__":95}
2019-08-15T11:23:07.309Z|1565868187039_kgfYvJC8upfXStW8oh6qLA||1|FINISH|{"clientId_":"2HNMiueX4DosXibvtEKQww","state_":"BEGIN","obj":{"_id":"A~~1","b":"B~~1","val":1},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565868187039_kgfYvJC8upfXStW8oh6qLA"}
2019-08-15T11:23:07.322Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7|BEGIN|{"clientId_":"r7kTA5F984ue9y3E1iS3hA","state_":"BEGIN","obj":{"_id":"C~~c"},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565868187322_uv9WPijQik6Zq6wyXEnrS7"}
2019-08-15T11:23:07.379Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|addObj|0ms; level=0|A~~c__4mDwuLGwpWY3EFk4hq9g5n/{"newObj":null,"oldObj":{"_id":"A~~c__4mDwuLGwpWY3EFk4hq9g5n","b":"B~~1","val":3},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:07.449Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|preComputeFormula|A~~c__4mDwuLGwpWY3EFk4hq9g5n --> B~~1[sum__] = 2 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":2}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:07.450Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 98
2019-08-15T11:23:07.451Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":2,"x__":98},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~c__4mDwuLGwpWY3EFk4hq9g5n"]],"reduce":[{"key":["B~~1"],"value":2}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:07.452Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~c__4mDwuLGwpWY3EFk4hq9g5n","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:07.453Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__|0|executing transaction
2019-08-15T11:23:07.476Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|addObj|0ms; level=0|A~~c__4mDwuLGwpWY3EFk4hq9g5n/{"newObj":null,"oldObj":{"_id":"A~~c__4mDwuLGwpWY3EFk4hq9g5n","b":"B~~1","val":3},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:07.550Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|preComputeFormula|A~~c__4mDwuLGwpWY3EFk4hq9g5n --> B~~1[sum__] = 2 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":2}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:07.551Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 98
2019-08-15T11:23:07.552Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":2,"x__":98},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~c__4mDwuLGwpWY3EFk4hq9g5n"]],"reduce":[{"key":["B~~1"],"value":2}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:07.554Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":2,"x__":98}
2019-08-15T11:23:07.620Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|FINISH|{"clientId_":"p6NckZPReutRuQwAwCg3it","state_":"BEGIN","obj":{"_id":"A~~c__4mDwuLGwpWY3EFk4hq9g5n","b":"B~~1","val":3},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565868187322_uv9WPijQik6Zq6wyXEnrS7__"}
2019-08-15T11:23:07.637Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|addObj|0ms; level=0|A~~c__9VuXhvyAHqhtQPEvzSVqHW/{"newObj":null,"oldObj":{"_id":"A~~c__9VuXhvyAHqhtQPEvzSVqHW","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:07.686Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|preComputeFormula|A~~c__9VuXhvyAHqhtQPEvzSVqHW --> B~~1[sum__] = 0 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":0}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:07.686Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 100
2019-08-15T11:23:07.687Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":0,"x__":100},"oldObj":{"_id":"B~~1","sum__":2,"x__":98},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~c__9VuXhvyAHqhtQPEvzSVqHW"]],"reduce":[],"reduceDelete":[["B~~1"]]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:07.688Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~c__9VuXhvyAHqhtQPEvzSVqHW","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:07.689Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__|0|executing transaction
2019-08-15T11:23:07.703Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|addObj|0ms; level=0|A~~c__9VuXhvyAHqhtQPEvzSVqHW/{"newObj":null,"oldObj":{"_id":"A~~c__9VuXhvyAHqhtQPEvzSVqHW","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:07.737Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|preComputeFormula|A~~c__9VuXhvyAHqhtQPEvzSVqHW --> B~~1[sum__] = 0 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":0}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:07.737Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 100
2019-08-15T11:23:07.738Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":0,"x__":100},"oldObj":{"_id":"B~~1","sum__":2,"x__":98},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~c__9VuXhvyAHqhtQPEvzSVqHW"]],"reduce":[],"reduceDelete":[["B~~1"]]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:07.739Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":0,"x__":100}
2019-08-15T11:23:07.792Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7__||1|FINISH|{"clientId_":"5pf2UGg7gQEs3xFMFZf66i","state_":"BEGIN","obj":{"_id":"A~~c__9VuXhvyAHqhtQPEvzSVqHW","b":"B~~1","val":2},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565868187322_uv9WPijQik6Zq6wyXEnrS7__"}
2019-08-15T11:23:07.792Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7||1|addObj|0ms; level=0|C~~c/{"newObj":null,"oldObj":{"_id":"C~~c"},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:07.793Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7|0|objIds: []|conflicts: []
2019-08-15T11:23:07.794Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7|0|executing transaction
2019-08-15T11:23:07.812Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7||1|addObj|0ms; level=0|C~~c/{"newObj":null,"oldObj":{"_id":"C~~c"},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:07.813Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7||1|computeFormulasAndSave|saveObjects:
2019-08-15T11:23:07.825Z|1565868187322_uv9WPijQik6Zq6wyXEnrS7||1|FINISH|{"clientId_":"r7kTA5F984ue9y3E1iS3hA","state_":"BEGIN","obj":{"_id":"C~~c"},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565868187322_uv9WPijQik6Zq6wyXEnrS7"}
  FrmdbEngine
    ✓ Should allow basic formulas computation when saving an object with auto-correct (3 secs)
Droping all tables
Tables droped
frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id])
stockReservationSchema.entities.B.props.sum__.compiledFormula_= undefined
stockReservationSchema.entities.B.props.x__.formula= 100 - sum__
init store...
Starting FormulaDBEngine...
2019-08-15T11:23:08.017Z|1565868188017_7thogNbqsfoAPoAUbbpa2U|BEGIN|{"clientId_":"u8SXmjAThSVxens3FENprP","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565868188017_7thogNbqsfoAPoAUbbpa2U"}
2019-08-15T11:23:08.019Z|1565868188017_7thogNbqsfoAPoAUbbpa2U||1|addObj|0ms; level=0|A~~ZPgeV4cWXSAsAYLcNU5MQ/{"newObj":{"_id":"A~~ZPgeV4cWXSAsAYLcNU5MQ","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:08.064Z|1565868188017_7thogNbqsfoAPoAUbbpa2U||1|preComputeFormula|A~~ZPgeV4cWXSAsAYLcNU5MQ --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:08.065Z|1565868188017_7thogNbqsfoAPoAUbbpa2U||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-15T11:23:08.066Z|1565868188017_7thogNbqsfoAPoAUbbpa2U||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~ZPgeV4cWXSAsAYLcNU5MQ"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:08.068Z|1565868188017_7thogNbqsfoAPoAUbbpa2U|0|objIds: ["A~~ZPgeV4cWXSAsAYLcNU5MQ","B~~1","MAP:B~~1\u0001A~~ZPgeV4cWXSAsAYLcNU5MQ","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:08.069Z|1565868188017_7thogNbqsfoAPoAUbbpa2U|0|executing transaction
2019-08-15T11:23:08.071Z|1565868188017_7thogNbqsfoAPoAUbbpa2U||1|addObj|0ms; level=0|A~~ZPgeV4cWXSAsAYLcNU5MQ/{"newObj":{"_id":"A~~ZPgeV4cWXSAsAYLcNU5MQ","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:08.115Z|1565868188017_7thogNbqsfoAPoAUbbpa2U||1|preComputeFormula|A~~ZPgeV4cWXSAsAYLcNU5MQ --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:08.117Z|1565868188017_7thogNbqsfoAPoAUbbpa2U||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-15T11:23:08.118Z|1565868188017_7thogNbqsfoAPoAUbbpa2U||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~ZPgeV4cWXSAsAYLcNU5MQ"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:08.119Z|1565868188017_7thogNbqsfoAPoAUbbpa2U||1|computeFormulasAndSave|saveObjects: {"_id":"A~~ZPgeV4cWXSAsAYLcNU5MQ","b":"B~~1","val":2}, {"_id":"B~~1","sum__":5,"x__":95}
2019-08-15T11:23:08.160Z|1565868188017_7thogNbqsfoAPoAUbbpa2U||1|FINISH|{"clientId_":"u8SXmjAThSVxens3FENprP","state_":"BEGIN","obj":{"_id":"A~~ZPgeV4cWXSAsAYLcNU5MQ","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565868188017_7thogNbqsfoAPoAUbbpa2U"}
2019-08-15T11:23:08.173Z|1565868188173_nQqtzw71r6oXhKoCrH9Xmo|BEGIN|{"_id":"1565868188173_nQqtzw71r6oXhKoCrH9Xmo","type_":"[entity] ServerEventPreviewFormula","targetEntity":{"_id":"B","props":{"_id":{"name":"_id","propType_":"STRING"},"sum__":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id])"},"x__":{"name":"x__","propType_":"FORMULA","formula":"100 - sum__"}},"validations":{"positiveX":{"conditionExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":8,"origExpr":"x__ >= 0","operator":">=","left":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"x__","name":"x__"},"right":{"type":"NumberLiteral","startIndex":7,"endIndex":8,"origExpr":"0","value":0,"raw":"0"}}}}},"targetPropertyName":"x__","formula":"200 - sum__","currentDataObj":{"_id":"B~~1","sum__":5,"x__":95},"state_":"BEGIN","clientId_":"ABC"}
2019-08-15T11:23:08.182Z|1565868188182_msHz1oitad7onpsczs3Py9|BEGIN|{"_id":"1565868188182_msHz1oitad7onpsczs3Py9","type_":"[entity] ServerEventPreviewFormula","targetEntity":{"_id":"B","props":{"_id":{"name":"_id","propType_":"STRING"},"sum__":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id])"},"x__":{"name":"x__","propType_":"FORMULA","formula":"100 - sum__"}},"validations":{"positiveX":{"conditionExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":8,"origExpr":"x__ >= 0","operator":">=","left":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"x__","name":"x__"},"right":{"type":"NumberLiteral","startIndex":7,"endIndex":8,"origExpr":"0","value":0,"raw":"0"}}}}},"targetPropertyName":"sum__","formula":"SUMIF(A.val, b == @[_id]) + COUNTIF(A.val, b == @[_id])","currentDataObj":{"_id":"B~~1","sum__":5,"x__":95},"state_":"BEGIN","clientId_":"ABC"}
    ✓ Should allow preview formulas (0.353 sec)
Droping all tables
Tables droped
frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id])
stockReservationSchema.entities.B.props.sum__.compiledFormula_= undefined
stockReservationSchema.entities.B.props.x__.formula= 100 - sum__
init store...
Starting FormulaDBEngine...
2019-08-15T11:23:08.371Z|1565868188371_sjw7SnhxzvWVengHvskvDD|BEGIN|{"clientId_":"pJGsLJmbN42rGqBWTpew89","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565868188371_sjw7SnhxzvWVengHvskvDD"}
2019-08-15T11:23:08.374Z|1565868188371_sjw7SnhxzvWVengHvskvDD||1|addObj|0ms; level=0|A~~4geFzy2jEZHZyA4TjUYJD1/{"newObj":{"_id":"A~~4geFzy2jEZHZyA4TjUYJD1","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:08.452Z|1565868188371_sjw7SnhxzvWVengHvskvDD||1|preComputeFormula|A~~4geFzy2jEZHZyA4TjUYJD1 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:08.453Z|1565868188371_sjw7SnhxzvWVengHvskvDD||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-15T11:23:08.454Z|1565868188371_sjw7SnhxzvWVengHvskvDD||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~4geFzy2jEZHZyA4TjUYJD1"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:08.455Z|1565868188371_sjw7SnhxzvWVengHvskvDD|0|objIds: ["A~~4geFzy2jEZHZyA4TjUYJD1","B~~1","MAP:B~~1\u0001A~~4geFzy2jEZHZyA4TjUYJD1","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:08.457Z|1565868188371_sjw7SnhxzvWVengHvskvDD|0|executing transaction
2019-08-15T11:23:08.458Z|1565868188371_sjw7SnhxzvWVengHvskvDD||1|addObj|0ms; level=0|A~~4geFzy2jEZHZyA4TjUYJD1/{"newObj":{"_id":"A~~4geFzy2jEZHZyA4TjUYJD1","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:08.529Z|1565868188371_sjw7SnhxzvWVengHvskvDD||1|preComputeFormula|A~~4geFzy2jEZHZyA4TjUYJD1 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-15T11:23:08.531Z|1565868188371_sjw7SnhxzvWVengHvskvDD||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-15T11:23:08.533Z|1565868188371_sjw7SnhxzvWVengHvskvDD||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~4geFzy2jEZHZyA4TjUYJD1"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:08.536Z|1565868188371_sjw7SnhxzvWVengHvskvDD||1|computeFormulasAndSave|saveObjects: {"_id":"A~~4geFzy2jEZHZyA4TjUYJD1","b":"B~~1","val":2}, {"_id":"B~~1","sum__":5,"x__":95}
2019-08-15T11:23:08.606Z|1565868188371_sjw7SnhxzvWVengHvskvDD||1|FINISH|{"clientId_":"pJGsLJmbN42rGqBWTpew89","state_":"BEGIN","obj":{"_id":"A~~4geFzy2jEZHZyA4TjUYJD1","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565868188371_sjw7SnhxzvWVengHvskvDD"}
2019-08-15T11:23:08.625Z|1565868188625_22i5kSCKNMd5YYFJbKg2wn|BEGIN|{"_id":"1565868188625_22i5kSCKNMd5YYFJbKg2wn","type_":"[entity] ServerEventSetProperty","targetEntity":{"_id":"B","props":{"_id":{"name":"_id","propType_":"STRING"},"sum__":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id])","compiledFormula_":{"type_":"CompiledFormulaN","rawExpr":{"type":"CallExpression","startIndex":0,"arguments":[{"type":"MemberExpression","startIndex":6,"computed":false,"object":{"type":"Identifier","startIndex":6,"endIndex":7,"origExpr":"A","name":"A"},"property":{"type":"Identifier","startIndex":8,"endIndex":11,"origExpr":"val","name":"val","belongsTo":"A"},"endIndex":11,"origExpr":"A.val"},{"type":"BinaryExpression","startIndex":13,"endIndex":24,"origExpr":"b == @[_id]","operator":"==","left":{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"},"right":{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}}],"callee":{"type":"Identifier","startIndex":0,"endIndex":5,"origExpr":"SUMIF","name":"SUMIF"},"endIndex":25,"origExpr":"SUMIF(A.val, b == @[_id])"},"finalExpression":{"type":"MemberExpression","startIndex":0,"computed":true,"object":{"type":"Identifier","startIndex":0,"endIndex":5,"origExpr":"$TRG$","name":"$TRG$"},"property":{"type":"StringLiteral","startIndex":6,"endIndex":41,"origExpr":"'vaggs-A-SUMIF(A.val, b == @[_id])'","value":"vaggs-A-SUMIF(A.val, b == @[_id])","raw":"'vaggs-A-SUMIF(A.val, b == @[_id])'"},"endIndex":42,"origExpr":"$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']"},"targetEntityName":"B","targetPropertyName":"sum__","triggers":[{"type_":"MapReduceTriggerN","rawExpr":{"type":"CallExpression","startIndex":0,"arguments":[{"type":"MemberExpression","startIndex":6,"computed":false,"object":{"type":"Identifier","startIndex":6,"endIndex":7,"origExpr":"A","name":"A"},"property":{"type":"Identifier","startIndex":8,"endIndex":11,"origExpr":"val","name":"val","belongsTo":"A"},"endIndex":11,"origExpr":"A.val"},{"type":"BinaryExpression","startIndex":13,"endIndex":24,"origExpr":"b == @[_id]","operator":"==","left":{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"},"right":{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}}],"callee":{"type":"Identifier","startIndex":0,"endIndex":5,"origExpr":"SUMIF","name":"SUMIF"},"endIndex":25,"origExpr":"SUMIF(A.val, b == @[_id])"},"mapreduceAggsOfManyObservablesQueryableFromOneObs":{"aggsViewName":"vaggs-A-SUMIF(A.val, b == @[_id])","map":{"entityName":"A","keyExpr":[{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"}],"valueExpr":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"val","name":"val"},"query":{"startkeyExpr":[{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}],"endkeyExpr":[{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}],"inclusive_start":true,"inclusive_end":true}},"reduceFun":{"name":"SumReduceFunN"}},"mapObserversImpactedByOneObservable":{"obsViewName":"vobs-B-SUMIF(A.val, b == @[_id])","entityName":"B","keyExpr":[{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}],"query":{"startkeyExpr":[{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"}],"endkeyExpr":[{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"}],"inclusive_start":true,"inclusive_end":true},"valueExpr":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"_id","name":"_id"}}}]}},"x__":{"name":"x__","propType_":"FORMULA","formula":"100 - sum__","compiledFormula_":{"type_":"CompiledFormulaN","rawExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":11,"origExpr":"100 - sum__","operator":"-","left":{"type":"NumberLiteral","startIndex":0,"endIndex":3,"origExpr":"100","value":100,"raw":"100"},"right":{"type":"Identifier","startIndex":6,"endIndex":11,"origExpr":"sum__","name":"sum__"}},"finalExpression":{"type":"BinaryExpression","startIndex":0,"endIndex":11,"origExpr":"100 - sum__","operator":"-","left":{"type":"NumberLiteral","startIndex":0,"endIndex":3,"origExpr":"100","value":100,"raw":"100"},"right":{"type":"Identifier","startIndex":6,"endIndex":11,"origExpr":"sum__","name":"sum__"}},"targetEntityName":"B","targetPropertyName":"x__"}}},"validations":{"positiveX":{"conditionExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":8,"origExpr":"x__ >= 0","operator":">=","left":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"x__","name":"x__"},"right":{"type":"NumberLiteral","startIndex":7,"endIndex":8,"origExpr":"0","value":0,"raw":"0"}}}}},"property":{"name":"x__","propType_":"FORMULA","formula":"200 - sum__"},"state_":"BEGIN","clientId_":"ABC"}
2019-08-15T11:23:08.718Z|1565868188625_22i5kSCKNMd5YYFJbKg2wn-1||computeFormulasAndSave| - selfFormula: B~~1[x__] = [200 - sum__] = 195
2019-08-15T11:23:08.720Z|1565868188625_22i5kSCKNMd5YYFJbKg2wn-1||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":195},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-15T11:23:08.722Z|1565868188625_22i5kSCKNMd5YYFJbKg2wn-1|0|objIds: ["B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:08.724Z|1565868188625_22i5kSCKNMd5YYFJbKg2wn-1|0|executing transaction
2019-08-15T11:23:08.764Z|1565868188625_22i5kSCKNMd5YYFJbKg2wn-1||computeFormulasAndSave| - selfFormula: B~~1[x__] = [200 - sum__] = 195
2019-08-15T11:23:08.765Z|1565868188625_22i5kSCKNMd5YYFJbKg2wn-1||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":195},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-15T11:23:08.766Z|1565868188625_22i5kSCKNMd5YYFJbKg2wn-1||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":5,"x__":195}
2019-08-15T11:23:08.794Z|1565868188625_22i5kSCKNMd5YYFJbKg2wn-1||1|FINISH|{"_id":"1565868188625_22i5kSCKNMd5YYFJbKg2wn-1","type_":"[form] ServerEventModifiedFormData","state_":"BEGIN","clientId_":"ABC","obj":{"_id":"B~~1","sum__":5,"x__":195}}
2019-08-15T11:23:08.810Z|1565868188810_9DskEv1XJuegnHp88vJH7f|BEGIN|{"_id":"1565868188810_9DskEv1XJuegnHp88vJH7f","type_":"[entity] ServerEventSetProperty","targetEntity":{"_id":"B","props":{"_id":{"name":"_id","propType_":"STRING"},"sum__":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id])","compiledFormula_":{"type_":"CompiledFormulaN","rawExpr":{"type":"CallExpression","startIndex":0,"arguments":[{"type":"MemberExpression","startIndex":6,"computed":false,"object":{"type":"Identifier","startIndex":6,"endIndex":7,"origExpr":"A","name":"A"},"property":{"type":"Identifier","startIndex":8,"endIndex":11,"origExpr":"val","name":"val","belongsTo":"A"},"endIndex":11,"origExpr":"A.val"},{"type":"BinaryExpression","startIndex":13,"endIndex":24,"origExpr":"b == @[_id]","operator":"==","left":{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"},"right":{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}}],"callee":{"type":"Identifier","startIndex":0,"endIndex":5,"origExpr":"SUMIF","name":"SUMIF"},"endIndex":25,"origExpr":"SUMIF(A.val, b == @[_id])"},"finalExpression":{"type":"MemberExpression","startIndex":0,"computed":true,"object":{"type":"Identifier","startIndex":0,"endIndex":5,"origExpr":"$TRG$","name":"$TRG$"},"property":{"type":"StringLiteral","startIndex":6,"endIndex":41,"origExpr":"'vaggs-A-SUMIF(A.val, b == @[_id])'","value":"vaggs-A-SUMIF(A.val, b == @[_id])","raw":"'vaggs-A-SUMIF(A.val, b == @[_id])'"},"endIndex":42,"origExpr":"$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']"},"targetEntityName":"B","targetPropertyName":"sum__","triggers":[{"type_":"MapReduceTriggerN","rawExpr":{"type":"CallExpression","startIndex":0,"arguments":[{"type":"MemberExpression","startIndex":6,"computed":false,"object":{"type":"Identifier","startIndex":6,"endIndex":7,"origExpr":"A","name":"A"},"property":{"type":"Identifier","startIndex":8,"endIndex":11,"origExpr":"val","name":"val","belongsTo":"A"},"endIndex":11,"origExpr":"A.val"},{"type":"BinaryExpression","startIndex":13,"endIndex":24,"origExpr":"b == @[_id]","operator":"==","left":{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"},"right":{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}}],"callee":{"type":"Identifier","startIndex":0,"endIndex":5,"origExpr":"SUMIF","name":"SUMIF"},"endIndex":25,"origExpr":"SUMIF(A.val, b == @[_id])"},"mapreduceAggsOfManyObservablesQueryableFromOneObs":{"aggsViewName":"vaggs-A-SUMIF(A.val, b == @[_id])","map":{"entityName":"A","keyExpr":[{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"}],"valueExpr":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"val","name":"val"},"query":{"startkeyExpr":[{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}],"endkeyExpr":[{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}],"inclusive_start":true,"inclusive_end":true}},"reduceFun":{"name":"SumReduceFunN"}},"mapObserversImpactedByOneObservable":{"obsViewName":"vobs-B-SUMIF(A.val, b == @[_id])","entityName":"B","keyExpr":[{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}],"query":{"startkeyExpr":[{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"}],"endkeyExpr":[{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"}],"inclusive_start":true,"inclusive_end":true},"valueExpr":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"_id","name":"_id"}}}]}},"x__":{"name":"x__","propType_":"FORMULA","formula":"200 - sum__","compiledFormula_":{"type_":"CompiledFormulaN","rawExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":11,"origExpr":"200 - sum__","operator":"-","left":{"type":"NumberLiteral","startIndex":0,"endIndex":3,"origExpr":"200","value":200,"raw":"200"},"right":{"type":"Identifier","startIndex":6,"endIndex":11,"origExpr":"sum__","name":"sum__"}},"finalExpression":{"type":"BinaryExpression","startIndex":0,"endIndex":11,"origExpr":"200 - sum__","operator":"-","left":{"type":"NumberLiteral","startIndex":0,"endIndex":3,"origExpr":"200","value":200,"raw":"200"},"right":{"type":"Identifier","startIndex":6,"endIndex":11,"origExpr":"sum__","name":"sum__"}},"targetEntityName":"B","targetPropertyName":"x__"}}},"validations":{"positiveX":{"conditionExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":8,"origExpr":"x__ >= 0","operator":">=","left":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"x__","name":"x__"},"right":{"type":"NumberLiteral","startIndex":7,"endIndex":8,"origExpr":"0","value":0,"raw":"0"}}}}},"property":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id]) + COUNTIF(A.val, b == @[_id])"},"state_":"BEGIN","clientId_":"ABC"}
2019-08-15T11:23:09.006Z|1565868188810_9DskEv1XJuegnHp88vJH7f-1||computeFormulasAndSave| - selfFormula: B~~1[x__] = [200 - sum__] = 192
2019-08-15T11:23:09.007Z|1565868188810_9DskEv1XJuegnHp88vJH7f-1||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":8,"x__":192},"oldObj":{"_id":"B~~1","sum__":5,"x__":195},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-15T11:23:09.007Z|1565868188810_9DskEv1XJuegnHp88vJH7f-1|0|objIds: ["B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:09.008Z|1565868188810_9DskEv1XJuegnHp88vJH7f-1|0|executing transaction
2019-08-15T11:23:09.031Z|1565868188810_9DskEv1XJuegnHp88vJH7f-1||computeFormulasAndSave| - selfFormula: B~~1[x__] = [200 - sum__] = 192
2019-08-15T11:23:09.031Z|1565868188810_9DskEv1XJuegnHp88vJH7f-1||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":8,"x__":192},"oldObj":{"_id":"B~~1","sum__":5,"x__":195},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-15T11:23:09.032Z|1565868188810_9DskEv1XJuegnHp88vJH7f-1||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":8,"x__":192}
2019-08-15T11:23:09.047Z|1565868188810_9DskEv1XJuegnHp88vJH7f-1||1|FINISH|{"_id":"1565868188810_9DskEv1XJuegnHp88vJH7f-1","type_":"[form] ServerEventModifiedFormData","state_":"BEGIN","clientId_":"ABC","obj":{"_id":"B~~1","sum__":8,"x__":192}}
2019-08-15T11:23:09.052Z|1565868189052_ngzBFGr4sPWT28QScEdqBw|BEGIN|{"clientId_":"vtbqU4LAR6JH3aoXjLQ1jH","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565868189052_ngzBFGr4sPWT28QScEdqBw"}
2019-08-15T11:23:09.054Z|1565868189052_ngzBFGr4sPWT28QScEdqBw||1|addObj|0ms; level=0|A~~i7kDs6YSUK92d64QtrVcdr/{"newObj":{"_id":"A~~i7kDs6YSUK92d64QtrVcdr","b":"B~~1","val":10},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:09.109Z|1565868189052_ngzBFGr4sPWT28QScEdqBw||1|preComputeFormula|A~~i7kDs6YSUK92d64QtrVcdr --> B~~1[sum__] = 19 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":15,"vaggs-A-COUNTIF(A.val, b == @[_id])":4}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-15T11:23:09.110Z|1565868189052_ngzBFGr4sPWT28QScEdqBw||1|preComputeFormula| - selfFormula: B~~1[x__] = [200 - sum__] = 181
2019-08-15T11:23:09.111Z|1565868189052_ngzBFGr4sPWT28QScEdqBw||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":19,"x__":181},"oldObj":{"_id":"B~~1","sum__":8,"x__":192},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~i7kDs6YSUK92d64QtrVcdr"],"value":10}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":15}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~i7kDs6YSUK92d64QtrVcdr"],"value":10}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":4}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:09.112Z|1565868189052_ngzBFGr4sPWT28QScEdqBw|0|objIds: ["A~~i7kDs6YSUK92d64QtrVcdr","B~~1","MAP:B~~1\u0001A~~i7kDs6YSUK92d64QtrVcdr","REDUCE:B~~1","MAP:B~~1\u0001A~~i7kDs6YSUK92d64QtrVcdr","REDUCE:B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:09.114Z|1565868189052_ngzBFGr4sPWT28QScEdqBw|0|executing transaction
2019-08-15T11:23:09.116Z|1565868189052_ngzBFGr4sPWT28QScEdqBw||1|addObj|0ms; level=0|A~~i7kDs6YSUK92d64QtrVcdr/{"newObj":{"_id":"A~~i7kDs6YSUK92d64QtrVcdr","b":"B~~1","val":10},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:09.179Z|1565868189052_ngzBFGr4sPWT28QScEdqBw||1|preComputeFormula|A~~i7kDs6YSUK92d64QtrVcdr --> B~~1[sum__] = 19 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":15,"vaggs-A-COUNTIF(A.val, b == @[_id])":4}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-15T11:23:09.179Z|1565868189052_ngzBFGr4sPWT28QScEdqBw||1|preComputeFormula| - selfFormula: B~~1[x__] = [200 - sum__] = 181
2019-08-15T11:23:09.179Z|1565868189052_ngzBFGr4sPWT28QScEdqBw||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":19,"x__":181},"oldObj":{"_id":"B~~1","sum__":8,"x__":192},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~i7kDs6YSUK92d64QtrVcdr"],"value":10}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":15}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~i7kDs6YSUK92d64QtrVcdr"],"value":10}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":4}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:09.180Z|1565868189052_ngzBFGr4sPWT28QScEdqBw||1|computeFormulasAndSave|saveObjects: {"_id":"A~~i7kDs6YSUK92d64QtrVcdr","b":"B~~1","val":10}, {"_id":"B~~1","sum__":19,"x__":181}
2019-08-15T11:23:09.227Z|1565868189052_ngzBFGr4sPWT28QScEdqBw||1|FINISH|{"clientId_":"vtbqU4LAR6JH3aoXjLQ1jH","state_":"BEGIN","obj":{"_id":"A~~i7kDs6YSUK92d64QtrVcdr","b":"B~~1","val":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565868189052_ngzBFGr4sPWT28QScEdqBw"}
    ✓ Should allow adding/modifying formulas (1 sec)
Droping all tables
Tables droped
frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id])
stockReservationSchema.entities.B.props.sum__.compiledFormula_= undefined
stockReservationSchema.entities.B.props.x__.formula= 100 - sum__
init store...
Starting FormulaDBEngine...
2019-08-15T11:23:09.290Z|1565868189290_5qJZhTVU9PAqwSbfLeoGrd|BEGIN|{"clientId_":"x4cUFDxsMV5VwazXgNUUoF","state_":"BEGIN","obj":{"_id":"B~~1","sum__":1,"x__":7},"type_":"[form] ServerEventModifiedFormData","_id":"1565868189290_5qJZhTVU9PAqwSbfLeoGrd"}
2019-08-15T11:23:09.326Z|1565868189290_5qJZhTVU9PAqwSbfLeoGrd||computeFormulasAndSave| - selfFormula: B~~1[x__] = [100 - sum__] = 100
2019-08-15T11:23:09.328Z|1565868189290_5qJZhTVU9PAqwSbfLeoGrd||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":0,"x__":100},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-15T11:23:09.331Z|1565868189290_5qJZhTVU9PAqwSbfLeoGrd|0|objIds: ["B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:09.332Z|1565868189290_5qJZhTVU9PAqwSbfLeoGrd|0|executing transaction
2019-08-15T11:23:09.376Z|1565868189290_5qJZhTVU9PAqwSbfLeoGrd||computeFormulasAndSave| - selfFormula: B~~1[x__] = [100 - sum__] = 100
2019-08-15T11:23:09.378Z|1565868189290_5qJZhTVU9PAqwSbfLeoGrd||1|addObj|1ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":0,"x__":100},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-15T11:23:09.379Z|1565868189290_5qJZhTVU9PAqwSbfLeoGrd||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":0,"x__":100}
2019-08-15T11:23:09.432Z|1565868189290_5qJZhTVU9PAqwSbfLeoGrd||1|FINISH|{"clientId_":"x4cUFDxsMV5VwazXgNUUoF","state_":"BEGIN","obj":{"_id":"B~~1","sum__":0,"x__":100},"type_":"[form] ServerEventModifiedFormData","_id":"1565868189290_5qJZhTVU9PAqwSbfLeoGrd"}
2019-08-15T11:23:09.434Z|1565868189434_xfss5D5VCJUo29pffjDmmJ|BEGIN|{"clientId_":"9RxxQffhdqXqdQMBVA39Hf","state_":"BEGIN","obj":{"_id":"A~~1","b":"B~~1","val":1},"type_":"[form] ServerEventModifiedFormData","_id":"1565868189434_xfss5D5VCJUo29pffjDmmJ"}
2019-08-15T11:23:09.453Z|1565868189434_xfss5D5VCJUo29pffjDmmJ||1|addObj|0ms; level=0|A~~1/{"newObj":{"_id":"A~~1","b":"B~~1","val":1},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:09.589Z|1565868189434_xfss5D5VCJUo29pffjDmmJ||1|preComputeFormula|A~~1 --> B~~1[sum__] = 2 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":1,"vaggs-A-COUNTIF(A.val, b == @[_id])":1}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-15T11:23:09.591Z|1565868189434_xfss5D5VCJUo29pffjDmmJ||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 98
2019-08-15T11:23:09.592Z|1565868189434_xfss5D5VCJUo29pffjDmmJ||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":2,"x__":98},"oldObj":{"_id":"B~~1","sum__":0,"x__":100},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~1"],"value":1}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":1}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~1"],"value":1}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":1}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:09.595Z|1565868189434_xfss5D5VCJUo29pffjDmmJ|0|objIds: ["A~~1","B~~1","MAP:B~~1\u0001A~~1","REDUCE:B~~1","MAP:B~~1\u0001A~~1","REDUCE:B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:09.598Z|1565868189434_xfss5D5VCJUo29pffjDmmJ|0|executing transaction
2019-08-15T11:23:09.614Z|1565868189434_xfss5D5VCJUo29pffjDmmJ||1|addObj|0ms; level=0|A~~1/{"newObj":{"_id":"A~~1","b":"B~~1","val":1},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:09.761Z|1565868189434_xfss5D5VCJUo29pffjDmmJ||1|preComputeFormula|A~~1 --> B~~1[sum__] = 2 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":1,"vaggs-A-COUNTIF(A.val, b == @[_id])":1}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-15T11:23:09.762Z|1565868189434_xfss5D5VCJUo29pffjDmmJ||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 98
2019-08-15T11:23:09.764Z|1565868189434_xfss5D5VCJUo29pffjDmmJ||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":2,"x__":98},"oldObj":{"_id":"B~~1","sum__":0,"x__":100},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~1"],"value":1}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":1}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~1"],"value":1}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":1}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:09.767Z|1565868189434_xfss5D5VCJUo29pffjDmmJ||1|computeFormulasAndSave|saveObjects: {"_id":"A~~1","b":"B~~1","val":1}, {"_id":"B~~1","sum__":2,"x__":98}
2019-08-15T11:23:09.893Z|1565868189434_xfss5D5VCJUo29pffjDmmJ||1|FINISH|{"clientId_":"9RxxQffhdqXqdQMBVA39Hf","state_":"BEGIN","obj":{"_id":"A~~1","b":"B~~1","val":1},"type_":"[form] ServerEventModifiedFormData","_id":"1565868189434_xfss5D5VCJUo29pffjDmmJ"}
2019-08-15T11:23:09.895Z|1565868189895_jKjHMnSv8EHwdDVPMXkiGQ|BEGIN|{"clientId_":"agKRVnUuFtUzUa9uH4FL6K","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565868189895_jKjHMnSv8EHwdDVPMXkiGQ"}
2019-08-15T11:23:09.910Z|1565868189895_jKjHMnSv8EHwdDVPMXkiGQ||1|addObj|0ms; level=0|A~~2/{"newObj":{"_id":"A~~2","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:10.066Z|1565868189895_jKjHMnSv8EHwdDVPMXkiGQ||1|preComputeFormula|A~~2 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":3,"vaggs-A-COUNTIF(A.val, b == @[_id])":2}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-15T11:23:10.067Z|1565868189895_jKjHMnSv8EHwdDVPMXkiGQ||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-15T11:23:10.068Z|1565868189895_jKjHMnSv8EHwdDVPMXkiGQ||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":2,"x__":98},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":3}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":2}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:10.069Z|1565868189895_jKjHMnSv8EHwdDVPMXkiGQ|0|objIds: ["A~~2","B~~1","MAP:B~~1\u0001A~~2","REDUCE:B~~1","MAP:B~~1\u0001A~~2","REDUCE:B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-15T11:23:10.071Z|1565868189895_jKjHMnSv8EHwdDVPMXkiGQ|0|executing transaction
2019-08-15T11:23:10.085Z|1565868189895_jKjHMnSv8EHwdDVPMXkiGQ||1|addObj|0ms; level=0|A~~2/{"newObj":{"_id":"A~~2","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:10.232Z|1565868189895_jKjHMnSv8EHwdDVPMXkiGQ||1|preComputeFormula|A~~2 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":3,"vaggs-A-COUNTIF(A.val, b == @[_id])":2}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-15T11:23:10.234Z|1565868189895_jKjHMnSv8EHwdDVPMXkiGQ||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-15T11:23:10.234Z|1565868189895_jKjHMnSv8EHwdDVPMXkiGQ||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":2,"x__":98},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":3}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":2}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:10.237Z|1565868189895_jKjHMnSv8EHwdDVPMXkiGQ||1|computeFormulasAndSave|saveObjects: {"_id":"A~~2","b":"B~~1","val":2}, {"_id":"B~~1","sum__":5,"x__":95}
2019-08-15T11:23:10.357Z|1565868189895_jKjHMnSv8EHwdDVPMXkiGQ||1|FINISH|{"clientId_":"agKRVnUuFtUzUa9uH4FL6K","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565868189895_jKjHMnSv8EHwdDVPMXkiGQ"}
    ✓ Should update views and compute new values of Observer when Observer field change (1 sec)
Droping all tables
Tables droped
frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id])
stockReservationSchema.entities.B.props.sum__.compiledFormula_= undefined
stockReservationSchema.entities.B.props.x__.formula= 100 - sum__
init store...
Starting FormulaDBEngine...
2019-08-15T11:23:10.704Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D|BEGIN|{"clientId_":"uyi5DPfpa3cpY8M5ceDniV","state_":"BEGIN","obj":{"_id":"Tr~~","ac1":"Ac~~2","ac2":"Ac~~3","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565868190703_qHJZgE5u4kAEdXwRY5hz5D"}
2019-08-15T11:23:10.706Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D||1|addObj|0ms; level=0|Tr~~9k1fLVE3ygWATu7fCVJiTm/{"newObj":{"_id":"Tr~~9k1fLVE3ygWATu7fCVJiTm","ac1":"Ac~~2","ac2":"Ac~~3","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:10.709Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr|BEGIN|{"clientId_":"sYNfX1vtvz4L1w5Xo46mLg","state_":"BEGIN","obj":{"_id":"Tr~~","ac1":"Ac~~1","ac2":"Ac~~2","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565868190709_iiFS1vCLqKy5c7shhMVvQr"}
2019-08-15T11:23:10.711Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr||1|addObj|0ms; level=0|Tr~~eHjtgXp6ETZaNz32JAUKfr/{"newObj":{"_id":"Tr~~eHjtgXp6ETZaNz32JAUKfr","ac1":"Ac~~1","ac2":"Ac~~2","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:10.715Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7|BEGIN|{"clientId_":"qBixjYGxDRjqHxZcdjJcd1","state_":"BEGIN","obj":{"_id":"Tr~~","ac1":"Ac~~3","ac2":"Ac~~4","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565868190715_qKGCtUr3BmTB7zNvrVG9M7"}
2019-08-15T11:23:10.718Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7||1|addObj|0ms; level=0|Tr~~w9nGpQ1MY8U57kcPchQdKj/{"newObj":{"_id":"Tr~~w9nGpQ1MY8U57kcPchQdKj","ac1":"Ac~~3","ac2":"Ac~~4","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:10.981Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr||1|preComputeFormula|Tr~~eHjtgXp6ETZaNz32JAUKfr --> Ac~~2[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-15T11:23:10.984Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr||1|addObj|0ms; level=1|Ac~~2/{"newObj":{"_id":"Ac~~2","balance__":75},"oldObj":{"_id":"Ac~~2","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Tr~~eHjtgXp6ETZaNz32JAUKfr"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Tr~~eHjtgXp6ETZaNz32JAUKfr"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~1"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:11.024Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D||1|preComputeFormula|Tr~~9k1fLVE3ygWATu7fCVJiTm --> Ac~~3[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-15T11:23:11.026Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D||1|addObj|0ms; level=1|Ac~~3/{"newObj":{"_id":"Ac~~3","balance__":75},"oldObj":{"_id":"Ac~~3","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Tr~~9k1fLVE3ygWATu7fCVJiTm"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Tr~~9k1fLVE3ygWATu7fCVJiTm"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:11.037Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7||1|preComputeFormula|Tr~~w9nGpQ1MY8U57kcPchQdKj --> Ac~~4[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-15T11:23:11.040Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7||1|addObj|0ms; level=1|Ac~~4/{"newObj":{"_id":"Ac~~4","balance__":75},"oldObj":{"_id":"Ac~~4","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Tr~~w9nGpQ1MY8U57kcPchQdKj"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~4"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Tr~~w9nGpQ1MY8U57kcPchQdKj"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Ac~~4"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~4","Ac~~4"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:11.147Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr||1|preComputeFormula|Tr~~eHjtgXp6ETZaNz32JAUKfr --> Ac~~1[balance__] = 25 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":0,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-15T11:23:11.148Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr||1|addObj|0ms; level=1|Ac~~1/{"newObj":{"_id":"Ac~~1","balance__":25},"oldObj":{"_id":"Ac~~1","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Tr~~eHjtgXp6ETZaNz32JAUKfr"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Tr~~eHjtgXp6ETZaNz32JAUKfr"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~1"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~1","Ac~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Ac~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:11.150Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr|0|objIds: ["Tr~~eHjtgXp6ETZaNz32JAUKfr","Ac~~2","MAP:Ac~~2\u0001Tr~~eHjtgXp6ETZaNz32JAUKfr","REDUCE:Ac~~2","MAP:Ac~~1\u0001Tr~~eHjtgXp6ETZaNz32JAUKfr","REDUCE:Ac~~1","MAP:Ac~~2\u0001Ac~~2","MAP:Ac~~2\u0001Ac~~2","Ac~~1","MAP:Ac~~2\u0001Tr~~eHjtgXp6ETZaNz32JAUKfr","REDUCE:Ac~~2","MAP:Ac~~1\u0001Tr~~eHjtgXp6ETZaNz32JAUKfr","REDUCE:Ac~~1","MAP:Ac~~1\u0001Ac~~1","MAP:Ac~~1\u0001Ac~~1"]|conflicts: []
2019-08-15T11:23:11.152Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr|0|executing transaction
2019-08-15T11:23:11.154Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr||1|addObj|0ms; level=0|Tr~~eHjtgXp6ETZaNz32JAUKfr/{"newObj":{"_id":"Tr~~eHjtgXp6ETZaNz32JAUKfr","ac1":"Ac~~1","ac2":"Ac~~2","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:11.205Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D||1|preComputeFormula|Tr~~9k1fLVE3ygWATu7fCVJiTm --> Ac~~2[balance__] = 25 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":0,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-15T11:23:11.206Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D||1|addObj|0ms; level=1|Ac~~2/{"newObj":{"_id":"Ac~~2","balance__":25},"oldObj":{"_id":"Ac~~2","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Tr~~9k1fLVE3ygWATu7fCVJiTm"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Tr~~9k1fLVE3ygWATu7fCVJiTm"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:11.208Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D|0|objIds: ["Tr~~9k1fLVE3ygWATu7fCVJiTm","Ac~~3","MAP:Ac~~3\u0001Tr~~9k1fLVE3ygWATu7fCVJiTm","REDUCE:Ac~~3","MAP:Ac~~2\u0001Tr~~9k1fLVE3ygWATu7fCVJiTm","REDUCE:Ac~~2","MAP:Ac~~3\u0001Ac~~3","MAP:Ac~~3\u0001Ac~~3","Ac~~2","MAP:Ac~~3\u0001Tr~~9k1fLVE3ygWATu7fCVJiTm","REDUCE:Ac~~3","MAP:Ac~~2\u0001Tr~~9k1fLVE3ygWATu7fCVJiTm","REDUCE:Ac~~2","MAP:Ac~~2\u0001Ac~~2","MAP:Ac~~2\u0001Ac~~2"]|conflicts: ["1565868190709_iiFS1vCLqKy5c7shhMVvQr"]
2019-08-15T11:23:11.226Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7||1|preComputeFormula|Tr~~w9nGpQ1MY8U57kcPchQdKj --> Ac~~3[balance__] = 25 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":0,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-15T11:23:11.229Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7||1|addObj|0ms; level=1|Ac~~3/{"newObj":{"_id":"Ac~~3","balance__":25},"oldObj":{"_id":"Ac~~3","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Tr~~w9nGpQ1MY8U57kcPchQdKj"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~4"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Tr~~w9nGpQ1MY8U57kcPchQdKj"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:11.232Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7|0|objIds: ["Tr~~w9nGpQ1MY8U57kcPchQdKj","Ac~~4","MAP:Ac~~4\u0001Tr~~w9nGpQ1MY8U57kcPchQdKj","REDUCE:Ac~~4","MAP:Ac~~3\u0001Tr~~w9nGpQ1MY8U57kcPchQdKj","REDUCE:Ac~~3","MAP:Ac~~4\u0001Ac~~4","MAP:Ac~~4\u0001Ac~~4","Ac~~3","MAP:Ac~~4\u0001Tr~~w9nGpQ1MY8U57kcPchQdKj","REDUCE:Ac~~4","MAP:Ac~~3\u0001Tr~~w9nGpQ1MY8U57kcPchQdKj","REDUCE:Ac~~3","MAP:Ac~~3\u0001Ac~~3","MAP:Ac~~3\u0001Ac~~3"]|conflicts: ["1565868190703_qHJZgE5u4kAEdXwRY5hz5D"]
2019-08-15T11:23:11.361Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr||1|preComputeFormula|Tr~~eHjtgXp6ETZaNz32JAUKfr --> Ac~~2[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-15T11:23:11.362Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr||1|addObj|0ms; level=1|Ac~~2/{"newObj":{"_id":"Ac~~2","balance__":75},"oldObj":{"_id":"Ac~~2","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Tr~~eHjtgXp6ETZaNz32JAUKfr"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Tr~~eHjtgXp6ETZaNz32JAUKfr"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~1"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:11.456Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr||1|preComputeFormula|Tr~~eHjtgXp6ETZaNz32JAUKfr --> Ac~~1[balance__] = 25 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":0,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-15T11:23:11.457Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr||1|addObj|0ms; level=1|Ac~~1/{"newObj":{"_id":"Ac~~1","balance__":25},"oldObj":{"_id":"Ac~~1","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Tr~~eHjtgXp6ETZaNz32JAUKfr"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Tr~~eHjtgXp6ETZaNz32JAUKfr"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~1"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~1","Ac~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Ac~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:11.458Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr||1|computeFormulasAndSave|saveObjects: {"_id":"Tr~~eHjtgXp6ETZaNz32JAUKfr","ac1":"Ac~~1","ac2":"Ac~~2","val":25}, {"_id":"Ac~~2","balance__":75}, {"_id":"Ac~~1","balance__":25}
2019-08-15T11:23:11.607Z|1565868190709_iiFS1vCLqKy5c7shhMVvQr||1|FINISH|{"clientId_":"sYNfX1vtvz4L1w5Xo46mLg","state_":"BEGIN","obj":{"_id":"Tr~~eHjtgXp6ETZaNz32JAUKfr","ac1":"Ac~~1","ac2":"Ac~~2","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565868190709_iiFS1vCLqKy5c7shhMVvQr"}
2019-08-15T11:23:11.617Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D|0|executing transaction
2019-08-15T11:23:11.618Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D||1|addObj|0ms; level=0|Tr~~9k1fLVE3ygWATu7fCVJiTm/{"newObj":{"_id":"Tr~~9k1fLVE3ygWATu7fCVJiTm","ac1":"Ac~~2","ac2":"Ac~~3","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:11.702Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D||1|preComputeFormula|Tr~~9k1fLVE3ygWATu7fCVJiTm --> Ac~~3[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-15T11:23:11.703Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D||1|addObj|0ms; level=1|Ac~~3/{"newObj":{"_id":"Ac~~3","balance__":75},"oldObj":{"_id":"Ac~~3","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Tr~~9k1fLVE3ygWATu7fCVJiTm"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Tr~~9k1fLVE3ygWATu7fCVJiTm"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:11.746Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D||1|preComputeFormula|Tr~~9k1fLVE3ygWATu7fCVJiTm --> Ac~~2[balance__] = 50 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-15T11:23:11.747Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D||1|addObj|0ms; level=1|Ac~~2/{"newObj":{"_id":"Ac~~2","balance__":50},"oldObj":{"_id":"Ac~~2","balance__":75},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Tr~~9k1fLVE3ygWATu7fCVJiTm"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Tr~~9k1fLVE3ygWATu7fCVJiTm"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:11.748Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D||1|computeFormulasAndSave|saveObjects: {"_id":"Tr~~9k1fLVE3ygWATu7fCVJiTm","ac1":"Ac~~2","ac2":"Ac~~3","val":25}, {"_id":"Ac~~3","balance__":75}, {"_id":"Ac~~2","balance__":50}
2019-08-15T11:23:11.831Z|1565868190703_qHJZgE5u4kAEdXwRY5hz5D||1|FINISH|{"clientId_":"uyi5DPfpa3cpY8M5ceDniV","state_":"BEGIN","obj":{"_id":"Tr~~9k1fLVE3ygWATu7fCVJiTm","ac1":"Ac~~2","ac2":"Ac~~3","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565868190703_qHJZgE5u4kAEdXwRY5hz5D"}
2019-08-15T11:23:11.854Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7|0|executing transaction
2019-08-15T11:23:11.855Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7||1|addObj|0ms; level=0|Tr~~w9nGpQ1MY8U57kcPchQdKj/{"newObj":{"_id":"Tr~~w9nGpQ1MY8U57kcPchQdKj","ac1":"Ac~~3","ac2":"Ac~~4","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-15T11:23:11.994Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7||1|preComputeFormula|Tr~~w9nGpQ1MY8U57kcPchQdKj --> Ac~~4[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-15T11:23:11.996Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7||1|addObj|0ms; level=1|Ac~~4/{"newObj":{"_id":"Ac~~4","balance__":75},"oldObj":{"_id":"Ac~~4","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Tr~~w9nGpQ1MY8U57kcPchQdKj"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~4"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Tr~~w9nGpQ1MY8U57kcPchQdKj"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Ac~~4"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~4","Ac~~4"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:12.046Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7||1|preComputeFormula|Tr~~w9nGpQ1MY8U57kcPchQdKj --> Ac~~3[balance__] = 50 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-15T11:23:12.047Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7||1|addObj|0ms; level=1|Ac~~3/{"newObj":{"_id":"Ac~~3","balance__":50},"oldObj":{"_id":"Ac~~3","balance__":75},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Tr~~w9nGpQ1MY8U57kcPchQdKj"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~4"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Tr~~w9nGpQ1MY8U57kcPchQdKj"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-15T11:23:12.048Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7||1|computeFormulasAndSave|saveObjects: {"_id":"Tr~~w9nGpQ1MY8U57kcPchQdKj","ac1":"Ac~~3","ac2":"Ac~~4","val":25}, {"_id":"Ac~~4","balance__":75}, {"_id":"Ac~~3","balance__":50}
2019-08-15T11:23:12.166Z|1565868190715_qKGCtUr3BmTB7zNvrVG9M7||1|FINISH|{"clientId_":"qBixjYGxDRjqHxZcdjJcd1","state_":"BEGIN","obj":{"_id":"Tr~~w9nGpQ1MY8U57kcPchQdKj","ac1":"Ac~~3","ac2":"Ac~~4","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565868190715_qKGCtUr3BmTB7zNvrVG9M7"}
    ✓ Should compute account balance correctly for transfer transactions (2 secs)

Droping all tables
Tables droped
  MapReduceView
    ✓ should precompute and compute basic SUM (0.298 sec)

  scalarFormulaEvalaluate
    ✓ should evaluate scalar formulas (0.005 sec)

2019-08-15T11:23:12.534Z|tr0|0|objIds: ["obj1"]|conflicts: []
2019-08-15T11:23:12.536Z|tr0|0|executing transaction
2019-08-15T11:23:12.537Z|tr1|0|objIds: ["obj1"]|conflicts: ["tr0"]
2019-08-15T11:23:12.538Z|tr2|0|objIds: ["obj1"]|conflicts: ["tr0","tr1"]
2019-08-15T11:23:12.540Z|tr3|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2"]
2019-08-15T11:23:12.541Z|tr4|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3"]
2019-08-15T11:23:12.543Z|tr5|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4"]
2019-08-15T11:23:12.545Z|tr6|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5"]
2019-08-15T11:23:12.547Z|tr7|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6"]
2019-08-15T11:23:12.549Z|tr8|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7"]
2019-08-15T11:23:12.551Z|tr9|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8"]
2019-08-15T11:23:12.553Z|tr10|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9"]
2019-08-15T11:23:12.555Z|tr11|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10"]
2019-08-15T11:23:12.556Z|tr12|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11"]
2019-08-15T11:23:12.558Z|tr13|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11","tr12"]
2019-08-15T11:23:12.559Z|tr14|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11","tr12","tr13"]
2019-08-15T11:23:12.562Z|tr15|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11","tr12","tr13","tr14"]
2019-08-15T11:23:12.564Z|tr16|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11","tr12","tr13","tr14","tr15"]
2019-08-15T11:23:12.565Z|tr17|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11","tr12","tr13","tr14","tr15","tr16"]
2019-08-15T11:23:12.567Z|tr18|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11","tr12","tr13","tr14","tr15","tr16","tr17"]
2019-08-15T11:23:12.569Z|tr19|0|objIds: ["obj1"]|conflicts: ["tr0","tr1","tr2","tr3","tr4","tr5","tr6","tr7","tr8","tr9","tr10","tr11","tr12","tr13","tr14","tr15","tr16","tr17","tr18"]
2019-08-15T11:23:12.641Z|tr1|0|executing transaction
2019-08-15T11:23:12.847Z|tr2|0|executing transaction
2019-08-15T11:23:13.054Z|tr3|0|executing transaction
2019-08-15T11:23:13.261Z|tr4|0|executing transaction
2019-08-15T11:23:13.367Z|tr5|0|executing transaction
2019-08-15T11:23:13.471Z|tr6|0|executing transaction
2019-08-15T11:23:13.677Z|tr7|0|executing transaction
2019-08-15T11:23:13.882Z|tr8|0|executing transaction
2019-08-15T11:23:14.088Z|tr9|0|executing transaction
2019-08-15T11:23:14.193Z|tr10|0|executing transaction
2019-08-15T11:23:14.297Z|tr11|0|executing transaction
2019-08-15T11:23:14.401Z|tr12|0|executing transaction
2019-08-15T11:23:14.605Z|tr13|0|executing transaction
2019-08-15T11:23:14.812Z|tr14|0|executing transaction
2019-08-15T11:23:14.916Z|tr15|0|executing transaction
2019-08-15T11:23:15.021Z|tr16|0|executing transaction
2019-08-15T11:23:15.124Z|tr17|0|executing transaction
2019-08-15T11:23:15.329Z|tr18|0|executing transaction
2019-08-15T11:23:15.532Z|tr19|0|executing transaction
  TransactionManager
    ✓ Should serialize concurrent conflicting transactions (3 secs)

**************************************************
*                   Successes                    *
**************************************************

1) AutocompleteComponent should render

2) DbEditorComponent should navigate between tables

3) DbEditorComponent should navigate between tables used in formula

4) DbEditorComponent should highlight table colums used in formula

5) FormService mock debounce example

6) FormService should allow editing of records

7) FormulaEditorComponent should render

8) [FE] FrmdbTemplate should update view when template OR data changes

9) [FE] FrmdbTemplate should serialize element to DataObj

10) VNavComponent should render

11) WebComponentExample Spec Example should render

12) FormulaCompiler should stringify parsed expressions

13) FormulaCompiler should extract keys from binary expressions operand

14) FormulaCompiler should extract map reduce keys and queries from binary expressions

15) FormulaCompiler should extract map reduce keys and queries from logical expressions

16) FormulaCompiler should compile mock schema correctly

17) FormulaTokenizer should tokenize correct formula with function signature helper

18) FormulaTokenizer should report non-existent column

19) FormulaTokenizer should report non-existent column and not missing parenthesis

20) FormulaTokenizer should report non-existent table

21) FormulaTokenizer should suggest function names

22) FormulaTokenizer test REF

23) FormulaTokenizer test REFERENCE_TO

24) FormulaTokenizer test REFERENCE_TO(

25) FormulaTokenizer test REFERENCE_TO(Bla

26) FormulaTokenizer test REFERENCE_TO(B.

27) FormulaTokenizer test REFERENCE_TO(B.i

28) FormulaTokenizer test num

29) FrmdbEngineStore _count simple one table RANK formula: RANK([FLOOR(@[x]/4) * 4, @[x]],_MAP(A.x,[FLOOR(x/4) * 4, x]))

30) FrmdbEngineStore _count two table RANK formula: RANK([FLOOR(@[idx]/4) * 4, @[idx]], _MAP(A.x, [FLOOR(x/4) * 4, x]))

31) FrmdbEngineStore _textjoin B.list= TEXTJOIN(IF(A._id, FLOOR(x/4) == @[idx]),";;")

32) frmdb_engine_store Should allow working with MapReduce queries produced by the FormulaCompiler

33) frmdb_engine_store Should allow to install formulas then query observers and aggregations

34) frmdb_engine_store TablePage Relationships example REFERENCE_TO by _id

35) Inventory Metadata Basic stock operations

36) Inventory Metadata Change formula

37) FrmdbEngine Should allow basic formulas computation when saving an object with auto-correct

38) FrmdbEngine Should allow preview formulas

39) FrmdbEngine Should allow adding/modifying formulas

40) FrmdbEngine Should update views and compute new values of Observer when Observer field change

41) FrmdbEngine Should compute account balance correctly for transfer transactions

42) MapReduceView should precompute and compute basic SUM

43) scalarFormulaEvalaluate should evaluate scalar formulas

44) TransactionManager Should serialize concurrent conflicting transactions

Executed 44 of 44 specs SUCCESS in 20 secs.
