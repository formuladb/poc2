C:\Windows\System32\bash.exe -ic 'node --trace-warnings --debug-brk --inspect=0.0.0.0:9232 jasmine.js 'core\src\frmdb_engine.spec.ts''
bash: /usr/lib/git-core/git-sh-prompt: line 300: syntax error near unexpected token `('
bash: /usr/lib/git-core/git-sh-prompt: line 300: `__git_ps1 ()'
Debugger listening on ws://0.0.0.0:9232/fc9a79d8-66cc-4a8b-8fc9-2b7c4ca26cac
For help, see: https://nodejs.org/en/docs/inspector
Debugger attached.
null: Array(3) ["/usr/bin/node", "/d/code/metawiz/febe/jasmine.js", "core\src\frmdb_engine.spec.ts"]
Running just one spec file  tsc-out/core/src/frmdb_engine.spec.js
Jasmine started
frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id])
stockReservationSchema.entities.B.props.sum__.compiledFormula_= undefined
stockReservationSchema.entities.B.props.x__.formula= 100 - sum__
Starting FormulaDBEngine...
2019-08-14T13:02:31.276Z|1565787751275_hfkM9kRyizVoRrCaAUTPtJ|BEGIN|{"clientId_":"wVyc3KUXzSTSQYZWMqw65a","state_":"BEGIN","obj":{"_id":"A~~c__","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565787751275_hfkM9kRyizVoRrCaAUTPtJ"}
2019-08-14T13:02:31.279Z|1565787751275_hfkM9kRyizVoRrCaAUTPtJ||1|addObj|0ms; level=0|A~~c__eQPjvUN9uo8YXBZ6LsXYm5/{"newObj":{"_id":"A~~c__eQPjvUN9uo8YXBZ6LsXYm5","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:31.331Z|1565787751275_hfkM9kRyizVoRrCaAUTPtJ||1|preComputeFormula|A~~c__eQPjvUN9uo8YXBZ6LsXYm5 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:31.332Z|1565787751275_hfkM9kRyizVoRrCaAUTPtJ||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T13:02:31.333Z|1565787751275_hfkM9kRyizVoRrCaAUTPtJ||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~c__eQPjvUN9uo8YXBZ6LsXYm5"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:31.337Z|1565787751275_hfkM9kRyizVoRrCaAUTPtJ|0|objIds: ["A~~c__eQPjvUN9uo8YXBZ6LsXYm5","B~~1","MAP:B~~1\u0001A~~c__eQPjvUN9uo8YXBZ6LsXYm5","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:31.341Z|1565787751275_hfkM9kRyizVoRrCaAUTPtJ|0|executing transaction
2019-08-14T13:02:31.344Z|1565787751275_hfkM9kRyizVoRrCaAUTPtJ||1|addObj|0ms; level=0|A~~c__eQPjvUN9uo8YXBZ6LsXYm5/{"newObj":{"_id":"A~~c__eQPjvUN9uo8YXBZ6LsXYm5","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:31.388Z|1565787751275_hfkM9kRyizVoRrCaAUTPtJ||1|preComputeFormula|A~~c__eQPjvUN9uo8YXBZ6LsXYm5 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:31.390Z|1565787751275_hfkM9kRyizVoRrCaAUTPtJ||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T13:02:31.393Z|1565787751275_hfkM9kRyizVoRrCaAUTPtJ||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~c__eQPjvUN9uo8YXBZ6LsXYm5"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:31.399Z|1565787751275_hfkM9kRyizVoRrCaAUTPtJ||1|computeFormulasAndSave|saveObjects: {"_id":"A~~c__eQPjvUN9uo8YXBZ6LsXYm5","b":"B~~1","val":2}, {"_id":"B~~1","sum__":5,"x__":95}
2019-08-14T13:02:31.443Z|1565787751275_hfkM9kRyizVoRrCaAUTPtJ||1|FINISH|{"clientId_":"wVyc3KUXzSTSQYZWMqw65a","state_":"BEGIN","obj":{"_id":"A~~c__eQPjvUN9uo8YXBZ6LsXYm5","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565787751275_hfkM9kRyizVoRrCaAUTPtJ"}
2019-08-14T13:02:31.466Z|1565787751466_2isG1jTBu2DRPKZDDgmzBK|BEGIN|{"clientId_":"rqyu29iQZHC46DdtuSnjtY","state_":"BEGIN","obj":{"_id":"A~~c__","b":"B~~1","val":3},"type_":"[form] ServerEventModifiedFormData","_id":"1565787751466_2isG1jTBu2DRPKZDDgmzBK"}
2019-08-14T13:02:31.470Z|1565787751466_2isG1jTBu2DRPKZDDgmzBK||1|addObj|0ms; level=0|A~~c__61cnmbi9BPzEig72cHBGFe/{"newObj":{"_id":"A~~c__61cnmbi9BPzEig72cHBGFe","b":"B~~1","val":3},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:31.512Z|1565787751466_2isG1jTBu2DRPKZDDgmzBK||1|preComputeFormula|A~~c__61cnmbi9BPzEig72cHBGFe --> B~~1[sum__] = 8 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":8}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:31.514Z|1565787751466_2isG1jTBu2DRPKZDDgmzBK||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 92
2019-08-14T13:02:31.515Z|1565787751466_2isG1jTBu2DRPKZDDgmzBK||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":8,"x__":92},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~c__61cnmbi9BPzEig72cHBGFe"],"value":3}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":8}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:31.518Z|1565787751466_2isG1jTBu2DRPKZDDgmzBK|0|objIds: ["A~~c__61cnmbi9BPzEig72cHBGFe","B~~1","MAP:B~~1\u0001A~~c__61cnmbi9BPzEig72cHBGFe","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:31.520Z|1565787751466_2isG1jTBu2DRPKZDDgmzBK|0|executing transaction
2019-08-14T13:02:31.523Z|1565787751466_2isG1jTBu2DRPKZDDgmzBK||1|addObj|0ms; level=0|A~~c__61cnmbi9BPzEig72cHBGFe/{"newObj":{"_id":"A~~c__61cnmbi9BPzEig72cHBGFe","b":"B~~1","val":3},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:31.545Z|1565787751466_2isG1jTBu2DRPKZDDgmzBK||1|preComputeFormula|A~~c__61cnmbi9BPzEig72cHBGFe --> B~~1[sum__] = 8 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":8}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:31.547Z|1565787751466_2isG1jTBu2DRPKZDDgmzBK||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 92
2019-08-14T13:02:31.548Z|1565787751466_2isG1jTBu2DRPKZDDgmzBK||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":8,"x__":92},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~c__61cnmbi9BPzEig72cHBGFe"],"value":3}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":8}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:31.550Z|1565787751466_2isG1jTBu2DRPKZDDgmzBK||1|computeFormulasAndSave|saveObjects: {"_id":"A~~c__61cnmbi9BPzEig72cHBGFe","b":"B~~1","val":3}, {"_id":"B~~1","sum__":8,"x__":92}
2019-08-14T13:02:31.581Z|1565787751466_2isG1jTBu2DRPKZDDgmzBK||1|FINISH|{"clientId_":"rqyu29iQZHC46DdtuSnjtY","state_":"BEGIN","obj":{"_id":"A~~c__61cnmbi9BPzEig72cHBGFe","b":"B~~1","val":3},"type_":"[form] ServerEventModifiedFormData","_id":"1565787751466_2isG1jTBu2DRPKZDDgmzBK"}
2019-08-14T13:02:31.592Z|1565787751592_9zFu3SAEuSRYfFx7J92YSj|BEGIN|{"clientId_":"5GaanV7tgHw7mReieE49tK","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":4},"type_":"[form] ServerEventModifiedFormData","_id":"1565787751592_9zFu3SAEuSRYfFx7J92YSj"}
2019-08-14T13:02:31.599Z|1565787751592_9zFu3SAEuSRYfFx7J92YSj||1|addObj|0ms; level=0|A~~2/{"newObj":{"_id":"A~~2","b":"B~~1","val":4},"oldObj":{"_id":"A~~2","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:31.661Z|1565787751592_9zFu3SAEuSRYfFx7J92YSj||1|preComputeFormula|A~~2 --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:31.664Z|1565787751592_9zFu3SAEuSRYfFx7J92YSj||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-14T13:02:31.665Z|1565787751592_9zFu3SAEuSRYfFx7J92YSj||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":8,"x__":92},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":4}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:31.668Z|1565787751592_9zFu3SAEuSRYfFx7J92YSj|0|objIds: ["A~~2","B~~1","MAP:B~~1\u0001A~~2","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:31.672Z|1565787751592_9zFu3SAEuSRYfFx7J92YSj|0|executing transaction
2019-08-14T13:02:31.683Z|1565787751592_9zFu3SAEuSRYfFx7J92YSj||1|addObj|0ms; level=0|A~~2/{"newObj":{"_id":"A~~2","b":"B~~1","val":4},"oldObj":{"_id":"A~~2","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:31.740Z|1565787751592_9zFu3SAEuSRYfFx7J92YSj||1|preComputeFormula|A~~2 --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:31.742Z|1565787751592_9zFu3SAEuSRYfFx7J92YSj||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-14T13:02:31.743Z|1565787751592_9zFu3SAEuSRYfFx7J92YSj||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":8,"x__":92},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":4}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:31.745Z|1565787751592_9zFu3SAEuSRYfFx7J92YSj||1|computeFormulasAndSave|saveObjects: {"_id":"A~~2","b":"B~~1","val":4}, {"_id":"B~~1","sum__":10,"x__":90}
2019-08-14T13:02:31.784Z|1565787751592_9zFu3SAEuSRYfFx7J92YSj||1|FINISH|{"clientId_":"5GaanV7tgHw7mReieE49tK","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":4},"type_":"[form] ServerEventModifiedFormData","_id":"1565787751592_9zFu3SAEuSRYfFx7J92YSj"}
2019-08-14T13:02:31.788Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk|BEGIN|{"clientId_":"4tFMb5j3cqLFvKJzBjcGtR","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":95},"type_":"[form] ServerEventModifiedFormData","_id":"1565787751788_kY7AJ7BV3vne9KCFdQEDrk"}
2019-08-14T13:02:31.792Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||1|addObj|0ms; level=0|A~~nWod6p2sYdj3saFYn1SQ9t/{"newObj":{"_id":"A~~nWod6p2sYdj3saFYn1SQ9t","b":"B~~1","val":95},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:31.842Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||1|computeAutoCorrections: A~~nWod6p2sYdj3saFYn1SQ9t[val] = [MAX(0, val + $ROW$.x__)] = 90
2019-08-14T13:02:31.847Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||1|computeAutoCorrections: A~~nWod6p2sYdj3saFYn1SQ9t[err] = [ABS($OLD$.val - val)] = 5
2019-08-14T13:02:31.851Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||2|addObj|0ms; level=0|A~~nWod6p2sYdj3saFYn1SQ9t/{"newObj":{"_id":"A~~nWod6p2sYdj3saFYn1SQ9t","b":"B~~1","val":90,"err":5},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:31.887Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||2|preComputeFormula|A~~nWod6p2sYdj3saFYn1SQ9t --> B~~1[sum__] = 100 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":100}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:31.888Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||2|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 0
2019-08-14T13:02:31.890Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||2|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":100,"x__":0},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~nWod6p2sYdj3saFYn1SQ9t"],"value":90}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":100}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:31.893Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk|0|objIds: ["A~~nWod6p2sYdj3saFYn1SQ9t","B~~1","MAP:B~~1\u0001A~~nWod6p2sYdj3saFYn1SQ9t","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:31.898Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk|0|executing transaction
2019-08-14T13:02:31.903Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||1|addObj|0ms; level=0|A~~nWod6p2sYdj3saFYn1SQ9t/{"newObj":{"_id":"A~~nWod6p2sYdj3saFYn1SQ9t","b":"B~~1","val":95,"err":5},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:31.937Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||1|computeAutoCorrections: A~~nWod6p2sYdj3saFYn1SQ9t[val] = [MAX(0, val + $ROW$.x__)] = 90
2019-08-14T13:02:31.940Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||1|computeAutoCorrections: A~~nWod6p2sYdj3saFYn1SQ9t[err] = [ABS($OLD$.val - val)] = 5
2019-08-14T13:02:31.942Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||2|addObj|0ms; level=0|A~~nWod6p2sYdj3saFYn1SQ9t/{"newObj":{"_id":"A~~nWod6p2sYdj3saFYn1SQ9t","b":"B~~1","val":90,"err":5},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:31.974Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||2|preComputeFormula|A~~nWod6p2sYdj3saFYn1SQ9t --> B~~1[sum__] = 100 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":100}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:31.975Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||2|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 0
2019-08-14T13:02:31.976Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||2|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":100,"x__":0},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~nWod6p2sYdj3saFYn1SQ9t"],"value":90}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":100}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:31.977Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||2|computeFormulasAndSave|saveObjects: {"_id":"A~~nWod6p2sYdj3saFYn1SQ9t","b":"B~~1","val":90,"err":5}, {"_id":"B~~1","sum__":100,"x__":0}
2019-08-14T13:02:32.005Z|1565787751788_kY7AJ7BV3vne9KCFdQEDrk||2|FINISH|{"clientId_":"4tFMb5j3cqLFvKJzBjcGtR","state_":"BEGIN","obj":{"_id":"A~~nWod6p2sYdj3saFYn1SQ9t","b":"B~~1","val":90,"err":5},"type_":"[form] ServerEventModifiedFormData","_id":"1565787751788_kY7AJ7BV3vne9KCFdQEDrk"}
2019-08-14T13:02:32.016Z|1565787752016_7JUJXkd8JAYbQ7D3tFvJco|BEGIN|{"clientId_":"521zgCGF17t1wZzpRxymoL","state_":"BEGIN","obj":{"_id":"A~~nWod6p2sYdj3saFYn1SQ9t","b":"B~~1","val":90,"err":5},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565787752016_7JUJXkd8JAYbQ7D3tFvJco"}
2019-08-14T13:02:32.028Z|1565787752016_7JUJXkd8JAYbQ7D3tFvJco||1|addObj|0ms; level=0|A~~nWod6p2sYdj3saFYn1SQ9t/{"newObj":null,"oldObj":{"_id":"A~~nWod6p2sYdj3saFYn1SQ9t","b":"B~~1","val":90,"err":5},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:32.076Z|1565787752016_7JUJXkd8JAYbQ7D3tFvJco||1|preComputeFormula|A~~nWod6p2sYdj3saFYn1SQ9t --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:32.078Z|1565787752016_7JUJXkd8JAYbQ7D3tFvJco||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-14T13:02:32.080Z|1565787752016_7JUJXkd8JAYbQ7D3tFvJco||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":100,"x__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~nWod6p2sYdj3saFYn1SQ9t"]],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:32.083Z|1565787752016_7JUJXkd8JAYbQ7D3tFvJco|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~nWod6p2sYdj3saFYn1SQ9t","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:32.086Z|1565787752016_7JUJXkd8JAYbQ7D3tFvJco|0|executing transaction
2019-08-14T13:02:32.106Z|1565787752016_7JUJXkd8JAYbQ7D3tFvJco||1|addObj|0ms; level=0|A~~nWod6p2sYdj3saFYn1SQ9t/{"newObj":null,"oldObj":{"_id":"A~~nWod6p2sYdj3saFYn1SQ9t","b":"B~~1","val":90,"err":5},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:32.141Z|1565787752016_7JUJXkd8JAYbQ7D3tFvJco||1|preComputeFormula|A~~nWod6p2sYdj3saFYn1SQ9t --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:32.143Z|1565787752016_7JUJXkd8JAYbQ7D3tFvJco||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-14T13:02:32.145Z|1565787752016_7JUJXkd8JAYbQ7D3tFvJco||1|addObj|1ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":100,"x__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~nWod6p2sYdj3saFYn1SQ9t"]],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:32.147Z|1565787752016_7JUJXkd8JAYbQ7D3tFvJco||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":10,"x__":90}
2019-08-14T13:02:32.193Z|1565787752016_7JUJXkd8JAYbQ7D3tFvJco||1|FINISH|{"clientId_":"521zgCGF17t1wZzpRxymoL","state_":"BEGIN","obj":{"_id":"A~~nWod6p2sYdj3saFYn1SQ9t","b":"B~~1","val":90,"err":5},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565787752016_7JUJXkd8JAYbQ7D3tFvJco"}
2019-08-14T13:02:32.207Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh|BEGIN|{"clientId_":"e8E5GfUBQ6gJdXoATk5weN","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":295},"type_":"[form] ServerEventModifiedFormData","_id":"1565787752205_aE3KVD7zCaQNgMCURbZcvh"}
2019-08-14T13:02:32.210Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||1|addObj|0ms; level=0|A~~viZpVgG8SDgKbZMyshgFVi/{"newObj":{"_id":"A~~viZpVgG8SDgKbZMyshgFVi","b":"B~~1","val":295},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:32.260Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||1|computeAutoCorrections: A~~viZpVgG8SDgKbZMyshgFVi[val] = [MAX(0, val + $ROW$.x__)] = 90
2019-08-14T13:02:32.262Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||1|computeAutoCorrections: A~~viZpVgG8SDgKbZMyshgFVi[err] = [ABS($OLD$.val - val)] = 205
2019-08-14T13:02:32.265Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||2|addObj|0ms; level=0|A~~viZpVgG8SDgKbZMyshgFVi/{"newObj":{"_id":"A~~viZpVgG8SDgKbZMyshgFVi","b":"B~~1","val":90,"err":205},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:32.302Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||2|preComputeFormula|A~~viZpVgG8SDgKbZMyshgFVi --> B~~1[sum__] = 100 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":100}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:32.304Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||2|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 0
2019-08-14T13:02:32.306Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||2|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":100,"x__":0},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~viZpVgG8SDgKbZMyshgFVi"],"value":90}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":100}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:32.309Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh|0|objIds: ["A~~viZpVgG8SDgKbZMyshgFVi","B~~1","MAP:B~~1\u0001A~~viZpVgG8SDgKbZMyshgFVi","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:32.313Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh|0|executing transaction
2019-08-14T13:02:32.318Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||1|addObj|0ms; level=0|A~~viZpVgG8SDgKbZMyshgFVi/{"newObj":{"_id":"A~~viZpVgG8SDgKbZMyshgFVi","b":"B~~1","val":295,"err":205},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:32.350Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||1|computeAutoCorrections: A~~viZpVgG8SDgKbZMyshgFVi[val] = [MAX(0, val + $ROW$.x__)] = 90
2019-08-14T13:02:32.351Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||1|computeAutoCorrections: A~~viZpVgG8SDgKbZMyshgFVi[err] = [ABS($OLD$.val - val)] = 205
2019-08-14T13:02:32.352Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||2|addObj|0ms; level=0|A~~viZpVgG8SDgKbZMyshgFVi/{"newObj":{"_id":"A~~viZpVgG8SDgKbZMyshgFVi","b":"B~~1","val":90,"err":205},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:32.385Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||2|preComputeFormula|A~~viZpVgG8SDgKbZMyshgFVi --> B~~1[sum__] = 100 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":100}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:32.386Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||2|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 0
2019-08-14T13:02:32.387Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||2|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":100,"x__":0},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~viZpVgG8SDgKbZMyshgFVi"],"value":90}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":100}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:32.389Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||2|computeFormulasAndSave|saveObjects: {"_id":"A~~viZpVgG8SDgKbZMyshgFVi","b":"B~~1","val":90,"err":205}, {"_id":"B~~1","sum__":100,"x__":0}
2019-08-14T13:02:32.418Z|1565787752205_aE3KVD7zCaQNgMCURbZcvh||2|FINISH|{"clientId_":"e8E5GfUBQ6gJdXoATk5weN","state_":"BEGIN","obj":{"_id":"A~~viZpVgG8SDgKbZMyshgFVi","b":"B~~1","val":90,"err":205},"type_":"[form] ServerEventModifiedFormData","_id":"1565787752205_aE3KVD7zCaQNgMCURbZcvh"}
2019-08-14T13:02:32.425Z|1565787752425_bCSRyLLN6PAAGBXSJgYxt4|BEGIN|{"clientId_":"qSupKNnsa42iLVyTN2S2hS","state_":"BEGIN","obj":{"_id":"A~~viZpVgG8SDgKbZMyshgFVi","b":"B~~1","val":90,"err":205},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565787752425_bCSRyLLN6PAAGBXSJgYxt4"}
2019-08-14T13:02:32.435Z|1565787752425_bCSRyLLN6PAAGBXSJgYxt4||1|addObj|0ms; level=0|A~~viZpVgG8SDgKbZMyshgFVi/{"newObj":null,"oldObj":{"_id":"A~~viZpVgG8SDgKbZMyshgFVi","b":"B~~1","val":90,"err":205},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:32.469Z|1565787752425_bCSRyLLN6PAAGBXSJgYxt4||1|preComputeFormula|A~~viZpVgG8SDgKbZMyshgFVi --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:32.470Z|1565787752425_bCSRyLLN6PAAGBXSJgYxt4||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-14T13:02:32.471Z|1565787752425_bCSRyLLN6PAAGBXSJgYxt4||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":100,"x__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~viZpVgG8SDgKbZMyshgFVi"]],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:32.472Z|1565787752425_bCSRyLLN6PAAGBXSJgYxt4|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~viZpVgG8SDgKbZMyshgFVi","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:32.473Z|1565787752425_bCSRyLLN6PAAGBXSJgYxt4|0|executing transaction
2019-08-14T13:02:32.489Z|1565787752425_bCSRyLLN6PAAGBXSJgYxt4||1|addObj|0ms; level=0|A~~viZpVgG8SDgKbZMyshgFVi/{"newObj":null,"oldObj":{"_id":"A~~viZpVgG8SDgKbZMyshgFVi","b":"B~~1","val":90,"err":205},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:32.525Z|1565787752425_bCSRyLLN6PAAGBXSJgYxt4||1|preComputeFormula|A~~viZpVgG8SDgKbZMyshgFVi --> B~~1[sum__] = 10 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":10}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:32.526Z|1565787752425_bCSRyLLN6PAAGBXSJgYxt4||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 90
2019-08-14T13:02:32.527Z|1565787752425_bCSRyLLN6PAAGBXSJgYxt4||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":10,"x__":90},"oldObj":{"_id":"B~~1","sum__":100,"x__":0},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~viZpVgG8SDgKbZMyshgFVi"]],"reduce":[{"key":["B~~1"],"value":10}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:32.528Z|1565787752425_bCSRyLLN6PAAGBXSJgYxt4||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":10,"x__":90}
2019-08-14T13:02:32.574Z|1565787752425_bCSRyLLN6PAAGBXSJgYxt4||1|FINISH|{"clientId_":"qSupKNnsa42iLVyTN2S2hS","state_":"BEGIN","obj":{"_id":"A~~viZpVgG8SDgKbZMyshgFVi","b":"B~~1","val":90,"err":205},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565787752425_bCSRyLLN6PAAGBXSJgYxt4"}
2019-08-14T13:02:32.576Z|1565787752576_52XYFVsNhoDMrkEzuUevKU|BEGIN|{"clientId_":"ss4Zn5zZ5TjRAwEpLKNeiA","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":4},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565787752576_52XYFVsNhoDMrkEzuUevKU"}
2019-08-14T13:02:32.587Z|1565787752576_52XYFVsNhoDMrkEzuUevKU||1|addObj|0ms; level=0|A~~2/{"newObj":null,"oldObj":{"_id":"A~~2","b":"B~~1","val":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:32.627Z|1565787752576_52XYFVsNhoDMrkEzuUevKU||1|preComputeFormula|A~~2 --> B~~1[sum__] = 6 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":6}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:32.628Z|1565787752576_52XYFVsNhoDMrkEzuUevKU||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 94
2019-08-14T13:02:32.629Z|1565787752576_52XYFVsNhoDMrkEzuUevKU||1|addObj|1ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":6,"x__":94},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~2"]],"reduce":[{"key":["B~~1"],"value":6}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:32.631Z|1565787752576_52XYFVsNhoDMrkEzuUevKU|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~2","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:32.633Z|1565787752576_52XYFVsNhoDMrkEzuUevKU|0|executing transaction
2019-08-14T13:02:32.652Z|1565787752576_52XYFVsNhoDMrkEzuUevKU||1|addObj|0ms; level=0|A~~2/{"newObj":null,"oldObj":{"_id":"A~~2","b":"B~~1","val":4},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:32.697Z|1565787752576_52XYFVsNhoDMrkEzuUevKU||1|preComputeFormula|A~~2 --> B~~1[sum__] = 6 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":6}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:32.699Z|1565787752576_52XYFVsNhoDMrkEzuUevKU||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 94
2019-08-14T13:02:32.700Z|1565787752576_52XYFVsNhoDMrkEzuUevKU||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":6,"x__":94},"oldObj":{"_id":"B~~1","sum__":10,"x__":90},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~2"]],"reduce":[{"key":["B~~1"],"value":6}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:32.703Z|1565787752576_52XYFVsNhoDMrkEzuUevKU||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":6,"x__":94}
2019-08-14T13:02:32.746Z|1565787752576_52XYFVsNhoDMrkEzuUevKU||1|FINISH|{"clientId_":"ss4Zn5zZ5TjRAwEpLKNeiA","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":4},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565787752576_52XYFVsNhoDMrkEzuUevKU"}
2019-08-14T13:02:32.760Z|1565787752760_6y5oWxB2jTfB4egvG4pLnZ|BEGIN|{"clientId_":"e76JPER5RLVyivdKkL5pVD","state_":"BEGIN","obj":{"_id":"A~~1","b":"B~~1","val":1},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565787752760_6y5oWxB2jTfB4egvG4pLnZ"}
2019-08-14T13:02:32.778Z|1565787752760_6y5oWxB2jTfB4egvG4pLnZ||1|addObj|1ms; level=0|A~~1/{"newObj":null,"oldObj":{"_id":"A~~1","b":"B~~1","val":1},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:32.819Z|1565787752760_6y5oWxB2jTfB4egvG4pLnZ||1|preComputeFormula|A~~1 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:32.821Z|1565787752760_6y5oWxB2jTfB4egvG4pLnZ||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T13:02:32.822Z|1565787752760_6y5oWxB2jTfB4egvG4pLnZ||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":6,"x__":94},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~1"]],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:32.825Z|1565787752760_6y5oWxB2jTfB4egvG4pLnZ|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~1","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:32.829Z|1565787752760_6y5oWxB2jTfB4egvG4pLnZ|0|executing transaction
2019-08-14T13:02:32.847Z|1565787752760_6y5oWxB2jTfB4egvG4pLnZ||1|addObj|0ms; level=0|A~~1/{"newObj":null,"oldObj":{"_id":"A~~1","b":"B~~1","val":1},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:32.900Z|1565787752760_6y5oWxB2jTfB4egvG4pLnZ||1|preComputeFormula|A~~1 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:32.903Z|1565787752760_6y5oWxB2jTfB4egvG4pLnZ||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T13:02:32.905Z|1565787752760_6y5oWxB2jTfB4egvG4pLnZ||1|addObj|1ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":6,"x__":94},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~1"]],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:32.908Z|1565787752760_6y5oWxB2jTfB4egvG4pLnZ||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":5,"x__":95}
2019-08-14T13:02:32.945Z|1565787752760_6y5oWxB2jTfB4egvG4pLnZ||1|FINISH|{"clientId_":"e76JPER5RLVyivdKkL5pVD","state_":"BEGIN","obj":{"_id":"A~~1","b":"B~~1","val":1},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565787752760_6y5oWxB2jTfB4egvG4pLnZ"}
2019-08-14T13:02:32.959Z|1565787752959_e3z5paVTWvC4Dec91i3hqq|BEGIN|{"clientId_":"5rRztgbQ3kKrs8uz1cS9Sa","state_":"BEGIN","obj":{"_id":"C~~c"},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565787752959_e3z5paVTWvC4Dec91i3hqq"}
2019-08-14T13:02:33.008Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|addObj|0ms; level=0|A~~c__61cnmbi9BPzEig72cHBGFe/{"newObj":null,"oldObj":{"_id":"A~~c__61cnmbi9BPzEig72cHBGFe","b":"B~~1","val":3},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:33.059Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|preComputeFormula|A~~c__61cnmbi9BPzEig72cHBGFe --> B~~1[sum__] = 2 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":2}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:33.060Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 98
2019-08-14T13:02:33.062Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":2,"x__":98},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~c__61cnmbi9BPzEig72cHBGFe"]],"reduce":[{"key":["B~~1"],"value":2}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:33.065Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~c__61cnmbi9BPzEig72cHBGFe","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:33.067Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__|0|executing transaction
2019-08-14T13:02:33.082Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|addObj|0ms; level=0|A~~c__61cnmbi9BPzEig72cHBGFe/{"newObj":null,"oldObj":{"_id":"A~~c__61cnmbi9BPzEig72cHBGFe","b":"B~~1","val":3},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:33.128Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|preComputeFormula|A~~c__61cnmbi9BPzEig72cHBGFe --> B~~1[sum__] = 2 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":2}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:33.129Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 98
2019-08-14T13:02:33.129Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":2,"x__":98},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~c__61cnmbi9BPzEig72cHBGFe"]],"reduce":[{"key":["B~~1"],"value":2}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:33.131Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":2,"x__":98}
2019-08-14T13:02:33.165Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|FINISH|{"clientId_":"woCKVWuWNeyZ2qmMUGRPUa","state_":"BEGIN","obj":{"_id":"A~~c__61cnmbi9BPzEig72cHBGFe","b":"B~~1","val":3},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565787752959_e3z5paVTWvC4Dec91i3hqq__"}
2019-08-14T13:02:33.188Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|addObj|0ms; level=0|A~~c__eQPjvUN9uo8YXBZ6LsXYm5/{"newObj":null,"oldObj":{"_id":"A~~c__eQPjvUN9uo8YXBZ6LsXYm5","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:33.230Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|preComputeFormula|A~~c__eQPjvUN9uo8YXBZ6LsXYm5 --> B~~1[sum__] = 0 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":0}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:33.231Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 100
2019-08-14T13:02:33.233Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":0,"x__":100},"oldObj":{"_id":"B~~1","sum__":2,"x__":98},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~c__eQPjvUN9uo8YXBZ6LsXYm5"]],"reduce":[],"reduceDelete":[["B~~1"]]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:33.235Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__|0|objIds: ["B~~1","MAPDELETE:B~~1\u0001A~~c__eQPjvUN9uo8YXBZ6LsXYm5","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:33.237Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__|0|executing transaction
2019-08-14T13:02:33.248Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|addObj|0ms; level=0|A~~c__eQPjvUN9uo8YXBZ6LsXYm5/{"newObj":null,"oldObj":{"_id":"A~~c__eQPjvUN9uo8YXBZ6LsXYm5","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:33.288Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|preComputeFormula|A~~c__eQPjvUN9uo8YXBZ6LsXYm5 --> B~~1[sum__] = 0 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":0}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:33.289Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 100
2019-08-14T13:02:33.290Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":0,"x__":100},"oldObj":{"_id":"B~~1","sum__":2,"x__":98},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[],"mapDelete":[["B~~1","A~~c__eQPjvUN9uo8YXBZ6LsXYm5"]],"reduce":[],"reduceDelete":[["B~~1"]]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:33.293Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":0,"x__":100}
2019-08-14T13:02:33.353Z|1565787752959_e3z5paVTWvC4Dec91i3hqq__||1|FINISH|{"clientId_":"g8nLHZ94WpbbAWKX1KrLo4","state_":"BEGIN","obj":{"_id":"A~~c__eQPjvUN9uo8YXBZ6LsXYm5","b":"B~~1","val":2},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565787752959_e3z5paVTWvC4Dec91i3hqq__"}
2019-08-14T13:02:33.355Z|1565787752959_e3z5paVTWvC4Dec91i3hqq||1|addObj|0ms; level=0|C~~c/{"newObj":null,"oldObj":{"_id":"C~~c"},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:33.359Z|1565787752959_e3z5paVTWvC4Dec91i3hqq|0|objIds: []|conflicts: []
2019-08-14T13:02:33.363Z|1565787752959_e3z5paVTWvC4Dec91i3hqq|0|executing transaction
2019-08-14T13:02:33.388Z|1565787752959_e3z5paVTWvC4Dec91i3hqq||1|addObj|0ms; level=0|C~~c/{"newObj":null,"oldObj":{"_id":"C~~c"},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:33.391Z|1565787752959_e3z5paVTWvC4Dec91i3hqq||1|computeFormulasAndSave|saveObjects:
2019-08-14T13:02:33.411Z|1565787752959_e3z5paVTWvC4Dec91i3hqq||1|FINISH|{"clientId_":"5rRztgbQ3kKrs8uz1cS9Sa","state_":"BEGIN","obj":{"_id":"C~~c"},"type_":"[form] ServerEventDeletedFormDataEvent","_id":"1565787752959_e3z5paVTWvC4Dec91i3hqq"}

  FrmdbEngine
    ✓ Should allow basic formulas computation when saving an object with auto-correct (2 secs)
frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id])
stockReservationSchema.entities.B.props.sum__.compiledFormula_= undefined
stockReservationSchema.entities.B.props.x__.formula= 100 - sum__
Starting FormulaDBEngine...
2019-08-14T13:02:33.549Z|1565787753549_2Z6RaCP2oyUjEWfrs2WL2g|BEGIN|{"clientId_":"vQArBpxB8ZYcEK9VnFoZYP","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565787753549_2Z6RaCP2oyUjEWfrs2WL2g"}
2019-08-14T13:02:33.552Z|1565787753549_2Z6RaCP2oyUjEWfrs2WL2g||1|addObj|0ms; level=0|A~~bQjaUiveL8vakZcemg5qis/{"newObj":{"_id":"A~~bQjaUiveL8vakZcemg5qis","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:33.585Z|1565787753549_2Z6RaCP2oyUjEWfrs2WL2g||1|preComputeFormula|A~~bQjaUiveL8vakZcemg5qis --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:33.586Z|1565787753549_2Z6RaCP2oyUjEWfrs2WL2g||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T13:02:33.589Z|1565787753549_2Z6RaCP2oyUjEWfrs2WL2g||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~bQjaUiveL8vakZcemg5qis"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:33.592Z|1565787753549_2Z6RaCP2oyUjEWfrs2WL2g|0|objIds: ["A~~bQjaUiveL8vakZcemg5qis","B~~1","MAP:B~~1\u0001A~~bQjaUiveL8vakZcemg5qis","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:33.594Z|1565787753549_2Z6RaCP2oyUjEWfrs2WL2g|0|executing transaction
2019-08-14T13:02:33.598Z|1565787753549_2Z6RaCP2oyUjEWfrs2WL2g||1|addObj|0ms; level=0|A~~bQjaUiveL8vakZcemg5qis/{"newObj":{"_id":"A~~bQjaUiveL8vakZcemg5qis","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:33.624Z|1565787753549_2Z6RaCP2oyUjEWfrs2WL2g||1|preComputeFormula|A~~bQjaUiveL8vakZcemg5qis --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:33.625Z|1565787753549_2Z6RaCP2oyUjEWfrs2WL2g||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T13:02:33.626Z|1565787753549_2Z6RaCP2oyUjEWfrs2WL2g||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~bQjaUiveL8vakZcemg5qis"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:33.628Z|1565787753549_2Z6RaCP2oyUjEWfrs2WL2g||1|computeFormulasAndSave|saveObjects: {"_id":"A~~bQjaUiveL8vakZcemg5qis","b":"B~~1","val":2}, {"_id":"B~~1","sum__":5,"x__":95}
2019-08-14T13:02:33.650Z|1565787753549_2Z6RaCP2oyUjEWfrs2WL2g||1|FINISH|{"clientId_":"vQArBpxB8ZYcEK9VnFoZYP","state_":"BEGIN","obj":{"_id":"A~~bQjaUiveL8vakZcemg5qis","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565787753549_2Z6RaCP2oyUjEWfrs2WL2g"}
2019-08-14T13:02:33.657Z|1565787753657_j8eV2HTHe2vTjXaon17BXe|BEGIN|{"_id":"1565787753657_j8eV2HTHe2vTjXaon17BXe","type_":"[entity] ServerEventPreviewFormula","targetEntity":{"_id":"B","props":{"_id":{"name":"_id","propType_":"STRING"},"sum__":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id])"},"x__":{"name":"x__","propType_":"FORMULA","formula":"100 - sum__"}},"validations":{"positiveX":{"conditionExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":8,"origExpr":"x__ >= 0","operator":">=","left":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"x__","name":"x__"},"right":{"type":"NumberLiteral","startIndex":7,"endIndex":8,"origExpr":"0","value":0,"raw":"0"}}}}},"targetPropertyName":"x__","formula":"200 - sum__","currentDataObj":{"_id":"B~~1","sum__":5,"x__":95},"state_":"BEGIN","clientId_":"ABC"}
2019-08-14T13:02:33.671Z|1565787753670_YNGNpT4TK44eaiHfH16uk|BEGIN|{"_id":"1565787753670_YNGNpT4TK44eaiHfH16uk","type_":"[entity] ServerEventPreviewFormula","targetEntity":{"_id":"B","props":{"_id":{"name":"_id","propType_":"STRING"},"sum__":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id])"},"x__":{"name":"x__","propType_":"FORMULA","formula":"100 - sum__"}},"validations":{"positiveX":{"conditionExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":8,"origExpr":"x__ >= 0","operator":">=","left":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"x__","name":"x__"},"right":{"type":"NumberLiteral","startIndex":7,"endIndex":8,"origExpr":"0","value":0,"raw":"0"}}}}},"targetPropertyName":"sum__","formula":"SUMIF(A.val, b == @[_id]) + COUNTIF(A.val, b == @[_id])","currentDataObj":{"_id":"B~~1","sum__":5,"x__":95},"state_":"BEGIN","clientId_":"ABC"}
    ✓ Should allow preview formulas (0.238 sec)
frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id])
stockReservationSchema.entities.B.props.sum__.compiledFormula_= undefined
stockReservationSchema.entities.B.props.x__.formula= 100 - sum__
Starting FormulaDBEngine...
2019-08-14T13:02:33.774Z|1565787753774_6Qw7bUWLz2AabFPNTX2x6X|BEGIN|{"clientId_":"ko3wDtHxMCPnEpfCnx5pvD","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565787753774_6Qw7bUWLz2AabFPNTX2x6X"}
2019-08-14T13:02:33.777Z|1565787753774_6Qw7bUWLz2AabFPNTX2x6X||1|addObj|0ms; level=0|A~~ezW3skysJCM1KT3e4pCzyu/{"newObj":{"_id":"A~~ezW3skysJCM1KT3e4pCzyu","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:33.809Z|1565787753774_6Qw7bUWLz2AabFPNTX2x6X||1|preComputeFormula|A~~ezW3skysJCM1KT3e4pCzyu --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:33.810Z|1565787753774_6Qw7bUWLz2AabFPNTX2x6X||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T13:02:33.813Z|1565787753774_6Qw7bUWLz2AabFPNTX2x6X||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~ezW3skysJCM1KT3e4pCzyu"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:33.816Z|1565787753774_6Qw7bUWLz2AabFPNTX2x6X|0|objIds: ["A~~ezW3skysJCM1KT3e4pCzyu","B~~1","MAP:B~~1\u0001A~~ezW3skysJCM1KT3e4pCzyu","REDUCE:B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:33.820Z|1565787753774_6Qw7bUWLz2AabFPNTX2x6X|0|executing transaction
2019-08-14T13:02:33.824Z|1565787753774_6Qw7bUWLz2AabFPNTX2x6X||1|addObj|0ms; level=0|A~~ezW3skysJCM1KT3e4pCzyu/{"newObj":{"_id":"A~~ezW3skysJCM1KT3e4pCzyu","b":"B~~1","val":2},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:33.865Z|1565787753774_6Qw7bUWLz2AabFPNTX2x6X||1|preComputeFormula|A~~ezW3skysJCM1KT3e4pCzyu --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":5}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']]
2019-08-14T13:02:33.867Z|1565787753774_6Qw7bUWLz2AabFPNTX2x6X||1|preComputeFormula| - selfFormula: B~~1[x__] = [100 - sum__] = 95
2019-08-14T13:02:33.868Z|1565787753774_6Qw7bUWLz2AabFPNTX2x6X||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":95},"oldObj":{"_id":"B~~1","sum__":1,"x__":7},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~ezW3skysJCM1KT3e4pCzyu"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":5}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:33.870Z|1565787753774_6Qw7bUWLz2AabFPNTX2x6X||1|computeFormulasAndSave|saveObjects: {"_id":"A~~ezW3skysJCM1KT3e4pCzyu","b":"B~~1","val":2}, {"_id":"B~~1","sum__":5,"x__":95}
2019-08-14T13:02:33.903Z|1565787753774_6Qw7bUWLz2AabFPNTX2x6X||1|FINISH|{"clientId_":"ko3wDtHxMCPnEpfCnx5pvD","state_":"BEGIN","obj":{"_id":"A~~ezW3skysJCM1KT3e4pCzyu","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565787753774_6Qw7bUWLz2AabFPNTX2x6X"}
2019-08-14T13:02:33.916Z|1565787753915_2bbN247yFgNA3EZn5jzB29|BEGIN|{"_id":"1565787753915_2bbN247yFgNA3EZn5jzB29","type_":"[entity] ServerEventSetProperty","targetEntity":{"_id":"B","props":{"_id":{"name":"_id","propType_":"STRING"},"sum__":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id])","compiledFormula_":{"type_":"CompiledFormulaN","rawExpr":{"type":"CallExpression","startIndex":0,"arguments":[{"type":"MemberExpression","startIndex":6,"computed":false,"object":{"type":"Identifier","startIndex":6,"endIndex":7,"origExpr":"A","name":"A"},"property":{"type":"Identifier","startIndex":8,"endIndex":11,"origExpr":"val","name":"val","belongsTo":"A"},"endIndex":11,"origExpr":"A.val"},{"type":"BinaryExpression","startIndex":13,"endIndex":24,"origExpr":"b == @[_id]","operator":"==","left":{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"},"right":{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}}],"callee":{"type":"Identifier","startIndex":0,"endIndex":5,"origExpr":"SUMIF","name":"SUMIF"},"endIndex":25,"origExpr":"SUMIF(A.val, b == @[_id])"},"finalExpression":{"type":"MemberExpression","startIndex":0,"computed":true,"object":{"type":"Identifier","startIndex":0,"endIndex":5,"origExpr":"$TRG$","name":"$TRG$"},"property":{"type":"StringLiteral","startIndex":6,"endIndex":41,"origExpr":"'vaggs-A-SUMIF(A.val, b == @[_id])'","value":"vaggs-A-SUMIF(A.val, b == @[_id])","raw":"'vaggs-A-SUMIF(A.val, b == @[_id])'"},"endIndex":42,"origExpr":"$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])']"},"targetEntityName":"B","targetPropertyName":"sum__","triggers":[{"type_":"MapReduceTriggerN","rawExpr":{"type":"CallExpression","startIndex":0,"arguments":[{"type":"MemberExpression","startIndex":6,"computed":false,"object":{"type":"Identifier","startIndex":6,"endIndex":7,"origExpr":"A","name":"A"},"property":{"type":"Identifier","startIndex":8,"endIndex":11,"origExpr":"val","name":"val","belongsTo":"A"},"endIndex":11,"origExpr":"A.val"},{"type":"BinaryExpression","startIndex":13,"endIndex":24,"origExpr":"b == @[_id]","operator":"==","left":{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"},"right":{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}}],"callee":{"type":"Identifier","startIndex":0,"endIndex":5,"origExpr":"SUMIF","name":"SUMIF"},"endIndex":25,"origExpr":"SUMIF(A.val, b == @[_id])"},"mapreduceAggsOfManyObservablesQueryableFromOneObs":{"aggsViewName":"vaggs-A-SUMIF(A.val, b == @[_id])","map":{"entityName":"A","keyExpr":[{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"}],"valueExpr":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"val","name":"val"},"query":{"startkeyExpr":[{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}],"endkeyExpr":[{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}],"inclusive_start":true,"inclusive_end":true}},"reduceFun":{"name":"SumReduceFunN"}},"mapObserversImpactedByOneObservable":{"obsViewName":"vobs-B-SUMIF(A.val, b == @[_id])","entityName":"B","keyExpr":[{"type":"MemberExpression","startIndex":18,"computed":true,"object":{"type":"Literal","startIndex":18,"endIndex":19,"origExpr":"@","value":"@","raw":"@"},"property":{"type":"Identifier","startIndex":20,"endIndex":23,"origExpr":"_id","name":"_id","belongsTo":"A"},"endIndex":24,"origExpr":"@[_id]"}],"query":{"startkeyExpr":[{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"}],"endkeyExpr":[{"type":"Identifier","startIndex":13,"endIndex":14,"origExpr":"b","name":"b","belongsTo":"A"}],"inclusive_start":true,"inclusive_end":true},"valueExpr":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"_id","name":"_id"}}}]}},"x__":{"name":"x__","propType_":"FORMULA","formula":"100 - sum__","compiledFormula_":{"type_":"CompiledFormulaN","rawExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":11,"origExpr":"100 - sum__","operator":"-","left":{"type":"NumberLiteral","startIndex":0,"endIndex":3,"origExpr":"100","value":100,"raw":"100"},"right":{"type":"Identifier","startIndex":6,"endIndex":11,"origExpr":"sum__","name":"sum__"}},"finalExpression":{"type":"BinaryExpression","startIndex":0,"endIndex":11,"origExpr":"100 - sum__","operator":"-","left":{"type":"NumberLiteral","startIndex":0,"endIndex":3,"origExpr":"100","value":100,"raw":"100"},"right":{"type":"Identifier","startIndex":6,"endIndex":11,"origExpr":"sum__","name":"sum__"}},"targetEntityName":"B","targetPropertyName":"x__"}}},"validations":{"positiveX":{"conditionExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":8,"origExpr":"x__ >= 0","operator":">=","left":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"x__","name":"x__"},"right":{"type":"NumberLiteral","startIndex":7,"endIndex":8,"origExpr":"0","value":0,"raw":"0"}}}}},"property":{"name":"x__","propType_":"FORMULA","formula":"200 - sum__"},"state_":"BEGIN","clientId_":"ABC"}
2019-08-14T13:02:33.986Z|1565787753915_2bbN247yFgNA3EZn5jzB29-1||computeFormulasAndSave| - selfFormula: B~~1[x__] = [200 - sum__] = 195
2019-08-14T13:02:33.989Z|1565787753915_2bbN247yFgNA3EZn5jzB29-1||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":195},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:33.992Z|1565787753915_2bbN247yFgNA3EZn5jzB29-1|0|objIds: ["B~~1"]|conflicts: []
2019-08-14T13:02:33.993Z|1565787753915_2bbN247yFgNA3EZn5jzB29-1|0|executing transaction
2019-08-14T13:02:34.002Z|1565787753915_2bbN247yFgNA3EZn5jzB29-1||computeFormulasAndSave| - selfFormula: B~~1[x__] = [200 - sum__] = 195
2019-08-14T13:02:34.004Z|1565787753915_2bbN247yFgNA3EZn5jzB29-1||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":195},"oldObj":{"_id":"B~~1","sum__":5,"x__":95},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:34.005Z|1565787753915_2bbN247yFgNA3EZn5jzB29-1||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":5,"x__":195}
2019-08-14T13:02:34.016Z|1565787753915_2bbN247yFgNA3EZn5jzB29-1||1|FINISH|{"_id":"1565787753915_2bbN247yFgNA3EZn5jzB29-1","type_":"[form] ServerEventModifiedFormData","state_":"BEGIN","clientId_":"ABC","obj":{"_id":"B~~1","sum__":5,"x__":195}}
2019-08-14T13:02:34.022Z|1565787754022_pNhRpvTriGx4cNP1FAtdwS|BEGIN|{"_id":"1565787754022_pNhRpvTriGx4cNP1FAtdwS","type_":"[entity] ServerEventSetProperty","targetEntity":{"_id":"B","props":{"_id":{"name":"_id","propType_":"STRING"},"sum__":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id])"},"x__":{"name":"x__","propType_":"FORMULA","formula":"200 - sum__","compiledFormula_":{"type_":"CompiledFormulaN","rawExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":11,"origExpr":"200 - sum__","operator":"-","left":{"type":"NumberLiteral","startIndex":0,"endIndex":3,"origExpr":"200","value":200,"raw":"200"},"right":{"type":"Identifier","startIndex":6,"endIndex":11,"origExpr":"sum__","name":"sum__"}},"finalExpression":{"type":"BinaryExpression","startIndex":0,"endIndex":11,"origExpr":"200 - sum__","operator":"-","left":{"type":"NumberLiteral","startIndex":0,"endIndex":3,"origExpr":"200","value":200,"raw":"200"},"right":{"type":"Identifier","startIndex":6,"endIndex":11,"origExpr":"sum__","name":"sum__"}},"targetEntityName":"B","targetPropertyName":"x__"}}},"validations":{"positiveX":{"conditionExpr":{"type":"BinaryExpression","startIndex":0,"endIndex":8,"origExpr":"x__ >= 0","operator":">=","left":{"type":"Identifier","startIndex":0,"endIndex":3,"origExpr":"x__","name":"x__"},"right":{"type":"NumberLiteral","startIndex":7,"endIndex":8,"origExpr":"0","value":0,"raw":"0"}}}}},"property":{"name":"sum__","propType_":"FORMULA","formula":"SUMIF(A.val, b == @[_id]) + COUNTIF(A.val, b == @[_id])"},"state_":"BEGIN","clientId_":"ABC"}
2019-08-14T13:02:34.135Z|1565787754022_pNhRpvTriGx4cNP1FAtdwS-1||computeFormulasAndSave| - selfFormula: B~~1[x__] = [200 - sum__] = 192
2019-08-14T13:02:34.137Z|1565787754022_pNhRpvTriGx4cNP1FAtdwS-1||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":8,"x__":192},"oldObj":{"_id":"B~~1","sum__":5,"x__":195},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-14T13:02:34.140Z|1565787754022_pNhRpvTriGx4cNP1FAtdwS-1|0|objIds: ["B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:34.142Z|1565787754022_pNhRpvTriGx4cNP1FAtdwS-1|0|executing transaction
2019-08-14T13:02:34.170Z|1565787754022_pNhRpvTriGx4cNP1FAtdwS-1||computeFormulasAndSave| - selfFormula: B~~1[x__] = [200 - sum__] = 192
2019-08-14T13:02:34.171Z|1565787754022_pNhRpvTriGx4cNP1FAtdwS-1||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":8,"x__":192},"oldObj":{"_id":"B~~1","sum__":5,"x__":195},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-14T13:02:34.172Z|1565787754022_pNhRpvTriGx4cNP1FAtdwS-1||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":8,"x__":192}
2019-08-14T13:02:34.200Z|1565787754022_pNhRpvTriGx4cNP1FAtdwS-1||1|FINISH|{"_id":"1565787754022_pNhRpvTriGx4cNP1FAtdwS-1","type_":"[form] ServerEventModifiedFormData","state_":"BEGIN","clientId_":"ABC","obj":{"_id":"B~~1","sum__":8,"x__":192}}
2019-08-14T13:02:34.208Z|1565787754208_e6q6udan1WYkvu9iEMKCLx|BEGIN|{"clientId_":"eMLN21ohfqdcBfBUnXHPjc","state_":"BEGIN","obj":{"_id":"A~~","b":"B~~1","val":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565787754208_e6q6udan1WYkvu9iEMKCLx"}
2019-08-14T13:02:34.211Z|1565787754208_e6q6udan1WYkvu9iEMKCLx||1|addObj|0ms; level=0|A~~jTA82BWJU4u4CSTmGjwJ5u/{"newObj":{"_id":"A~~jTA82BWJU4u4CSTmGjwJ5u","b":"B~~1","val":10},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:34.291Z|1565787754208_e6q6udan1WYkvu9iEMKCLx||1|preComputeFormula|A~~jTA82BWJU4u4CSTmGjwJ5u --> B~~1[sum__] = 19 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":15,"vaggs-A-COUNTIF(A.val, b == @[_id])":4}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-14T13:02:34.292Z|1565787754208_e6q6udan1WYkvu9iEMKCLx||1|preComputeFormula| - selfFormula: B~~1[x__] = [200 - sum__] = 181
2019-08-14T13:02:34.294Z|1565787754208_e6q6udan1WYkvu9iEMKCLx||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":19,"x__":181},"oldObj":{"_id":"B~~1","sum__":8,"x__":192},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~jTA82BWJU4u4CSTmGjwJ5u"],"value":10}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":15}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~jTA82BWJU4u4CSTmGjwJ5u"],"value":10}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":4}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:34.297Z|1565787754208_e6q6udan1WYkvu9iEMKCLx|0|objIds: ["A~~jTA82BWJU4u4CSTmGjwJ5u","B~~1","MAP:B~~1\u0001A~~jTA82BWJU4u4CSTmGjwJ5u","REDUCE:B~~1","MAP:B~~1\u0001A~~jTA82BWJU4u4CSTmGjwJ5u","REDUCE:B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:34.300Z|1565787754208_e6q6udan1WYkvu9iEMKCLx|0|executing transaction
2019-08-14T13:02:34.302Z|1565787754208_e6q6udan1WYkvu9iEMKCLx||1|addObj|0ms; level=0|A~~jTA82BWJU4u4CSTmGjwJ5u/{"newObj":{"_id":"A~~jTA82BWJU4u4CSTmGjwJ5u","b":"B~~1","val":10},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:34.373Z|1565787754208_e6q6udan1WYkvu9iEMKCLx||1|preComputeFormula|A~~jTA82BWJU4u4CSTmGjwJ5u --> B~~1[sum__] = 19 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":15,"vaggs-A-COUNTIF(A.val, b == @[_id])":4}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-14T13:02:34.375Z|1565787754208_e6q6udan1WYkvu9iEMKCLx||1|preComputeFormula| - selfFormula: B~~1[x__] = [200 - sum__] = 181
2019-08-14T13:02:34.377Z|1565787754208_e6q6udan1WYkvu9iEMKCLx||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":19,"x__":181},"oldObj":{"_id":"B~~1","sum__":8,"x__":192},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~jTA82BWJU4u4CSTmGjwJ5u"],"value":10}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":15}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~jTA82BWJU4u4CSTmGjwJ5u"],"value":10}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":4}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:34.379Z|1565787754208_e6q6udan1WYkvu9iEMKCLx||1|computeFormulasAndSave|saveObjects: {"_id":"A~~jTA82BWJU4u4CSTmGjwJ5u","b":"B~~1","val":10}, {"_id":"B~~1","sum__":19,"x__":181}
2019-08-14T13:02:34.424Z|1565787754208_e6q6udan1WYkvu9iEMKCLx||1|FINISH|{"clientId_":"eMLN21ohfqdcBfBUnXHPjc","state_":"BEGIN","obj":{"_id":"A~~jTA82BWJU4u4CSTmGjwJ5u","b":"B~~1","val":10},"type_":"[form] ServerEventModifiedFormData","_id":"1565787754208_e6q6udan1WYkvu9iEMKCLx"}
    ✓ Should allow adding/modifying formulas (0.742 sec)
frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id]) + COUNTIF(A.val, b == @[_id])
null: stockReservationSchema.entities.B.props.sum__.compiledFormula_=
null: Object {type_: "CompiledFormulaN", rawExpr: Object, finalExpression: Object, targetEntityName: "B", targetPropertyName: "sum__", …}
stockReservationSchema.entities.B.props.x__.formula= 200 - sum__
Starting FormulaDBEngine...
2019-08-14T13:02:34.502Z|1565787754502_gsScJbGksqLBUf4zAAM4rB|BEGIN|{"clientId_":"4CowaajhqW5JSfi6fVRpkN","state_":"BEGIN","obj":{"_id":"B~~1","sum__":1,"x__":7},"type_":"[form] ServerEventModifiedFormData","_id":"1565787754502_gsScJbGksqLBUf4zAAM4rB"}
2019-08-14T13:02:34.529Z|1565787754502_gsScJbGksqLBUf4zAAM4rB||computeFormulasAndSave| - selfFormula: B~~1[x__] = [200 - sum__] = 200
2019-08-14T13:02:34.532Z|1565787754502_gsScJbGksqLBUf4zAAM4rB||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":0,"x__":200},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-14T13:02:34.536Z|1565787754502_gsScJbGksqLBUf4zAAM4rB|0|objIds: ["B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:34.538Z|1565787754502_gsScJbGksqLBUf4zAAM4rB|0|executing transaction
2019-08-14T13:02:34.563Z|1565787754502_gsScJbGksqLBUf4zAAM4rB||computeFormulasAndSave| - selfFormula: B~~1[x__] = [200 - sum__] = 200
2019-08-14T13:02:34.565Z|1565787754502_gsScJbGksqLBUf4zAAM4rB||1|addObj|0ms; level=0|B~~1/{"newObj":{"_id":"B~~1","sum__":0,"x__":200},"aggsViewsUpdates":[],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{}]
2019-08-14T13:02:34.569Z|1565787754502_gsScJbGksqLBUf4zAAM4rB||1|computeFormulasAndSave|saveObjects: {"_id":"B~~1","sum__":0,"x__":200}
2019-08-14T13:02:34.586Z|1565787754502_gsScJbGksqLBUf4zAAM4rB||1|FINISH|{"clientId_":"4CowaajhqW5JSfi6fVRpkN","state_":"BEGIN","obj":{"_id":"B~~1","sum__":0,"x__":200},"type_":"[form] ServerEventModifiedFormData","_id":"1565787754502_gsScJbGksqLBUf4zAAM4rB"}
2019-08-14T13:02:34.589Z|1565787754589_nQcngo3Ji1UNaz5EGFeCT8|BEGIN|{"clientId_":"xuQYNmz6AyXKhPzYmkCqMN","state_":"BEGIN","obj":{"_id":"A~~1","b":"B~~1","val":1},"type_":"[form] ServerEventModifiedFormData","_id":"1565787754589_nQcngo3Ji1UNaz5EGFeCT8"}
2019-08-14T13:02:34.600Z|1565787754589_nQcngo3Ji1UNaz5EGFeCT8||1|addObj|1ms; level=0|A~~1/{"newObj":{"_id":"A~~1","b":"B~~1","val":1},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:34.669Z|1565787754589_nQcngo3Ji1UNaz5EGFeCT8||1|preComputeFormula|A~~1 --> B~~1[sum__] = 2 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":1,"vaggs-A-COUNTIF(A.val, b == @[_id])":1}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-14T13:02:34.670Z|1565787754589_nQcngo3Ji1UNaz5EGFeCT8||1|preComputeFormula| - selfFormula: B~~1[x__] = [200 - sum__] = 198
2019-08-14T13:02:34.671Z|1565787754589_nQcngo3Ji1UNaz5EGFeCT8||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":2,"x__":198},"oldObj":{"_id":"B~~1","sum__":0,"x__":200},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~1"],"value":1}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":1}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~1"],"value":1}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":1}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:34.674Z|1565787754589_nQcngo3Ji1UNaz5EGFeCT8|0|objIds: ["A~~1","B~~1","MAP:B~~1\u0001A~~1","REDUCE:B~~1","MAP:B~~1\u0001A~~1","REDUCE:B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:34.677Z|1565787754589_nQcngo3Ji1UNaz5EGFeCT8|0|executing transaction
2019-08-14T13:02:34.691Z|1565787754589_nQcngo3Ji1UNaz5EGFeCT8||1|addObj|0ms; level=0|A~~1/{"newObj":{"_id":"A~~1","b":"B~~1","val":1},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:34.767Z|1565787754589_nQcngo3Ji1UNaz5EGFeCT8||1|preComputeFormula|A~~1 --> B~~1[sum__] = 2 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":1,"vaggs-A-COUNTIF(A.val, b == @[_id])":1}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-14T13:02:34.768Z|1565787754589_nQcngo3Ji1UNaz5EGFeCT8||1|preComputeFormula| - selfFormula: B~~1[x__] = [200 - sum__] = 198
2019-08-14T13:02:34.770Z|1565787754589_nQcngo3Ji1UNaz5EGFeCT8||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":2,"x__":198},"oldObj":{"_id":"B~~1","sum__":0,"x__":200},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~1"],"value":1}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":1}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~1"],"value":1}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":1}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:34.771Z|1565787754589_nQcngo3Ji1UNaz5EGFeCT8||1|computeFormulasAndSave|saveObjects: {"_id":"A~~1","b":"B~~1","val":1}, {"_id":"B~~1","sum__":2,"x__":198}
2019-08-14T13:02:34.812Z|1565787754589_nQcngo3Ji1UNaz5EGFeCT8||1|FINISH|{"clientId_":"xuQYNmz6AyXKhPzYmkCqMN","state_":"BEGIN","obj":{"_id":"A~~1","b":"B~~1","val":1},"type_":"[form] ServerEventModifiedFormData","_id":"1565787754589_nQcngo3Ji1UNaz5EGFeCT8"}
2019-08-14T13:02:34.816Z|1565787754816_DYUtRPnDcLJUE6KnocTAf|BEGIN|{"clientId_":"5bjGC9Yvw2YzfsXYoH7PDe","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565787754816_DYUtRPnDcLJUE6KnocTAf"}
2019-08-14T13:02:34.827Z|1565787754816_DYUtRPnDcLJUE6KnocTAf||1|addObj|0ms; level=0|A~~2/{"newObj":{"_id":"A~~2","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:34.881Z|1565787754816_DYUtRPnDcLJUE6KnocTAf||1|preComputeFormula|A~~2 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":3,"vaggs-A-COUNTIF(A.val, b == @[_id])":2}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-14T13:02:34.882Z|1565787754816_DYUtRPnDcLJUE6KnocTAf||1|preComputeFormula| - selfFormula: B~~1[x__] = [200 - sum__] = 195
2019-08-14T13:02:34.884Z|1565787754816_DYUtRPnDcLJUE6KnocTAf||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":195},"oldObj":{"_id":"B~~1","sum__":2,"x__":198},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":3}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":2}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:34.887Z|1565787754816_DYUtRPnDcLJUE6KnocTAf|0|objIds: ["A~~2","B~~1","MAP:B~~1\u0001A~~2","REDUCE:B~~1","MAP:B~~1\u0001A~~2","REDUCE:B~~1","MAP:B~~1\u0001B~~1","MAP:B~~1\u0001B~~1"]|conflicts: []
2019-08-14T13:02:34.890Z|1565787754816_DYUtRPnDcLJUE6KnocTAf|0|executing transaction
2019-08-14T13:02:34.903Z|1565787754816_DYUtRPnDcLJUE6KnocTAf||1|addObj|0ms; level=0|A~~2/{"newObj":{"_id":"A~~2","b":"B~~1","val":2},"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:34.952Z|1565787754816_DYUtRPnDcLJUE6KnocTAf||1|preComputeFormula|A~~2 --> B~~1[sum__] = 5 ($TRG$={"vaggs-A-SUMIF(A.val, b == @[_id])":3,"vaggs-A-COUNTIF(A.val, b == @[_id])":2}) = [$TRG$['vaggs-A-SUMIF(A.val, b == @[_id])'] + $TRG$['vaggs-A-COUNTIF(A.val, b == @[_id])']]
2019-08-14T13:02:34.953Z|1565787754816_DYUtRPnDcLJUE6KnocTAf||1|preComputeFormula| - selfFormula: B~~1[x__] = [200 - sum__] = 195
2019-08-14T13:02:34.955Z|1565787754816_DYUtRPnDcLJUE6KnocTAf||1|addObj|0ms; level=1|B~~1/{"newObj":{"_id":"B~~1","sum__":5,"x__":195},"oldObj":{"_id":"B~~1","sum__":2,"x__":198},"aggsViewsUpdates":[{"viewHashCode":"vaggs-A-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":3}],"reduceDelete":[]},{"viewHashCode":"vaggs-A-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","A~~2"],"value":2}],"mapDelete":[],"reduce":[{"key":["B~~1"],"value":2}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-B-SUMIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-B-COUNTIF(A.val, b == @[_id])","map":[{"key":["B~~1","B~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:34.957Z|1565787754816_DYUtRPnDcLJUE6KnocTAf||1|computeFormulasAndSave|saveObjects: {"_id":"A~~2","b":"B~~1","val":2}, {"_id":"B~~1","sum__":5,"x__":195}
2019-08-14T13:02:35.010Z|1565787754816_DYUtRPnDcLJUE6KnocTAf||1|FINISH|{"clientId_":"5bjGC9Yvw2YzfsXYoH7PDe","state_":"BEGIN","obj":{"_id":"A~~2","b":"B~~1","val":2},"type_":"[form] ServerEventModifiedFormData","_id":"1565787754816_DYUtRPnDcLJUE6KnocTAf"}
    ✗ Should update views and compute new values of Observer when Observer field change (0.683 sec)
      - Expected Object({ _id: 'B~~1', sum__: 5, x__: 195 }) to equal <jasmine.objectContaining(Object({ sum__: 5, x__: 95 }))>.
          at <Jasmine>
          at UserContext.it (/d/code/metawiz/febe/core/src/frmdb_engine.spec.ts:305:25)
frmdbEngine.frmdbEngineStore.mapReduceViews.size= 0
stockReservationSchema.entities.B.props.sum__.formula= SUMIF(A.val, b == @[_id]) + COUNTIF(A.val, b == @[_id])
null: stockReservationSchema.entities.B.props.sum__.compiledFormula_=
null: Object {type_: "CompiledFormulaN", rawExpr: Object, finalExpression: Object, targetEntityName: "B", targetPropertyName: "sum__", …}
stockReservationSchema.entities.B.props.x__.formula= 200 - sum__
Starting FormulaDBEngine...
2019-08-14T13:02:35.212Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg|BEGIN|{"clientId_":"djPsGcxtsbNwYZbECTpgcr","state_":"BEGIN","obj":{"_id":"Tr~~","ac1":"Ac~~2","ac2":"Ac~~3","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565787755212_bbxSW7rhyBQsye5fHb4yRg"}
2019-08-14T13:02:35.216Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg||1|addObj|1ms; level=0|Tr~~hcs7gLMGZ4oGyQBt31C73r/{"newObj":{"_id":"Tr~~hcs7gLMGZ4oGyQBt31C73r","ac1":"Ac~~2","ac2":"Ac~~3","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:35.221Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE|BEGIN|{"clientId_":"gHSN9GWK6S2awfoFSdPg8h","state_":"BEGIN","obj":{"_id":"Tr~~","ac1":"Ac~~1","ac2":"Ac~~2","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565787755221_hjMd8iHfd8vMykyCgYhdAE"}
2019-08-14T13:02:35.224Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE||1|addObj|0ms; level=0|Tr~~qZeXhqCgxTujcREK3DKSop/{"newObj":{"_id":"Tr~~qZeXhqCgxTujcREK3DKSop","ac1":"Ac~~1","ac2":"Ac~~2","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:35.227Z|1565787755227_AzBfPcvDtGiGPvWLABuX1|BEGIN|{"clientId_":"9We29hby82UJtKfUTMT5Qo","state_":"BEGIN","obj":{"_id":"Tr~~","ac1":"Ac~~3","ac2":"Ac~~4","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565787755227_AzBfPcvDtGiGPvWLABuX1"}
2019-08-14T13:02:35.230Z|1565787755227_AzBfPcvDtGiGPvWLABuX1||1|addObj|1ms; level=0|Tr~~cSMXrQzHvEfv62abzjohZS/{"newObj":{"_id":"Tr~~cSMXrQzHvEfv62abzjohZS","ac1":"Ac~~3","ac2":"Ac~~4","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:35.281Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg||1|preComputeFormula|Tr~~hcs7gLMGZ4oGyQBt31C73r --> Ac~~3[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T13:02:35.283Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg||1|addObj|0ms; level=1|Ac~~3/{"newObj":{"_id":"Ac~~3","balance__":75},"oldObj":{"_id":"Ac~~3","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Tr~~hcs7gLMGZ4oGyQBt31C73r"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Tr~~hcs7gLMGZ4oGyQBt31C73r"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:35.299Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE||1|preComputeFormula|Tr~~qZeXhqCgxTujcREK3DKSop --> Ac~~2[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T13:02:35.301Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE||1|addObj|0ms; level=1|Ac~~2/{"newObj":{"_id":"Ac~~2","balance__":75},"oldObj":{"_id":"Ac~~2","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Tr~~qZeXhqCgxTujcREK3DKSop"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Tr~~qZeXhqCgxTujcREK3DKSop"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~1"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:35.312Z|1565787755227_AzBfPcvDtGiGPvWLABuX1||1|preComputeFormula|Tr~~cSMXrQzHvEfv62abzjohZS --> Ac~~4[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T13:02:35.314Z|1565787755227_AzBfPcvDtGiGPvWLABuX1||1|addObj|0ms; level=1|Ac~~4/{"newObj":{"_id":"Ac~~4","balance__":75},"oldObj":{"_id":"Ac~~4","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Tr~~cSMXrQzHvEfv62abzjohZS"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~4"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Tr~~cSMXrQzHvEfv62abzjohZS"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Ac~~4"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~4","Ac~~4"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:35.337Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE||1|preComputeFormula|Tr~~qZeXhqCgxTujcREK3DKSop --> Ac~~1[balance__] = 25 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":0,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T13:02:35.339Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE||1|addObj|0ms; level=1|Ac~~1/{"newObj":{"_id":"Ac~~1","balance__":25},"oldObj":{"_id":"Ac~~1","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Tr~~qZeXhqCgxTujcREK3DKSop"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Tr~~qZeXhqCgxTujcREK3DKSop"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~1"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~1","Ac~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Ac~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:35.343Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE|0|objIds: ["Tr~~qZeXhqCgxTujcREK3DKSop","Ac~~2","MAP:Ac~~2\u0001Tr~~qZeXhqCgxTujcREK3DKSop","REDUCE:Ac~~2","MAP:Ac~~1\u0001Tr~~qZeXhqCgxTujcREK3DKSop","REDUCE:Ac~~1","MAP:Ac~~2\u0001Ac~~2","MAP:Ac~~2\u0001Ac~~2","Ac~~1","MAP:Ac~~2\u0001Tr~~qZeXhqCgxTujcREK3DKSop","REDUCE:Ac~~2","MAP:Ac~~1\u0001Tr~~qZeXhqCgxTujcREK3DKSop","REDUCE:Ac~~1","MAP:Ac~~1\u0001Ac~~1","MAP:Ac~~1\u0001Ac~~1"]|conflicts: []
2019-08-14T13:02:35.346Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE|0|executing transaction
2019-08-14T13:02:35.350Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE||1|addObj|0ms; level=0|Tr~~qZeXhqCgxTujcREK3DKSop/{"newObj":{"_id":"Tr~~qZeXhqCgxTujcREK3DKSop","ac1":"Ac~~1","ac2":"Ac~~2","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:35.357Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg||1|preComputeFormula|Tr~~hcs7gLMGZ4oGyQBt31C73r --> Ac~~2[balance__] = 25 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":0,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T13:02:35.360Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg||1|addObj|0ms; level=1|Ac~~2/{"newObj":{"_id":"Ac~~2","balance__":25},"oldObj":{"_id":"Ac~~2","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Tr~~hcs7gLMGZ4oGyQBt31C73r"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Tr~~hcs7gLMGZ4oGyQBt31C73r"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:35.365Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg|0|objIds: ["Tr~~hcs7gLMGZ4oGyQBt31C73r","Ac~~3","MAP:Ac~~3\u0001Tr~~hcs7gLMGZ4oGyQBt31C73r","REDUCE:Ac~~3","MAP:Ac~~2\u0001Tr~~hcs7gLMGZ4oGyQBt31C73r","REDUCE:Ac~~2","MAP:Ac~~3\u0001Ac~~3","MAP:Ac~~3\u0001Ac~~3","Ac~~2","MAP:Ac~~3\u0001Tr~~hcs7gLMGZ4oGyQBt31C73r","REDUCE:Ac~~3","MAP:Ac~~2\u0001Tr~~hcs7gLMGZ4oGyQBt31C73r","REDUCE:Ac~~2","MAP:Ac~~2\u0001Ac~~2","MAP:Ac~~2\u0001Ac~~2"]|conflicts: ["1565787755221_hjMd8iHfd8vMykyCgYhdAE"]
2019-08-14T13:02:35.373Z|1565787755227_AzBfPcvDtGiGPvWLABuX1||1|preComputeFormula|Tr~~cSMXrQzHvEfv62abzjohZS --> Ac~~3[balance__] = 25 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":0,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T13:02:35.375Z|1565787755227_AzBfPcvDtGiGPvWLABuX1||1|addObj|0ms; level=1|Ac~~3/{"newObj":{"_id":"Ac~~3","balance__":25},"oldObj":{"_id":"Ac~~3","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Tr~~cSMXrQzHvEfv62abzjohZS"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~4"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Tr~~cSMXrQzHvEfv62abzjohZS"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:35.378Z|1565787755227_AzBfPcvDtGiGPvWLABuX1|0|objIds: ["Tr~~cSMXrQzHvEfv62abzjohZS","Ac~~4","MAP:Ac~~4\u0001Tr~~cSMXrQzHvEfv62abzjohZS","REDUCE:Ac~~4","MAP:Ac~~3\u0001Tr~~cSMXrQzHvEfv62abzjohZS","REDUCE:Ac~~3","MAP:Ac~~4\u0001Ac~~4","MAP:Ac~~4\u0001Ac~~4","Ac~~3","MAP:Ac~~4\u0001Tr~~cSMXrQzHvEfv62abzjohZS","REDUCE:Ac~~4","MAP:Ac~~3\u0001Tr~~cSMXrQzHvEfv62abzjohZS","REDUCE:Ac~~3","MAP:Ac~~3\u0001Ac~~3","MAP:Ac~~3\u0001Ac~~3"]|conflicts: ["1565787755212_bbxSW7rhyBQsye5fHb4yRg"]
2019-08-14T13:02:35.510Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE||1|preComputeFormula|Tr~~qZeXhqCgxTujcREK3DKSop --> Ac~~2[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T13:02:35.511Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE||1|addObj|0ms; level=1|Ac~~2/{"newObj":{"_id":"Ac~~2","balance__":75},"oldObj":{"_id":"Ac~~2","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Tr~~qZeXhqCgxTujcREK3DKSop"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Tr~~qZeXhqCgxTujcREK3DKSop"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~1"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:35.555Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE||1|preComputeFormula|Tr~~qZeXhqCgxTujcREK3DKSop --> Ac~~1[balance__] = 25 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":0,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T13:02:35.556Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE||1|addObj|0ms; level=1|Ac~~1/{"newObj":{"_id":"Ac~~1","balance__":25},"oldObj":{"_id":"Ac~~1","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Tr~~qZeXhqCgxTujcREK3DKSop"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Tr~~qZeXhqCgxTujcREK3DKSop"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~1"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~1","Ac~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~1","Ac~~1"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:35.557Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE||1|computeFormulasAndSave|saveObjects: {"_id":"Tr~~qZeXhqCgxTujcREK3DKSop","ac1":"Ac~~1","ac2":"Ac~~2","val":25}, {"_id":"Ac~~2","balance__":75}, {"_id":"Ac~~1","balance__":25}
2019-08-14T13:02:35.636Z|1565787755221_hjMd8iHfd8vMykyCgYhdAE||1|FINISH|{"clientId_":"gHSN9GWK6S2awfoFSdPg8h","state_":"BEGIN","obj":{"_id":"Tr~~qZeXhqCgxTujcREK3DKSop","ac1":"Ac~~1","ac2":"Ac~~2","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565787755221_hjMd8iHfd8vMykyCgYhdAE"}
2019-08-14T13:02:35.673Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg|0|executing transaction
2019-08-14T13:02:35.676Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg||1|addObj|1ms; level=0|Tr~~hcs7gLMGZ4oGyQBt31C73r/{"newObj":{"_id":"Tr~~hcs7gLMGZ4oGyQBt31C73r","ac1":"Ac~~2","ac2":"Ac~~3","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:35.745Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg||1|preComputeFormula|Tr~~hcs7gLMGZ4oGyQBt31C73r --> Ac~~3[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T13:02:35.747Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg||1|addObj|0ms; level=1|Ac~~3/{"newObj":{"_id":"Ac~~3","balance__":75},"oldObj":{"_id":"Ac~~3","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Tr~~hcs7gLMGZ4oGyQBt31C73r"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Tr~~hcs7gLMGZ4oGyQBt31C73r"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:35.800Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg||1|preComputeFormula|Tr~~hcs7gLMGZ4oGyQBt31C73r --> Ac~~2[balance__] = 50 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T13:02:35.801Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg||1|addObj|0ms; level=1|Ac~~2/{"newObj":{"_id":"Ac~~2","balance__":50},"oldObj":{"_id":"Ac~~2","balance__":75},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Tr~~hcs7gLMGZ4oGyQBt31C73r"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Tr~~hcs7gLMGZ4oGyQBt31C73r"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~2"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~2","Ac~~2"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:35.804Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg||1|computeFormulasAndSave|saveObjects: {"_id":"Tr~~hcs7gLMGZ4oGyQBt31C73r","ac1":"Ac~~2","ac2":"Ac~~3","val":25}, {"_id":"Ac~~3","balance__":75}, {"_id":"Ac~~2","balance__":50}
2019-08-14T13:02:35.896Z|1565787755212_bbxSW7rhyBQsye5fHb4yRg||1|FINISH|{"clientId_":"djPsGcxtsbNwYZbECTpgcr","state_":"BEGIN","obj":{"_id":"Tr~~hcs7gLMGZ4oGyQBt31C73r","ac1":"Ac~~2","ac2":"Ac~~3","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565787755212_bbxSW7rhyBQsye5fHb4yRg"}
2019-08-14T13:02:35.990Z|1565787755227_AzBfPcvDtGiGPvWLABuX1|0|executing transaction
2019-08-14T13:02:35.993Z|1565787755227_AzBfPcvDtGiGPvWLABuX1||1|addObj|0ms; level=0|Tr~~cSMXrQzHvEfv62abzjohZS/{"newObj":{"_id":"Tr~~cSMXrQzHvEfv62abzjohZS","ac1":"Ac~~3","ac2":"Ac~~4","val":25},"oldObj":null,"aggsViewsUpdates":[],"obsViewsUpdates":[]} in [{}]
2019-08-14T13:02:36.052Z|1565787755227_AzBfPcvDtGiGPvWLABuX1||1|preComputeFormula|Tr~~cSMXrQzHvEfv62abzjohZS --> Ac~~4[balance__] = 75 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":0}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T13:02:36.054Z|1565787755227_AzBfPcvDtGiGPvWLABuX1||1|addObj|0ms; level=1|Ac~~4/{"newObj":{"_id":"Ac~~4","balance__":75},"oldObj":{"_id":"Ac~~4","balance__":123},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Tr~~cSMXrQzHvEfv62abzjohZS"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~4"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Tr~~cSMXrQzHvEfv62abzjohZS"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Ac~~4"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~4","Ac~~4"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:36.102Z|1565787755227_AzBfPcvDtGiGPvWLABuX1||1|preComputeFormula|Tr~~cSMXrQzHvEfv62abzjohZS --> Ac~~3[balance__] = 50 ($TRG$={"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])":25,"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])":25}) = [50 + $TRG$['vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])'] - $TRG$['vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])']]
2019-08-14T13:02:36.103Z|1565787755227_AzBfPcvDtGiGPvWLABuX1||1|addObj|0ms; level=1|Ac~~3/{"newObj":{"_id":"Ac~~3","balance__":50},"oldObj":{"_id":"Ac~~3","balance__":75},"aggsViewsUpdates":[{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~4","Tr~~cSMXrQzHvEfv62abzjohZS"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~4"],"value":25}],"reduceDelete":[]},{"viewHashCode":"vaggs-Tr-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Tr~~cSMXrQzHvEfv62abzjohZS"],"value":25}],"mapDelete":[],"reduce":[{"key":["Ac~~3"],"value":25}],"reduceDelete":[]}],"obsViewsUpdates":[{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac2 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]},{"viewHashCode":"vobs-Ac-SUMIF(Tr.val, ac1 == @[_id])","map":[{"key":["Ac~~3","Ac~~3"]}],"mapDelete":[],"reduce":[],"reduceDelete":[]}]} in [{},{}]
2019-08-14T13:02:36.105Z|1565787755227_AzBfPcvDtGiGPvWLABuX1||1|computeFormulasAndSave|saveObjects: {"_id":"Tr~~cSMXrQzHvEfv62abzjohZS","ac1":"Ac~~3","ac2":"Ac~~4","val":25}, {"_id":"Ac~~4","balance__":75}, {"_id":"Ac~~3","balance__":50}
2019-08-14T13:02:36.182Z|1565787755227_AzBfPcvDtGiGPvWLABuX1||1|FINISH|{"clientId_":"9We29hby82UJtKfUTMT5Qo","state_":"BEGIN","obj":{"_id":"Tr~~cSMXrQzHvEfv62abzjohZS","ac1":"Ac~~3","ac2":"Ac~~4","val":25},"type_":"[form] ServerEventModifiedFormData","_id":"1565787755227_AzBfPcvDtGiGPvWLABuX1"}
    ✓ Should compute account balance correctly for transfer transactions (1 sec)

**************************************************
*                    Failures                    *
**************************************************

1) FrmdbEngine Should update views and compute new values of Observer when Observer field change
  - Expected Object({ _id: 'B~~1', sum__: 5, x__: 195 }) to equal <jasmine.objectContaining(Object({ sum__: 5, x__: 95 }))>.

Executed 5 of 5 specs (1 FAILED).
